var KonnektMP=function(){var H=function(S){return function(){function m(a){this.name=a.tagName.toLowerCase();this.template=A[this.name]||'<div class="missing_component">Unknown Component</div>';this.node=a;this.fragment=document.createDocumentFragment();this.wrapper=document.createElement("div");this.wrapper.className="Wrapper Wrapper__"+this.name;this.wrapper.innerHTML=this.template;this.fragment.appendChild(this.wrapper);this.maps=this.map(this.wrapper);this.wrapper.kb_maps=this.maps}function z(a,
u,d,l,b,n,c,h){function f(b){var c=L(b),n=this;this.key="for"!==u?J(b):c[0];this.filterNames=M(b);this.component="for"!==u?c[1]:void 0;this.id=0;this.isEvent=e;this.__proto__.bindText=this.__proto__.bindText.map(function(c){return c===b?this:c});Object.defineProperties(this,{value:{get:this.valget,set:this.valset,enumerable:!0,configurable:!1},_value:k("",!0)});this.__proto__.updateData=function(b){n.isConnected&&n._data&&("object"===typeof b&&b.value||(b={value:b}),"function"===typeof n._data.stopChange&&
n._data.stopChange().set(n.key,b.value))};this.__proto__.updateDom=function(b){n.isSynced()&&(n.element.stopChange(),"object"===typeof b&&b.value||(b={value:b}),n.value=b.value)}}var e="attribute"===u&&-1!==B.indexOf(c.name)||"component"===u&&c.name&&-1!==B.indexOf(c.name);e&&h.stopChange().removeAttribute(c.name);Object.defineProperties(f.prototype,{valget:k(I),valset:k(N),refresh:k(H),connect:k(T),deleteMap:k(U),unsync:k(G),isSynced:k(O),type:k(u),text:k(d,!0),bindText:k(l,!0),bindNames:k(P(l),
!0),bindListener:k(e?b.toLowerCase():b),bindProperty:k(e?c.name.toLowerCase():n),bindTarget:k(c,!0),element:k(h,!0),_data:k({},!0),filters:k({},!0),maps:k(a,!0)});return f}function I(){return this._value}function N(a){this._value=this.isSynced()?a:this._value;this.refresh()}function O(){return this.element.parentElement?!!this.element.parentElement:this.unsync()}function Q(a,u){function d(a,b){return b.reduce(function(b,c){return b+("string"===typeof c?c:0===c.filterNames.length?c._value:c.filterNames.reduce(function(b,
c){if(void 0!==a.filters){if(void 0!==a.filters[c])return a.filters[c](b);console.warn("there is no filter by the name %o in the data model filters %o",c,Object.keys(a.filters));return b}console.error("Somehow filters object was not added to the mapping via .connect() method, please see dev");return b},c._value))},"")}return 1===u.length?"string"===typeof u[0]._value?d(a,u):u[0]._value:d(a,u)}function H(){"for"!==this.type&&(this.isEvent?this.element[this.bindProperty]=this.bindText[0]._value:"component"===
this.type?(this.element.k_post||(this.element.k_post={}),this.element.k_post["textContent"===this.bindProperty?"innerHTML":this.bindTarget.name]=Q(this,this.bindText)):this.bindTarget[this.bindProperty]=Q(this,this.bindText));return this}function T(a){this._data=a;this.filters=void 0!==a.filters?a.filters:this.filters;a=0;for(var d=this.bindNames.length;a<d;a++)this._data.addDataUpdateListener&&(this._data.exists(this.bindNames[a])||this._data.add(this.bindNames[a],this._value),this.value=this._data.get(this.bindNames[a]),
"component"!==this.type&&(this.isConnected=!0,this._data.addDataUpdateListener(this.bindNames[a],this.updateDom),"for"===this.type&&console.log("run for type event listeners")));1!==this.bindText.length||"text"!==this.type&&"attribute"!==this.type&&!this.isEvent||this.element.addAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);return this}function U(){this.maps[this.key].splice(this.id,1);return this}function G(){for(var a=0,d=this.bindNames.length;a<d;a++)this._data.removeDataUpdateListener&&
this._data.removeDataUpdateListener(this.bindNames[a],this.updateDom);this.element.removeAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);this.maps=this.bindNames=this.filters=this._data=null;this.__proto__._data=null;this.__proto__.element=null;this.__proto__.filters=null;this.__proto__.bindTarget=null;this.__proto__.bindText=null;this.__proto__.bindNames=null;this.__proto__.element=null;this.__proto__.maps=null;return!1}function F(a){return a.split(new RegExp("("+
v.split("").join("\\")+")(.*?)("+r.split("").join("\\")+")","g")).map(function(a,d,l){return l[d-1]===v?v+a+r:a}).filter(function(a,d,l){return 0!==a.length&&a!==v&&a!==r&&0!==a.length})}function P(a){return a.filter(function(a){return-1!==a.indexOf(v)&&-1!==a.indexOf(r)}).map(function(a){return J(a)})}function J(a){return a.replace(new RegExp("["+v+r+"]","g"),"").replace(new RegExp("\\"+x.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function M(a){return-1!==a.indexOf(x)?a.replace(new RegExp("["+
r+"]","g"),"").replace(new RegExp("(.*?)(\\"+x.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[]}function L(a){return-1!==a.indexOf("for")?a.replace(new RegExp("["+v+r+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(a){return 0!==a.length}):[]}function k(a,d,E){return{value:a,writable:!!d,enumerable:!1,configurable:!!E}}function R(a,d){for(var E=y[a],l=0,b=E.length;l<b&&(E[l](d),d._stopPropogation);l++);return d._preventDefault}function d(a){var d=
a.match(C).map(function(a){return a.replace(/[<\/>]/g,"")});d.filter(function(a,l){return document.createElement(a)instanceof HTMLUnknownElement&&-1===d.indexOf(a,l+1)&&void 0===A[a]});0!==d.length&&R("unknown",new Event("unknown",d));return d}var A={},C=/(<\/.*?>)/g;S().call();var B=Object.keys(HTMLElement.prototype).filter(function(a){return 0===a.indexOf("on")}),v="{{",r="}}",x="|",y={unknown:[]};m.prototype.map=function(a){function d(l){for(var b=0,n=l.length;b<n;b++)if(void 0===l[b].kb_maps){l[b].kb_mapper=
a;if(3===l[b].nodeType){var c=l[b],h=k,f=c.textContent,e=c.parentElement instanceof HTMLUnknownElement;if(f.match(new RegExp("(\\"+v.split("").join("\\")+")(.*?)(\\"+r.split("").join("\\")+")","g")))for(var g=e?"component":-1!==f.indexOf("for")&&void 0!==f.indexOf("loop")?"for":"text",c=z(h,g,f,F(f),e?"":"textContent","textContent",c,c.parentElement),f=0,e=c.prototype.bindText.length;f<e;f++)0===c.prototype.bindText[f].indexOf(v)&&(g=new c(c.prototype.bindText[f]),c.prototype.bindText[f]=g,void 0===
h[g.key]&&(h[g.key]=[]),g.id=h[g.key].length,h[g.key].push(g))}else for(var h=l[b],c=k,f=h.attributes,e=h instanceof HTMLUnknownElement,g=0,w=f.length;g<w;g++)if(f[g].value.match(new RegExp("(\\"+v.split("").join("\\")+")(.*?)(\\"+r.split("").join("\\")+")","g")))for(var q=z(c,e?"component":"attribute",f[g].value,F(f[g].value),e?"":f[g].name,"value",f[g],h),p=0,t=q.prototype.bindText.length;p<t;p++)if(0===q.prototype.bindText[p].indexOf(v)){var K=new q(q.prototype.bindText[p]);q.prototype.bindText[p]=
K;void 0===c[K.key]&&(c[K.key]=[]);c[K.key].push(K)}l[b].childNodes&&0!==l[b].childNodes.length&&d(l[b].childNodes)}}var k={};d(a.childNodes);return k};m.prototype.addFilter=function(a,d){void 0!==this.maps[a]&&this.maps[a].forEach(function(a){a.filters.push(d);a.refresh()});return this};m.prototype.removeFilter=function(a,d){void 0!==this.maps[a]&&this.maps[a].forEach(function(k){k.filters.splice(this.maps[a].filters.indexOf(d),1);k.refresh()});return this};m.prototype.swapFilter=function(a,d,k){void 0!==
this.maps[a]&&this.maps[a].forEach(function(l){l.filters.splice(this.maps[a].filters.indexOf(d),1,k);l.refresh()});return this};Object.defineProperties(m,{startChars:k(function(a){if(void 0===a)return v;v="string"===typeof a?a:v;return this}),endChars:k(function(a){if(void 0===a)return r;r="string"===typeof a?a:r;return this}),pipeChars:k(function(a){if(void 0===a)return x;x="string"===typeof a?a:x;return this}),getUnknown:k(d),isRegistered:k(function(a){return void 0!==A[a]}),register:k(function(a,
k){void 0===A[a]?(A[a]=k,d(k)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",a);return this}),addEventListener:k(function(a,d){void 0!==y[a]?y[a].push(d):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",a);return this}),removeEventListener:k(function(a,d){if(void 0!==y[a])for(var k=0,l=y[a].length;k<l;k++)y[a][k].toString()===d.toString()&&y[a].splice(k,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",
a);return this})});return m}}(function(){function H(){function m(b,n){var c=b.length,a;for(a=0;a<c&&(b[a](n),void 0===n._stopPropogation);a++);}function z(b,n){var c=b.length,a;for(a=0;a<c&&(n.child=n.target,n.target=b[a].parent,b[a].func(n),void 0===n._stopPropogation);a++);}function I(b,n){for(var c=b.length;0<c;u++)if(b[u].toString()===n.toString())return!0;return!1}function N(b,n,c,a,d,e,g,w){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=
!0};this.value=c;this.oldValue=a;this.target=b;this.attr=n;this.arguments=d;this.action=e;this.child=void 0;this.type=g;this.stopChange=w}function O(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function Q(b,n,c,a){var d=b.get,e=b.set,g;return function(b){g=d.call(this);c(this,n,b,g,void 0,
this._stopChange)&&e.call(this,b);this._stopChange||a(this,n,b,g);this._stopChange=void 0}}function S(b,n,c,a){var d;return function(e){d=b.value;c(this,n,e,d,arguments,this._stopChange)&&(b.value=e);this._stopChange||a(this,n,e,d,arguments);this._stopChange=void 0}}function T(b,n,c,a){var d=b.value,e;return function(){c(this,n,null,null,arguments,this._stopChange)&&(e=d.apply(this,arguments));this._stopChange||a(this,n,null,null,arguments,e);this._stopChange=void 0;return e}}function U(b,n,c,a,d){var e=
d.style,g=n.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),w,q;return{get:function(){return q},set:function(b){w=q;c(d,n,b,w,void 0,this._stopChange)&&(q=b,e.setProperty(g,b));this._stopChange||a(d,n,b,w);this._stopChange=void 0},enumerable:!0,configurable:!0}}function G(b,a,c,h){if("function"!==typeof a)return d;var f=-1!==["value","checked"].indexOf(b),e=-1!==y.indexOf(b),g;if(this.toString()!==d.toString())if(c){var w=this.querySelectorAll("*");c=w.length;for(var q,p=0;p<c;p++){q=w[p].attrListeners();
if(f||"*"===b)void 0!==w[p].addInputBinding&&w[p].addInputBinding(),void 0!==w[p].addInputBoxBinding&&w[p].addInputBoxBinding();if(e)d.injectStyleProperty(w[p],b),g=h?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===b){g=h?"_parentStyleUpdateListeners":"_parentStyleListeners";c=y.length;for(var t=0;t<c;t++)d.injectStyleProperty(w[p],y[t]);void 0===q[g]["*"]&&(q[g]["*"]=[]);q[g]["*"].push({parent:this,func:a})}g=h?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===q[g][b]&&
(q[g][b]=[]);q[g][b].push({parent:this,func:a})}}else{q=this.attrListeners();if(e)g=h?"_styleUpdateListeners":"_styleListeners",d.injectStyleProperty(this,b);else{if(f||"*"===b)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===b){g=h?"_styleUpdateListeners":"_styleListeners";c=y.length;for(p=0;p<c;p++)d.injectStyleProperty(this,y[p]);void 0===q[g][b]&&(q[g][b]=[]);q[g][b].push(a)}g=h?"_attrUpdateListeners":"_attrListeners"}void 0===
q[g][b]&&(q[g][b]=[]);q[g][b].push(a)}else{if(f||"*"===b)for(t=document.querySelectorAll("input, textarea"),c=t.length,p=0;p<c;p++)void 0!==t[p].addInputBinding&&t[p].addInputBinding(),void 0!==t[p].addInputBoxBinding&&t[p].addInputBoxBinding();if(e){e=Array.prototype.slice.call(document.body.querySelectorAll("*"));c=e.length+1;e.unshift(document.body);for(p=0;p<c;p++)d.injectStyleProperty(e[p],b);g=h?v:B}else{if("*"===b){e=Array.prototype.slice.call(document.body.querySelectorAll("*"));c=e.length+
1;f=y.length;e.unshift(document.body);for(p=0;p<c;p++)for(t=0;t<f;t++)d.injectStyleProperty(e[p],y[t]);g=h?v:B;void 0===g[b]&&(g[b]=[]);g[b].push(a)}g=h?C:A}void 0===g[b]&&(g[b]=[]);g[b].push(a)}}function F(b,a,c,h){function f(b,c){var e=c[b],d=e.length;for(g=0;g<d;g++)e[g].toString()===a.toString()&&e.splice(g,1)}if("function"!==typeof a)return d;["value","checked"].indexOf(b);var e=-1!==y.indexOf(b),g;if(this.toString()!==d.toString())if(c){c=this.querySelectorAll("*");var w=c.length;e?(e=h?"_childStyleUpdateListeners":
"_childStyleListeners",f(b,this.attrListeners()[e]),e=h?"_parentStyleUpdateListeners":"_parentStyleListeners"):("*"===b&&(e=h?"_childStyleUpdateListeners":"_childStyleListeners",f(b,this.attrListeners()[e])),e=h?"_childAttrUpdateListeners":"_childAttrListeners",f(b,this.attrListeners()[e]),e=h?"_parentAttrUpdateListeners":"_parentAttrListeners");for(g=0;g<w;g++){for(var q=c[g].attrListeners()[e][b],p=q.length,t=0;t<p;t++)q[t].isEqualNode(this)&&q.slice(t,1);if("*"===b)for(listenersStyle=h?"_parentStyleUpdateListeners":
"_parentStyleListeners",q=c[g].attrListeners()[e][b],p=q.length,t=0;t<p;t++)q[t].isEqualNode(this)&&q.slice(t,1)}}else e?e=h?"_styleUpdateListeners":"_styleListeners":("*"===b&&(e=h?"_styleUpdateListeners":"_styleListeners",f(b,this.attrListeners()[e])),e=h?"_attrUpdateListeners":"_attrListeners"),f(b,this.attrListeners()[e]);else e?e=h?v:B:("*"===b&&(e=h?v:B,f(b,e)),e=h?C:A),f(b,e)}function P(b,a){d.addAttrListener.call(this,b,a,!0);return this}function J(b,a){d.addAttrUpdateListener.call(this,b,
a,!0);return this}function M(b,a){d.removeAttrListener.call(this,b,a,!0);return this}function L(b,a){d.removeAttrUpdateListener.call(this,b,a,!0);return this}function k(b,a,c){var d=this.attrListeners();"html"===a&&(a="innerHTML");"events"===a&&(a="onclick");switch(b){case "attr":if(I(d._attrListeners[a],c))return!0;break;case "attrupdate":if(I(d._attrUpdateListeners[a],c))return!0}return!1}function R(){this._stopChange=!0;return this}function d(){function b(b,c){var a,e=c.length;for(a=0;a<e;a++)-1===
b.indexOf(c[a])&&b.push(c[a]);return b}function a(b,c){for(var e=Object.keys(b),d,n,h=0,g=e.length;h<g;h++)if(d=e[h],void 0===c[d])c[d]=b[d].slice();else for(var f=0,k=b[d].length;f<k;f++)n=b[d][f],c[d].push(n)}function c(c){if(3!==c.target.nodeType&&8!==c.target.nodeType){var e=c.target.attrListeners(),h,g=["value","checked"],f=e._attrListeners,k=e._attrUpdateListeners,l=e._parentAttrListeners;h=e._parentAttrUpdateListeners;var m=!1;if(void 0!==A["*"]||void 0!==C["*"])m=!0;if(!0!==m&&void 0!==f["*"]||
void 0!==k["*"]||void 0!==l["*"]||void 0!==h["*"])m=!0;if(!0!==m)for(var r=0;r<g.length;r++)if(void 0!==A[g[r]]||void 0!==C[g[r]]||void 0!==f[g[r]]||void 0!==k[g[r]]||void 0!==l[g[r]]||void 0!==h[g[r]]){m=!0;break}h=m;g=Object.keys(B);f=Object.keys(v);Object.keys(e._styleListeners);Object.keys(e._styleUpdateListeners);k=Object.keys(e._parentStyleListeners);e=Object.keys(e._parentStyleUpdateListeners);l=[];if(0!==g.length||0!==f.length)l=b(l,g),l=b(l,f);if(0!==l.length&&0!==k.length||0!==e.length)l=
b(l,k),l=b(l,e);-1!==l.indexOf("*")&&(l=y);var e=l,g=e.length,x,u,f=[],z,k="outerHTML"===c.attr||"outerText"===c.attr?c.attr:void 0,l=c.target;void 0!==k&&(c.attr="appendChild",c.arguments=[c.target],c.target=c.target.parentElement);if(h){"appendChild"===c.attr&&3!==c.arguments[0].nodeType&&8!==c.arguments[0].nodeType?(f=Array.prototype.slice.call(c.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==c.arguments[0].tagName&&"TEXTAREA"!==c.arguments[0].tagName||f.unshift(c.arguments[0])):f=
Array.prototype.slice.call(c.target.querySelectorAll("input,textarea"));z=f.length;for(var D=0;D<z;D++)void 0!==f[D].addInputBinding&&f[D].addInputBinding(),void 0!==f[D].addInputBoxBinding&&f[D].addInputBoxBinding()}"appendChild"===c.attr&&"#text"!==c.arguments[0].nodeName&&"#comment"!==c.arguments[0].nodeName?(f=Array.prototype.slice.call(c.arguments[0].querySelectorAll("*")),f.unshift(c.arguments[0])):f=Array.prototype.slice.call(c.target.querySelectorAll("*"));h=c.target.__kb._parentAttrListeners;
m=c.target.__kb._parentAttrUpdateListeners;r=c.target.__kb._parentStyleListeners;x=c.target.__kb._parentStyleUpdateListeners;z=f.length;for(D=0;D<z;D++){if(0!==g)for(u=0;u<g;u++)d.injectStyleProperty(f[D],e[u]);u=f[D].attrListeners();a(h,u._parentAttrListeners);a(m,u._parentAttrUpdateListeners);a(r,u._parentStyleListeners);a(x,u._parentStyleUpdateListeners)}void 0!==k&&(c.attr=k,c.target=l,c.arguments=[])}}function h(b){var c=b.target.attributes[b.arguments[0]],a="setAttribute"===b.attr?b.arguments[1]:
"";e(b.target,b.arguments[0],a,void 0!==c?c.value:"",[a])||b.preventDefault()}function f(b){var c=b.target.attributes[b.arguments[0]],a="setAttribute"===b.attr?b.arguments[1]:"";g(b.target,b.arguments[0],a,void 0!==c?c.value:"",[a])}d.injectPrototypes(Node,"Node");d.injectPrototypes(Element,"Element");d.injectPrototypes(HTMLElement,"HTMLElement");d.injectPrototypes(HTMLInputElement,"HTMLInputElement");d.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");d.injectPrototypes(Document,"Document");
var e=E,g=l;d.addAttrUpdateListener("appendChild",c);d.addAttrUpdateListener("removeChild",c);d.addAttrUpdateListener("innerHTML",c);d.addAttrUpdateListener("outerHTML",c);d.addAttrUpdateListener("innerText",c);d.addAttrUpdateListener("outerText",c);d.addAttrUpdateListener("textContent",c);d.addAttrListener("setAttribute",h);d.addAttrListener("removeAttribute",h);d.addAttrUpdateListener("setAttribute",f);d.addAttrUpdateListener("removeAttribute",f);return d}var A={},C={},B={},v={},r={},x="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),
y=Object.getOwnPropertyNames(document.body.style),a=Object.keys(HTMLElement.prototype).filter(function(b){return 0===b.indexOf("on")}).concat(["addEventListener","removeEventListener"]),u,E=function(b,a,c,d,f,e){c=new N(b,a,c,d,f,void 0,"set",e);void 0!==b.__kb&&(d=b.__kb._attrListeners,f=b.__kb._styleListeners,e=b.__kb._parentAttrListeners,b=b.__kb._parentStyleListeners,void 0!==d[a]&&m(d[a],c),void 0===c._stopPropogation&&void 0!==f[a]&&m(f[a],c),void 0===c._stopPropogation&&void 0!==d["*"]&&(m(d["*"],
c),void 0===c._stopPropogation&&m(f["*"],c)),void 0===c._stopPropogation&&void 0!==e[a]&&z(e[a],c),void 0===c._stopPropogation&&void 0!==b[a]&&z(b[a],c),void 0===c._stopPropogation&&void 0!==e["*"]&&(z(e["*"],c),void 0===c._stopPropogation&&z(b["*"],c)));void 0===c._stopPropogation&&void 0!==A[a]&&m(A[a],c);void 0===c._stopPropogation&&void 0!==B[a]&&m(B[a],c);void 0===c._stopPropogation&&void 0!==A["*"]&&(m(A["*"],c),void 0===c._stopPropogation&&m(B["*"],c));return void 0!==c._preventDefault?!1:
!0},l=function(b,a,c,d,f,e){c=new N(b,a,c,d,f,e,"update");void 0!==b.__kb&&(d=b.__kb._attrUpdateListeners,f=b.__kb._styleUpdateListeners,e=b.__kb._parentAttrUpdateListeners,b=b.__kb._parentStyleUpdateListeners,void 0!==d[a]&&m(d[a],c),void 0===c._stopPropogation&&void 0!==f[a]&&m(f[a],c),void 0===c._stopPropogation&&void 0!==d["*"]&&(m(d["*"],c),void 0===c._stopPropogation&&m(f["*"],c)),void 0===c._stopPropogation&&void 0!==e[a]&&z(e[a],c),void 0===c._stopPropogation&&void 0!==b[a]&&z(b[a],c),void 0===
c._stopPropogation&&void 0!==e["*"]&&(z(e["*"],c),void 0===c._stopPropogation&&z(b["*"],c)));void 0===c._stopPropogation&&void 0!==C[a]&&m(C[a],c);void 0===c._stopPropogation&&void 0!==v[a]&&m(v[a],c);void 0===c._stopPropogation&&void 0!==C["*"]&&(m(C["*"],c),void 0===c._stopPropogation&&m(v["*"],c));return void 0!==c._preventDefault?!1:!0};d.injectPrototypeProperty=function(b,a,c,h,f){var e=b.prototype,g=Object.getOwnPropertyDescriptor(e,a);c=c||b.toString().split(/\s+/)[1].split("{")[0].replace("()",
"");var m=r[c];h=h||E;f=f||l;void 0===e.attrListeners&&(e={},e.attrListeners=function(){void 0===this.__kb&&(this.__kb=new O);return this.__kb}.bind(e),e.addAttrListener=d.addAttrListener,e.addAttrUpdateListener=d.addAttrUpdateListener,e.addChildAttrListener=P,e.addChildAttrUpdateListener=J,e.hasListener=k,e.removeAttrListener=d.removeAttrListener,e.removeAttrUpdateListener=d.removeAttrUpdateListener,e.removeChildAttrListener=M,e.removeChildAttrUpdateListener=L,e.stopChange=R);void 0===m&&(r[c]={obj:b,
proto:e,descriptors:{},set:void 0,update:void 0},m=r[c],m.set=h,m.update=f);void 0===m.descriptors[a]&&(m.descriptors[a]=g);g.configurable&&(void 0!==g.set?Object.defineProperty(e,a,{get:g.get,set:Q(g,a,h,f),enumerable:!0,configurable:!0}):"function"===typeof g.value?Object.defineProperty(e,a,{value:T(g,a,h,f),writable:!0,enumerable:!0,configurable:!0}):void 0!==g.value&&Object.defineProperty(e,a,{get:function(){return g.value},set:S(g,a,h,f),enumerable:!0,configurable:!0}));return d};d.injectStyleProperty=
function(b,a,c,h){var f=b.style,e=Object.getOwnPropertyDescriptor(f,a),g=b.attrListeners().injectedStyle;c=c||E;h=h||l;void 0===g&&(b.attrListeners().injectedStyle={obj:b,proto:f,descriptors:{},set:void 0,update:void 0},b.attrListeners().injectedStyle.set=c,b.attrListeners().injectedStyle.update=h,g=b.attrListeners().injectedStyle);void 0===g.descriptors[a]&&(g.descriptors[a]=e);e.configurable&&Object.defineProperty(f,a,U(e,a,c,h,b));return d};d.injectPrototypes=function(b,a,c,h){var f=b.prototype;
a=a||b.toString().split(/\s+/)[1].split("{")[0].replace("()","");var e=r[a],g=Object.getOwnPropertyNames(f);c=c||E;h=h||l;var m;void 0===f.attrListeners&&(f.attrListeners=function(){void 0===this.__kb&&(this.__kb=new O);return this.__kb},f.addAttrListener=d.addAttrListener,f.addAttrUpdateListener=d.addAttrUpdateListener,f.addChildAttrListener=P,f.addChildAttrUpdateListener=J,f.removeAttrListener=d.removeAttrListener,f.removeAttrUpdateListener=d.removeAttrUpdateListener,f.removeChildAttrListener=M,
f.removeChildAttrUpdateListener=L,f.hasListener=k,f.stopChange=R);void 0===e&&(r[a]={obj:b,proto:f,descriptors:{},set:void 0,update:void 0},e=r[a],e.set=c,e.update=h);m=r[a].descriptors;for(h=0;h<g.length;h+=1)void 0===m[g[h]]&&d.injectPrototypeProperty(b,g[h],a,c,l);if(-1!==g.indexOf("value")){var q=function(b){var a,c,d;if("checkbox"===this.type||"radio"===this.type)a=!0;c=a?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){d=a?"string"===typeof this.checked?
this.checked:this.checked?"true":"false":this.value;a&&(e.set(this,"checked",this.checked,c)?e.update(this,"checked",this.checked,c):m.checked.set.call(this,c));this.value=d;e.set(this,"value",this.value,c)?e.update(this,"value",this.checked,c):m.value.set.call(this,c)}.bind(this),0)};f.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",q)};f.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",q)};f.removeInputBoxBinding=
function(){this.attrListeners()._onmousedown=void 0;this.removeEventListener("mouseup",q)};f.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",q)}}return d};d.addAttrListener=function(b,d,c){if("html"===b){b=0;for(var h=x.length;b<h;b++)G.call(this,x[b],d,c,!1)}else if("events"===b)for(b=0,h=a.length;b<h;b++)G.call(this,a[b],d,c,!1);else G.call(this,b,d,c,!1);return this};d.addAttrUpdateListener=function(b,d,c){if("html"===b){b=0;for(var h=x.length;b<
h;b++)G.call(this,x[b],d,c,!0)}else if("events"===b)for(b=0,h=a.length;b<h;b++)G.call(this,a[b],d,c,!0);else G.call(this,b,d,c,!0);return this};d.removeAttrListener=function(b,d,c){if("html"===b){b=0;for(var h=x.length;b<h;b++)F.call(this,x[b],d,c,!1)}else if("events"===b)for(b=0,h=a.length;b<h;b++)F.call(this,a[b],d,c,!1);else F.call(this,b,d,c,!1);return this};d.removeAttrUpdateListener=function(b,d,c){if("html"===b){b=0;for(var h=x.length;b<h;b++)F.call(this,x[b],d,c,!0)}else if("events"===b)for(b=
0,h=a.length;b<h;b++)F.call(this,a[b],d,c,!0);else F.call(this,b,d,c,!0);return this};d.hasListener=function(b,a,c){"html"===a&&(a="innerHTML");"events"===a&&(a="onclick");switch(b){case "attr":if(I(A[a],c))return!0;break;case "attrupdate":if(I(C[a],c))return!0}return!1};d.injectedPrototypes=function(){return r};return d}"function"===typeof define&&define.amd&&define("KB",H);return H}());"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],
function(){return H}):"undefined"!==typeof module&&(module.exports=H);return H}();
