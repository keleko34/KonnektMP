var KonnektMP=function(){var H=function(S){return function(){function t(e,a){this.name=e.tagName.toLowerCase();this.template=y[this.name]||'<div class="missing_component">Unknown Component</div>';this.node=e;this.fragment=document.createDocumentFragment();this.wrapper=document.createElement("div");this.wrapper.className="Wrapper Wrapper__"+this.name;a||(this.wrapper.innerHTML=this.template);this.fragment.appendChild(this.wrapper);a||(this.maps=this.map(this.wrapper));a||(this.wrapper.kb_maps=this.maps)}
function z(){return new RegExp("(\\"+u.split("").join("\\")+")(.*?)(\\"+q.split("").join("\\")+")","g")}function I(e,a,c,b,d,k,f,g){function m(c){var b="for"===a?h(c):[],d=this;this.key="for"!==a?J(c):b[0];this.localKey=this.key.split(".").pop();this.filterNames=M(c);this.component="for"===a?b[1]:void 0;this.id=0;this.isEvent=n;this.isInput=l;this.isRadio=r;this.__proto__.bindText=this.__proto__.bindText.map(function(a){return a===c?this:a});this.__proto__.bindMaps.push(this);Object.defineProperties(this,
{value:{get:N,set:O,enumerable:!0,configurable:!0}});this.updateData=function(a){if(d.isConnected&&d._data){if("object"!==typeof a||void 0===a.value)a={value:a};"function"===typeof d._data.stopChange&&d._data.stopChange().set(d.key,a.value)}};this.updateDom=function(a){d.refresh()};this.updateLoop=function(a){d.kb_loop&&d.loop(a,d.kb_loop)}}var n="attribute"===a&&-1!==w.indexOf(f.name)||"component"===a&&f.name&&-1!==w.indexOf(f.name),l="input"===g.tagName.toLowerCase(),r="radio"===g.type||"check"===
g.type;n&&g.stopChange().removeAttribute(f.name);Object.defineProperties(m.prototype,{refresh:p(T),connect:p(U),deleteMap:p(F),loop:p(G),unsync:p(P),unconnect:p(Q),isSynced:p(H),type:p(a),text:p(c,!0),bindText:p(b,!0),bindNames:p("for"===a?[h(b[0])[0]]:R(b),!0),bindMaps:p([],!0),bindListener:p(n?d.toLowerCase():d),bindProperty:p(n?f.name.toLowerCase():k),bindTarget:p(f,!0),element:p(g,!0),_data:p({},!0),filters:p({},!0),maps:p(e,!0)});return m}function N(){return this._data.get?this._data.get(this.key):
""}function O(e){this._data.set&&this._data.stopChange().set(this.key,e)}function H(){return this.element.parentElement?!!this.element.parentElement:this.unsync()}function K(e,a){function c(a,c){return c.reduce(function(c,d){return c+("string"===typeof d?d:0===d.filterNames.length?d.value:d.filterNames.reduce(function(c,d){if(void 0!==a.filters){if(void 0!==a.filters[d])return a.filters[d](c);console.warn("there is no filter by the name %o in the data model filters %o",d,Object.keys(a.filters));return c}console.error("Somehow filters object was not added to the mapping via .connect() method, please see dev");
return c},d.value))},"")}return 1===a.length?"function"!==typeof a[0].value&&"object"!==typeof a[0].value?c(e,a):a[0].value:c(e,a)}function T(){if("for"!==this.type)if(this.isEvent)this.element.stopChange()[this.bindProperty]=this.bindText[0].value;else if("component"===this.type)this.element.k_post||(this.element.k_post={}),this.element.k_post["textContent"===this.bindProperty?"innerHTML":this.bindTarget.name]=K(this,this.bindText);else if("innerHTML"===this.key){this.bindTarget[this.bindProperty]=
"";for(var e=0,a=this.value.length;e<a;e++)this.element.stopChange().appendChild(this.value[e])}else this.bindTarget[this.bindProperty]=K(this,this.bindText),this.isInput&&(this.element.stopChange()[this.bindTarget.name]=K(this,this.bindText));return this}function U(e){this.__proto__._data=e;this.__proto__.filters=void 0!==e.filters?e.filters:this.filters;for(var a=0,c=this.bindNames.length;a<c;a++)e.addDataUpdateListener&&(e.exists(this.bindNames[a])||(console.warn("No property by the name %o exists on this data set %o",
this.bindNames[a],e),e.add(this.bindNames[a],this.value)),this.refresh(),"component"!==this.type&&"for"!==this.type?(this.isConnected=!0,e.getLayer(this.key).addDataUpdateListener(this.bindNames[a],this.updateDom)):"for"===this.type&&e.addDataUpdateListener&&(this.element.stopChange().innerHTML="",e.getLayer(this.key).addDataMethodUpdateListener(this.updateLoop).addDataDeleteListener(this.updateLoop)));1!==this.bindText.length||"text"!==this.type&&"attribute"!==this.type&&!this.isEvent||this.element.addAttrUpdateListener("text"===
this.type?"html":this.bindListener,this.updateData);return this}function G(e,a){"function"===typeof e&&(this.kb_loop=e);for(var c=this._data.get(this.key),b=0,d=this.filterNames.length;b<d;b++)c=this.filters[this.filterNames[b]](c);if("function"===typeof e)for(c=0,b=this._data.get(this.key).length;c<b;c++)d=document.createElement(this.component),d.k_post=this._data.get(this.key)[c],d.k_post.k_id=c,d.kb_wrapper=this.element.kb_wrapper,this.element.stopChange().appendChild(d),e(d);else if("postset"===
e.type&&("undefined"===typeof e.oldValue||"string"===typeof e.oldValue&&0===e.oldValue.length))d=document.createElement(this.component),c=this.element.children.length,d.k_post=this._data.get(this.key)[e.key],d.kb_wrapper=this.element.kb_wrapper,parseInt(e.key)>=c?this.element.stopChange().appendChild(d):this.element.stopChange().insertBefore(d,this.element.children[e.key]),"function"===typeof a&&a(d);else if("delete"===e.event)this.element.stopChange().removeChild(this.element.children[e.key]);else if("postpush"!==
e.type)for(c=0,b=this._data.get(this.key).length;c<b;c++){for(var d=0,k=Object.keys(this.element.children[c].kb_viewmodel.pointers).length;d<k;d++);for(var d=this.element.children[c].kb_maps,k=0,f=Object.keys(d),g=f.length;k<g;k++)for(var m=0,n=d[f[k]].length;m<n;m++)d[f[k]][m].unconnect().connect(d[f[k]][m]._data)}}function F(){this.maps[this.key].splice(this.id,1);return this}function Q(e){e=0;for(var a=this.bindNames.length;e<a;e++)this._data.getLayer(this.key).removeDataUpdateListener(this.bindNames[e],
this.updateDom);return this}function P(){for(var e=0,a=this.bindNames.length;e<a;e++)this._data.removeDataUpdateListener&&("for"===this.type?this._data.getLayer(this.key).removeDataMethodUpdateListener("*",this.updateLoop).removeDataDeleteListener(this.updateLoop):"component"!==this.type&&this._data.getLayer(this.key).removeDataUpdateListener(this.bindNames[e],this.updateDom));this.element.removeAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);this.maps[this.key].splice(this.id,
1);e=0;for(a=this.maps[this.key].length;e<a;e++)this.maps[this.key][e].id=e;this.bindMaps=this.maps=this.bindNames=null;this.__proto__._data=null;this.__proto__.element=null;this.__proto__.filters=null;this.__proto__.bindTarget=null;this.__proto__.bindText=null;this.__proto__.bindNames=null;this.__proto__.element=null;this.__proto__.maps=null;this.__proto__.bindMaps=null;return this}function L(e){return e.split(new RegExp("("+u.split("").join("\\")+")(.*?)("+q.split("").join("\\")+")","g")).map(function(a,
c,b){return b[c-1]===u?u+a+q:a}).filter(function(a,c,b){return 0!==a.length&&a!==u&&a!==q&&0!==a.length})}function R(e){return e.filter(function(a){return-1!==a.indexOf(u)&&-1!==a.indexOf(q)}).map(function(a){return J(a)})}function J(e){return e.replace(new RegExp("["+u+q+"]","g"),"").replace(new RegExp("\\"+E.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function M(e){return-1!==e.indexOf(E)?e.replace(new RegExp("["+q+"]","g"),"").replace(new RegExp("(.*?)(\\"+E.split("").join("\\")+")"),"").replace(/\s/g,
"").split(","):[]}function h(e){return-1!==e.indexOf("for")?e.replace(new RegExp("["+u+q+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(a){return 0!==a.length}):[]}function p(e,a,c){return{value:e,writable:!!a,enumerable:!1,configurable:!!c}}function A(e,a){for(var c=v[e],b=0,d=c.length;b<d&&(c[b](a),a._stopPropogation);b++);return a._preventDefault}function B(e){var a=e.match(x).map(function(a){return a.replace(/[<\/>]/g,"")});a.filter(function(c,b){return document.createElement(c)instanceof
HTMLUnknownElement&&-1===a.indexOf(c,b+1)&&void 0===y[c]});0!==a.length&&A("unknown",new Event("unknown",a));return a}var y={},x=/(<\/.*?>)/g;S().call();var w=Object.keys(HTMLElement.prototype).filter(function(e){return 0===e.indexOf("on")}),u="{{",q="}}",E="|",v={unknown:[]};t.prototype.map=function(e){function a(b){b=Array.prototype.slice.call(b);for(var d=0,k=b.length;d<k;d++)if(void 0===b[d].kb_maps&&8!==b[d].nodeType){b[d].kb_mapper=e;if(3===b[d].nodeType){var f=b[d],g=c,m=f.textContent,n=f.parentElement instanceof
HTMLUnknownElement;if(m.match(z()))for(var l=n?"component":m.match(new RegExp("(\\"+u.split("").join("\\")+")(.*?)(for)(.*?)(loop)(.*?)(\\"+q.split("").join("\\")+")","g"))?"for":"text",f=I(g,l,m,L(m),n?"":"textContent","textContent",f,f.parentElement),m=0,n=f.prototype.bindText.length;m<n;m++)l=f.prototype.bindText[m],0===l.indexOf(u)&&(l=new f(l),f.prototype.bindText[m]=l,void 0===g[l.key]&&(g[l.key]=[]),l.id=g[l.key].length,g[l.key].push(l))}else for(var g=b[d],f=c,m=Array.prototype.slice.call(g.attributes),
n=g instanceof HTMLUnknownElement,r=void 0,l=0,h=m.length;l<h;l++)if(r=m[l],r.value.match(z()))for(var r=I(f,n?"component":"attribute",r.value,L(r.value),n?"":r.name,"value",r,g),p=0,V=r.prototype.bindText.length;p<V;p++){var D=r.prototype.bindText[p];0===D.indexOf(u)&&(D=new r(D),r.prototype.bindText[p]=D,void 0===f[D.key]&&(f[D.key]=[]),f[D.key].push(D),D.id=f[D.key].length-1)}b[d].childNodes&&0!==b[d].childNodes.length&&a(b[d].childNodes)}}var c={};a(e.childNodes);return c};Object.defineProperties(t,
{start:p(function(e){if(void 0===e)return u;u="string"===typeof e?e:u;return this}),end:p(function(e){if(void 0===e)return q;q="string"===typeof e?e:q;return this}),pipe:p(function(e){if(void 0===e)return E;E="string"===typeof e?e:E;return this}),getUnknown:p(B),isRegistered:p(function(e){return void 0!==y[e]}),register:p(function(e,a){void 0===y[e]?(y[e]=a,B(a)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",e);return this}),addEventListener:p(function(e,
a){void 0!==v[e]?v[e].push(a):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",e);return this}),removeEventListener:p(function(e,a){if(void 0!==v[e])for(var c=0,b=v[e].length;c<b;c++)v[e][c].toString()===a.toString()&&v[e].splice(c,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",e);return this})});return t}}(function(){function H(){function t(a,c){var b=a.length,d;for(d=0;d<b&&(a[d](c),void 0===c._stopPropogation);d++);
}function z(a,c){var b=a.length,d;for(d=0;d<b&&(c.child=c.target,c.target=a[d].parent,a[d].func(c),void 0===c._stopPropogation);d++);}function I(a,c){for(var b=a.length;0<b;E++)if(a[E].toString()===c.toString())return!0;return!1}function N(a,c,b,d,e,f,g,m){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=b;this.oldValue=d;this.target=a;this.attr=c;this.arguments=e;this.action=f;this.child=void 0;this.type=g;this.stopChange=
m}function O(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function S(a,c,b,d){var e=a.get,f=a.set,g;return function(a){g=e.call(this);b(this,c,a,g,void 0,this._stopChange)&&f.call(this,a);this._stopChange||d(this,c,a,g);this._stopChange=void 0}}function K(a,c,b,d){var e;return function(f){e=
a.value;b(this,c,f,e,arguments,this._stopChange)&&(a.value=f);this._stopChange||d(this,c,f,e,arguments);this._stopChange=void 0}}function T(a,c,b,d){var e=a.value,f;return function(){b(this,c,null,null,arguments,this._stopChange)&&(f=e.apply(this,arguments));this._stopChange||d(this,c,null,null,arguments,f);this._stopChange=void 0;return f}}function U(a,c,b,d,e){var f=e.style,g=c.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),m,n;return{get:function(){return n},set:function(a){m=n;b(e,c,a,
m,void 0,this._stopChange)&&(n=a,f.setProperty(g,a));this._stopChange||d(e,c,a,m);this._stopChange=void 0},enumerable:!0,configurable:!0}}function G(a,c,b,d){if("function"!==typeof c)return h;var e=-1!==["value","checked"].indexOf(a),f=-1!==u.indexOf(a),g;if(this.toString()!==h.toString())if(b){var m=this.querySelectorAll("*");b=m.length;for(var n,l=0;l<b;l++){n=m[l].attrListeners();if(e||"*"===a)void 0!==m[l].addInputBinding&&m[l].addInputBinding(),void 0!==m[l].addInputBoxBinding&&m[l].addInputBoxBinding();
if(f)h.injectStyleProperty(m[l],a),g=d?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===a){g=d?"_parentStyleUpdateListeners":"_parentStyleListeners";b=u.length;for(var r=0;r<b;r++)h.injectStyleProperty(m[l],u[r]);void 0===n[g]["*"]&&(n[g]["*"]=[]);n[g]["*"].push({parent:this,func:c})}g=d?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===n[g][a]&&(n[g][a]=[]);n[g][a].push({parent:this,func:c})}}else{n=this.attrListeners();if(f)g=d?"_styleUpdateListeners":"_styleListeners",
h.injectStyleProperty(this,a);else{if(e||"*"===a)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===a){g=d?"_styleUpdateListeners":"_styleListeners";b=u.length;for(l=0;l<b;l++)h.injectStyleProperty(this,u[l]);void 0===n[g][a]&&(n[g][a]=[]);n[g][a].push(c)}g=d?"_attrUpdateListeners":"_attrListeners"}void 0===n[g][a]&&(n[g][a]=[]);n[g][a].push(c)}else{if(e||"*"===a)for(r=document.querySelectorAll("input, textarea"),b=r.length,l=
0;l<b;l++)void 0!==r[l].addInputBinding&&r[l].addInputBinding(),void 0!==r[l].addInputBoxBinding&&r[l].addInputBoxBinding();if(f){f=Array.prototype.slice.call(document.body.querySelectorAll("*"));b=f.length+1;f.unshift(document.body);for(l=0;l<b;l++)h.injectStyleProperty(f[l],a);g=d?y:B}else{if("*"===a){f=Array.prototype.slice.call(document.body.querySelectorAll("*"));b=f.length+1;e=u.length;f.unshift(document.body);for(l=0;l<b;l++)for(r=0;r<e;r++)h.injectStyleProperty(f[l],u[r]);g=d?y:B;void 0===
g[a]&&(g[a]=[]);g[a].push(c)}g=d?A:p}void 0===g[a]&&(g[a]=[]);g[a].push(c)}}function F(a,c,b,d){function e(a,b){var d=b[a],f=d.length;for(g=0;g<f;g++)d[g].toString()===c.toString()&&d.splice(g,1)}if("function"!==typeof c)return h;["value","checked"].indexOf(a);var f=-1!==u.indexOf(a),g;if(this.toString()!==h.toString())if(b){b=this.querySelectorAll("*");var m=b.length;f?(f=d?"_childStyleUpdateListeners":"_childStyleListeners",e(a,this.attrListeners()[f]),f=d?"_parentStyleUpdateListeners":"_parentStyleListeners"):
("*"===a&&(f=d?"_childStyleUpdateListeners":"_childStyleListeners",e(a,this.attrListeners()[f])),f=d?"_childAttrUpdateListeners":"_childAttrListeners",e(a,this.attrListeners()[f]),f=d?"_parentAttrUpdateListeners":"_parentAttrListeners");for(g=0;g<m;g++){for(var n=b[g].attrListeners()[f][a],l=n.length,r=0;r<l;r++)n[r].isEqualNode(this)&&n.slice(r,1);if("*"===a)for(listenersStyle=d?"_parentStyleUpdateListeners":"_parentStyleListeners",n=b[g].attrListeners()[f][a],l=n.length,r=0;r<l;r++)n[r].isEqualNode(this)&&
n.slice(r,1)}}else f?f=d?"_styleUpdateListeners":"_styleListeners":("*"===a&&(f=d?"_styleUpdateListeners":"_styleListeners",e(a,this.attrListeners()[f])),f=d?"_attrUpdateListeners":"_attrListeners"),e(a,this.attrListeners()[f]);else f?f=d?y:B:("*"===a&&(f=d?y:B,e(a,f)),f=d?A:p),e(a,f)}function Q(a,c){h.addAttrListener.call(this,a,c,!0);return this}function P(a,c){h.addAttrUpdateListener.call(this,a,c,!0);return this}function L(a,c){h.removeAttrListener.call(this,a,c,!0);return this}function R(a,c){h.removeAttrUpdateListener.call(this,
a,c,!0);return this}function J(a,c,b){var d=this.attrListeners();"html"===c&&(c="innerHTML");"events"===c&&(c="onclick");switch(a){case "attr":if(I(d._attrListeners[c],b))return!0;break;case "attrupdate":if(I(d._attrUpdateListeners[c],b))return!0}return!1}function M(){this._stopChange=!0;return this}function h(){function a(a,c){var b,d=c.length;for(b=0;b<d;b++)-1===a.indexOf(c[b])&&a.push(c[b]);return a}function c(a,c){for(var b=Object.keys(a),d,e,f=0,g=b.length;f<g;f++)if(d=b[f],void 0===c[d])c[d]=
a[d].slice();else for(var h=0,k=a[d].length;h<k;h++)e=a[d][h],c[d].push(e)}function b(b){if(3!==b.target.nodeType&&8!==b.target.nodeType){var d=b.target.attrListeners(),e,f=["value","checked"],g=d._attrListeners,k=d._attrUpdateListeners,q=d._parentAttrListeners;e=d._parentAttrUpdateListeners;var t=!1;if(void 0!==p["*"]||void 0!==A["*"])t=!0;if(!0!==t&&void 0!==g["*"]||void 0!==k["*"]||void 0!==q["*"]||void 0!==e["*"])t=!0;if(!0!==t)for(var v=0;v<f.length;v++)if(void 0!==p[f[v]]||void 0!==A[f[v]]||
void 0!==g[f[v]]||void 0!==k[f[v]]||void 0!==q[f[v]]||void 0!==e[f[v]]){t=!0;break}e=t;f=Object.keys(B);g=Object.keys(y);Object.keys(d._styleListeners);Object.keys(d._styleUpdateListeners);k=Object.keys(d._parentStyleListeners);d=Object.keys(d._parentStyleUpdateListeners);q=[];if(0!==f.length||0!==g.length)q=a(q,f),q=a(q,g);if(0!==q.length&&0!==k.length||0!==d.length)q=a(q,k),q=a(q,d);-1!==q.indexOf("*")&&(q=u);var d=q,f=d.length,z,w,g=[],x,k="outerHTML"===b.attr||"outerText"===b.attr?b.attr:void 0,
q=b.target;void 0!==k&&(b.attr="appendChild",b.arguments=[b.target],b.target=b.target.parentElement);if(e){"appendChild"===b.attr&&3!==b.arguments[0].nodeType&&8!==b.arguments[0].nodeType?(g=Array.prototype.slice.call(b.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==b.arguments[0].tagName&&"TEXTAREA"!==b.arguments[0].tagName||g.unshift(b.arguments[0])):g=Array.prototype.slice.call(b.target.querySelectorAll("input,textarea"));x=g.length;for(var C=0;C<x;C++)void 0!==g[C].addInputBinding&&
g[C].addInputBinding(),void 0!==g[C].addInputBoxBinding&&g[C].addInputBoxBinding()}"appendChild"===b.attr&&"#text"!==b.arguments[0].nodeName&&"#comment"!==b.arguments[0].nodeName?(g=Array.prototype.slice.call(b.arguments[0].querySelectorAll("*")),g.unshift(b.arguments[0])):g=Array.prototype.slice.call(b.target.querySelectorAll("*"));e=b.target.__kb._parentAttrListeners;t=b.target.__kb._parentAttrUpdateListeners;v=b.target.__kb._parentStyleListeners;z=b.target.__kb._parentStyleUpdateListeners;x=g.length;
for(C=0;C<x;C++){if(0!==f)for(w=0;w<f;w++)h.injectStyleProperty(g[C],d[w]);w=g[C].attrListeners();c(e,w._parentAttrListeners);c(t,w._parentAttrUpdateListeners);c(v,w._parentStyleListeners);c(z,w._parentStyleUpdateListeners)}void 0!==k&&(b.attr=k,b.target=q,b.arguments=[])}}function d(a){var b=a.target.attributes[a.arguments[0]],c="setAttribute"===a.attr?a.arguments[1]:"";f(a.target,a.arguments[0],c,void 0!==b?b.value:"",[c])||a.preventDefault()}function k(a){var b=a.target.attributes[a.arguments[0]],
c="setAttribute"===a.attr?a.arguments[1]:"";g(a.target,a.arguments[0],c,void 0!==b?b.value:"",[c])}h.injectPrototypes(Node,"Node");h.injectPrototypes(Element,"Element");h.injectPrototypes(HTMLElement,"HTMLElement");h.injectPrototypes(HTMLInputElement,"HTMLInputElement");h.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");h.injectPrototypes(Document,"Document");var f=v,g=e;h.addAttrUpdateListener("appendChild",b);h.addAttrUpdateListener("removeChild",b);h.addAttrUpdateListener("innerHTML",
b);h.addAttrUpdateListener("outerHTML",b);h.addAttrUpdateListener("innerText",b);h.addAttrUpdateListener("outerText",b);h.addAttrUpdateListener("textContent",b);h.addAttrListener("setAttribute",d);h.addAttrListener("removeAttribute",d);h.addAttrUpdateListener("setAttribute",k);h.addAttrUpdateListener("removeAttribute",k);return h}var p={},A={},B={},y={},x={},w="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),u=Object.getOwnPropertyNames(document.documentElement.style),
q=Object.keys(HTMLElement.prototype).filter(function(a){return 0===a.indexOf("on")}).concat(["addEventListener","removeEventListener"]),E,v=function(a,c,b,d,e,f){b=new N(a,c,b,d,e,void 0,"set",f);void 0!==a.__kb&&(d=a.__kb._attrListeners,e=a.__kb._styleListeners,f=a.__kb._parentAttrListeners,a=a.__kb._parentStyleListeners,void 0!==d[c]&&t(d[c],b),void 0===b._stopPropogation&&void 0!==e[c]&&t(e[c],b),void 0===b._stopPropogation&&void 0!==d["*"]&&(t(d["*"],b),void 0===b._stopPropogation&&t(e["*"],b)),
void 0===b._stopPropogation&&void 0!==f[c]&&z(f[c],b),void 0===b._stopPropogation&&void 0!==a[c]&&z(a[c],b),void 0===b._stopPropogation&&void 0!==f["*"]&&(z(f["*"],b),void 0===b._stopPropogation&&z(a["*"],b)));void 0===b._stopPropogation&&void 0!==p[c]&&t(p[c],b);void 0===b._stopPropogation&&void 0!==B[c]&&t(B[c],b);void 0===b._stopPropogation&&void 0!==p["*"]&&(t(p["*"],b),void 0===b._stopPropogation&&t(B["*"],b));return void 0!==b._preventDefault?!1:!0},e=function(a,c,b,d,e,f){b=new N(a,c,b,d,e,
f,"update");void 0!==a.__kb&&(d=a.__kb._attrUpdateListeners,e=a.__kb._styleUpdateListeners,f=a.__kb._parentAttrUpdateListeners,a=a.__kb._parentStyleUpdateListeners,void 0!==d[c]&&t(d[c],b),void 0===b._stopPropogation&&void 0!==e[c]&&t(e[c],b),void 0===b._stopPropogation&&void 0!==d["*"]&&(t(d["*"],b),void 0===b._stopPropogation&&t(e["*"],b)),void 0===b._stopPropogation&&void 0!==f[c]&&z(f[c],b),void 0===b._stopPropogation&&void 0!==a[c]&&z(a[c],b),void 0===b._stopPropogation&&void 0!==f["*"]&&(z(f["*"],
b),void 0===b._stopPropogation&&z(a["*"],b)));void 0===b._stopPropogation&&void 0!==A[c]&&t(A[c],b);void 0===b._stopPropogation&&void 0!==y[c]&&t(y[c],b);void 0===b._stopPropogation&&void 0!==A["*"]&&(t(A["*"],b),void 0===b._stopPropogation&&t(y["*"],b));return void 0!==b._preventDefault?!1:!0};h.injectPrototypeProperty=function(a,c,b,d,k){var f=a.prototype,g=Object.getOwnPropertyDescriptor(f,c);b=b||a.toString().split(/\s+/)[1].split("{")[0].replace("()","");var m=x[b];d=d||v;k=k||e;void 0===f.attrListeners&&
(f={},f.attrListeners=function(){void 0===this.__kb&&(this.__kb=new O);return this.__kb}.bind(f),f.addAttrListener=h.addAttrListener,f.addAttrUpdateListener=h.addAttrUpdateListener,f.addChildAttrListener=Q,f.addChildAttrUpdateListener=P,f.hasListener=J,f.removeAttrListener=h.removeAttrListener,f.removeAttrUpdateListener=h.removeAttrUpdateListener,f.removeChildAttrListener=L,f.removeChildAttrUpdateListener=R,f.stopChange=M);void 0===m&&(x[b]={obj:a,proto:f,descriptors:{},set:void 0,update:void 0},
m=x[b],m.set=d,m.update=k);void 0===m.descriptors[c]&&(m.descriptors[c]=g);g.configurable&&(void 0!==g.set?Object.defineProperty(f,c,{get:g.get,set:S(g,c,d,k),enumerable:!0,configurable:!0}):"function"===typeof g.value?Object.defineProperty(f,c,{value:T(g,c,d,k),writable:!0,enumerable:!0,configurable:!0}):void 0!==g.value&&Object.defineProperty(f,c,{get:function(){return g.value},set:K(g,c,d,k),enumerable:!0,configurable:!0}));return h};h.injectStyleProperty=function(a,c,b,d){var k=a.style,f=Object.getOwnPropertyDescriptor(k,
c),g=a.attrListeners().injectedStyle;b=b||v;d=d||e;void 0===g&&(a.attrListeners().injectedStyle={obj:a,proto:k,descriptors:{},set:void 0,update:void 0},a.attrListeners().injectedStyle.set=b,a.attrListeners().injectedStyle.update=d,g=a.attrListeners().injectedStyle);void 0===g.descriptors[c]&&(g.descriptors[c]=f);f.configurable&&Object.defineProperty(k,c,U(f,c,b,d,a));return h};h.injectPrototypes=function(a,c,b,d){var k=a.prototype;c=c||a.toString().split(/\s+/)[1].split("{")[0].replace("()","");var f=
x[c],g=Object.getOwnPropertyNames(k);b=b||v;d=d||e;var m;void 0===k.attrListeners&&(k.attrListeners=function(){void 0===this.__kb&&(this.__kb=new O);return this.__kb},k.addAttrListener=h.addAttrListener,k.addAttrUpdateListener=h.addAttrUpdateListener,k.addChildAttrListener=Q,k.addChildAttrUpdateListener=P,k.removeAttrListener=h.removeAttrListener,k.removeAttrUpdateListener=h.removeAttrUpdateListener,k.removeChildAttrListener=L,k.removeChildAttrUpdateListener=R,k.hasListener=J,k.stopChange=M);void 0===
f&&(x[c]={obj:a,proto:k,descriptors:{},set:void 0,update:void 0},f=x[c],f.set=b,f.update=d);m=x[c].descriptors;for(d=0;d<g.length;d+=1)void 0===m[g[d]]&&h.injectPrototypeProperty(a,g[d],c,b,e);if(-1!==g.indexOf("value")){var n=function(a){var b,c,d;if("checkbox"===this.type||"radio"===this.type)b=!0;c=b?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){d=b?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;b&&(f.set(this,
"checked",this.checked,c)?f.update(this,"checked",this.checked,c):m.checked.set.call(this,c));this.value!==d&&(this.value=d);f.set(this,"value",this.value,c)?f.update(this,"value",this.value,c):m.value.set.call(this,c)}.bind(this),0)};k.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",n)};k.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",n)};k.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=
void 0;this.removeEventListener("mouseup",n)};k.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",n)}}return h};h.addAttrListener=function(a,c,b){if("html"===a){a=0;for(var d=w.length;a<d;a++)G.call(this,w[a],c,b,!1)}else if("events"===a)for(a=0,d=q.length;a<d;a++)G.call(this,q[a],c,b,!1);else G.call(this,a,c,b,!1);return this};h.addAttrUpdateListener=function(a,c,b){if("html"===a){a=0;for(var d=w.length;a<d;a++)G.call(this,w[a],c,b,!0)}else if("events"===
a)for(a=0,d=q.length;a<d;a++)G.call(this,q[a],c,b,!0);else G.call(this,a,c,b,!0);return this};h.removeAttrListener=function(a,c,b){if("html"===a){a=0;for(var d=w.length;a<d;a++)F.call(this,w[a],c,b,!1)}else if("events"===a)for(a=0,d=q.length;a<d;a++)F.call(this,q[a],c,b,!1);else F.call(this,a,c,b,!1);return this};h.removeAttrUpdateListener=function(a,c,b){if("html"===a){a=0;for(var d=w.length;a<d;a++)F.call(this,w[a],c,b,!0)}else if("events"===a)for(a=0,d=q.length;a<d;a++)F.call(this,q[a],c,b,!0);
else F.call(this,a,c,b,!0);return this};h.hasListener=function(a,c,b){"html"===c&&(c="innerHTML");"events"===c&&(c="onclick");switch(a){case "attr":if(I(p[c],b))return!0;break;case "attrupdate":if(I(A[c],b))return!0}return!1};h.injectedPrototypes=function(){return x};return h}"function"===typeof define&&define.amd&&define("KB",H);return H}());"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return H}):"undefined"!==typeof module&&
(module.exports=H);return H}();
