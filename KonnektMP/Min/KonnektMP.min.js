var KonnektMP=function(){var H=function(S){return function(){function p(e,a){this.name=e.tagName.toLowerCase();this.template=z[this.name]||'<div class="missing_component">Unknown Component</div>';this.node=e;this.fragment=document.createDocumentFragment();this.wrapper=document.createElement("div");this.wrapper.className="Wrapper Wrapper__"+this.name;a||(this.wrapper.innerHTML=this.template);this.fragment.appendChild(this.wrapper);a||(this.maps=this.map(this.wrapper));a||(this.wrapper.kb_maps=this.maps)}
function v(){return new RegExp("(\\"+u.split("").join("\\")+")(.*?)(\\"+t.split("").join("\\")+")","g")}function I(e,a,c,b,d,l,f,g){function r(b){var c="for"===a?h(b):[],d=this;this.key="for"!==a?J(b):c[0];this.filterNames=M(b);this.component="for"===a?c[1]:void 0;this.id=0;this.isEvent=m;this.isInput=n;this.__proto__.bindText=this.__proto__.bindText.map(function(a){return a===b?this:a});this.__proto__.bindMaps.push(this);Object.defineProperties(this,{value:{get:this.valget,set:this.valset,enumerable:!0,
configurable:!1},_value:k("",!0)});this.updateData=function(a){if(this.isConnected&&this._data){if("object"!==typeof a||void 0===a.value)a={value:a};"function"===typeof this._data.stopChange&&this._data.stopChange().set(d.key,a.value)}}.bind(this);this.updateDom=function(a){if(this.isSynced()){this.element.stopChange();if("object"!==typeof a||void 0===a.value)a={value:a};this.value=this._data[a.key]}}.bind(this);this.updateLoop=function(a){this.kb_loop&&this.loop(a,this.kb_loop)}.bind(this)}var m=
"attribute"===a&&-1!==x.indexOf(f.name)||"component"===a&&f.name&&-1!==x.indexOf(f.name),n="input"===g.tagName.toLowerCase();m&&g.stopChange().removeAttribute(f.name);Object.defineProperties(r.prototype,{valget:k(N),valset:k(O),refresh:k(T),connect:k(U),deleteMap:k(F),loop:k(G),unsync:k(P),unconnect:k(Q),isSynced:k(H),type:k(a),text:k(c,!0),bindText:k(b,!0),bindNames:k("for"===a?[h(b[0])[0]]:R(b),!0),bindMaps:k([],!0),bindListener:k(m?d.toLowerCase():d),bindProperty:k(m?f.name.toLowerCase():l),bindTarget:k(f,
!0),element:k(g,!0),_data:k({},!0),filters:k({},!0),maps:k(e,!0)});return r}function N(){return this._value}function O(e){this._value=this.isSynced()?e:this._value;this.refresh()}function H(){return this.element.parentElement?!!this.element.parentElement:this.unsync()}function K(e,a){function c(a,c){return c.reduce(function(c,d){return c+("string"===typeof d?d:0===d.filterNames.length?d._value:d.filterNames.reduce(function(c,d){if(void 0!==a.filters){if(void 0!==a.filters[d])return a.filters[d](c);
console.warn("there is no filter by the name %o in the data model filters %o",d,Object.keys(a.filters));return c}console.error("Somehow filters object was not added to the mapping via .connect() method, please see dev");return c},d._value))},"")}return 1===a.length?"string"===typeof a[0]._value?c(e,a):a[0]._value:c(e,a)}function T(){if("for"!==this.type)if(this.isEvent)this.element.stopChange()[this.bindProperty]=this.bindText[0]._value;else if("component"===this.type)this.element.k_post||(this.element.k_post=
{}),this.element.k_post["textContent"===this.bindProperty?"innerHTML":this.bindTarget.name]=K(this,this.bindText);else if("innerHTML"===this.key){this.bindTarget[this.bindProperty]="";for(var e=0,a=this._value.length;e<a;e++)this.element.stopChange().appendChild(this._value[e])}else this.bindTarget[this.bindProperty]=K(this,this.bindText),this.isInput&&(this.element.stopChange()[this.bindTarget.name]=K(this,this.bindText));return this}function U(e){this.__proto__._data=e;this.filters=void 0!==e.filters?
e.filters:this.filters;e=0;for(var a=this.bindNames.length;e<a;e++){var c=this.bindNames[e],b=this.bindMaps[e];b._data.addDataUpdateListener&&(b._data.exists(c)||(console.warn("No property by the name %o exists on this data set %o",c,b._data),b._data.add(c,b._value)),b.value=b._data.get(c),"component"!==b.type&&"for"!==b.type?(b.isConnected=!0,b._data.addDataUpdateListener(c,b.updateDom)):"for"===b.type&&b._value.addDataUpdateListener&&(b.element.stopChange().innerHTML="",b._value.addDataMethodUpdateListener(b.updateLoop).addDataDeleteListener(b.updateLoop)))}1!==
this.bindText.length||"text"!==this.type&&"attribute"!==this.type&&!this.isEvent||this.element.addAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);return this}function G(e,a){"function"===typeof e&&(this.kb_loop=e);for(var c=this._value,b=0,d=this.filterNames.length;b<d;b++)c=this.filters[this.filterNames[b]](c);if("function"===typeof e)for(c=0,b=this._value.length;c<b;c++)d=document.createElement(this.component),d.k_post=this._value[c],d.k_post.k_id=c,d.kb_wrapper=
this.element.kb_wrapper,this.element.stopChange().appendChild(d),e(d);else if("postset"===e.type&&"undefined"===typeof e.oldValue)d=document.createElement(this.component),c=this.element.children.length,d.k_post=this._value[e.key],d.kb_wrapper=this.element.kb_wrapper,parseInt(e.key)>=c?this.element.stopChange().appendChild(d):this.element.stopChange().insertBefore(d,this.element.children[e.key]),"function"===typeof a&&a(d);else if("delete"===e.event)this.element.stopChange().removeChild(this.element.children[e.key]);
else if("postpush"!==e.type)for(c=0,b=this.element.children.length;c<b;c++)for(var d=0,l=Object.keys(this._value[c]),f=l.length;d<f;d++)this.element.children[c].kb_viewmodel.addPointer(this._value[c],l[d]),this.element.children[c].kb_viewmodel.stopChange()[l[d]]=this._value[c][l[d]]}function F(){this.maps[this.key].splice(this.id,1);return this}function Q(e){e=0;for(var a=this.bindNames.length;e<a;e++)this._data.removeDataUpdateListener(this.bindNames[e],this.updateDom);return this}function P(){for(var e=
0,a=this.bindNames.length;e<a;e++)this._data.removeDataUpdateListener&&("for"===this.type?this._value.removeDataMethodUpdateListener("*",this.updateLoop).removeDataDeleteListener(this.updateLoop):"component"!==this.type&&this._data.removeDataUpdateListener(this.bindNames[e],this.updateDom));this.element.removeAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);this.maps[this.key].splice(this.id,1);e=0;for(a=this.maps[this.key].length;e<a;e++)this.maps[this.key][e].id=e;
this.bindMaps=this.maps=this.bindNames=this.filters=null;this.__proto__._data=null;this.__proto__.element=null;this.__proto__.filters=null;this.__proto__.bindTarget=null;this.__proto__.bindText=null;this.__proto__.bindNames=null;this.__proto__.element=null;this.__proto__.maps=null;this.__proto__.bindMaps=null;return this}function L(e){return e.split(new RegExp("("+u.split("").join("\\")+")(.*?)("+t.split("").join("\\")+")","g")).map(function(a,c,b){return b[c-1]===u?u+a+t:a}).filter(function(a,c,
b){return 0!==a.length&&a!==u&&a!==t&&0!==a.length})}function R(e){return e.filter(function(a){return-1!==a.indexOf(u)&&-1!==a.indexOf(t)}).map(function(a){return J(a)})}function J(e){return e.replace(new RegExp("["+u+t+"]","g"),"").replace(new RegExp("\\"+E.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function M(e){return-1!==e.indexOf(E)?e.replace(new RegExp("["+t+"]","g"),"").replace(new RegExp("(.*?)(\\"+E.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[]}function h(e){return-1!==
e.indexOf("for")?e.replace(new RegExp("["+u+t+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(a){return 0!==a.length}):[]}function k(e,a,c){return{value:e,writable:!!a,enumerable:!1,configurable:!!c}}function A(e,a){for(var c=y[e],b=0,d=c.length;b<d&&(c[b](a),a._stopPropogation);b++);return a._preventDefault}function B(e){var a=e.match(D).map(function(a){return a.replace(/[<\/>]/g,"")});a.filter(function(c,b){return document.createElement(c)instanceof HTMLUnknownElement&&
-1===a.indexOf(c,b+1)&&void 0===z[c]});0!==a.length&&A("unknown",new Event("unknown",a));return a}var z={},D=/(<\/.*?>)/g;S().call();var x=Object.keys(HTMLElement.prototype).filter(function(e){return 0===e.indexOf("on")}),u="{{",t="}}",E="|",y={unknown:[]};p.prototype.map=function(e){function a(b){b=Array.prototype.slice.call(b);for(var d=0,l=b.length;d<l;d++)if(void 0===b[d].kb_maps&&8!==b[d].nodeType){b[d].kb_mapper=e;if(3===b[d].nodeType){var f=b[d],g=c,r=f.textContent,m=f.parentElement instanceof
HTMLUnknownElement;if(r.match(v()))for(var n=m?"component":r.match(new RegExp("(\\"+u.split("").join("\\")+")(.*?)(for)(.*?)(loop)(.*?)(\\"+t.split("").join("\\")+")","g"))?"for":"text",f=I(g,n,r,L(r),m?"":"textContent","textContent",f,f.parentElement),r=0,m=f.prototype.bindText.length;r<m;r++){var n=r,q=f.prototype.bindText[r];0===q.indexOf(u)&&(q=new f(q),f.prototype.bindText[n]=q,void 0===g[q.key]&&(g[q.key]=[]),q.id=g[q.key].length,g[q.key].push(q))}}else for(g=b[d],f=c,r=Array.prototype.slice.call(g.attributes),
m=g instanceof HTMLUnknownElement,n=0,q=r.length;n<q;n++){var h=r[n];if(h.value.match(v()))for(var h=I(f,m?"component":"attribute",h.value,L(h.value),m?"":h.name,"value",h,g),k=0,V=h.prototype.bindText.length;k<V;k++){var p=k,w=h.prototype.bindText[k];0===w.indexOf(u)&&(w=new h(w),h.prototype.bindText[p]=w,void 0===f[w.key]&&(f[w.key]=[]),f[w.key].push(w),w.id=f[w.key].length-1)}}b[d].childNodes&&0!==b[d].childNodes.length&&a(b[d].childNodes)}}var c={};a(e.childNodes);return c};Object.defineProperties(p,
{start:k(function(e){if(void 0===e)return u;u="string"===typeof e?e:u;return this}),end:k(function(e){if(void 0===e)return t;t="string"===typeof e?e:t;return this}),pipe:k(function(e){if(void 0===e)return E;E="string"===typeof e?e:E;return this}),getUnknown:k(B),isRegistered:k(function(e){return void 0!==z[e]}),register:k(function(e,a){void 0===z[e]?(z[e]=a,B(a)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",e);return this}),addEventListener:k(function(e,
a){void 0!==y[e]?y[e].push(a):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",e);return this}),removeEventListener:k(function(e,a){if(void 0!==y[e])for(var c=0,b=y[e].length;c<b;c++)y[e][c].toString()===a.toString()&&y[e].splice(c,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",e);return this})});return p}}(function(){function H(){function p(a,c){var b=a.length,d;for(d=0;d<b&&(a[d](c),void 0===c._stopPropogation);d++);
}function v(a,c){var b=a.length,d;for(d=0;d<b&&(c.child=c.target,c.target=a[d].parent,a[d].func(c),void 0===c._stopPropogation);d++);}function I(a,c){for(var b=a.length;0<b;E++)if(a[E].toString()===c.toString())return!0;return!1}function N(a,c,b,d,e,f,g,r){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=b;this.oldValue=d;this.target=a;this.attr=c;this.arguments=e;this.action=f;this.child=void 0;this.type=g;this.stopChange=
r}function O(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function S(a,c,b,d){var e=a.get,f=a.set,g;return function(a){g=e.call(this);b(this,c,a,g,void 0,this._stopChange)&&f.call(this,a);this._stopChange||d(this,c,a,g);this._stopChange=void 0}}function K(a,c,b,d){var e;return function(f){e=
a.value;b(this,c,f,e,arguments,this._stopChange)&&(a.value=f);this._stopChange||d(this,c,f,e,arguments);this._stopChange=void 0}}function T(a,c,b,d){var e=a.value,f;return function(){b(this,c,null,null,arguments,this._stopChange)&&(f=e.apply(this,arguments));this._stopChange||d(this,c,null,null,arguments,f);this._stopChange=void 0;return f}}function U(a,c,b,d,e){var f=e.style,g=c.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),r,m;return{get:function(){return m},set:function(a){r=m;b(e,c,a,
r,void 0,this._stopChange)&&(m=a,f.setProperty(g,a));this._stopChange||d(e,c,a,r);this._stopChange=void 0},enumerable:!0,configurable:!0}}function G(a,c,b,d){if("function"!==typeof c)return h;var e=-1!==["value","checked"].indexOf(a),f=-1!==u.indexOf(a),g;if(this.toString()!==h.toString())if(b){var r=this.querySelectorAll("*");b=r.length;for(var m,n=0;n<b;n++){m=r[n].attrListeners();if(e||"*"===a)void 0!==r[n].addInputBinding&&r[n].addInputBinding(),void 0!==r[n].addInputBoxBinding&&r[n].addInputBoxBinding();
if(f)h.injectStyleProperty(r[n],a),g=d?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===a){g=d?"_parentStyleUpdateListeners":"_parentStyleListeners";b=u.length;for(var q=0;q<b;q++)h.injectStyleProperty(r[n],u[q]);void 0===m[g]["*"]&&(m[g]["*"]=[]);m[g]["*"].push({parent:this,func:c})}g=d?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===m[g][a]&&(m[g][a]=[]);m[g][a].push({parent:this,func:c})}}else{m=this.attrListeners();if(f)g=d?"_styleUpdateListeners":"_styleListeners",
h.injectStyleProperty(this,a);else{if(e||"*"===a)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===a){g=d?"_styleUpdateListeners":"_styleListeners";b=u.length;for(n=0;n<b;n++)h.injectStyleProperty(this,u[n]);void 0===m[g][a]&&(m[g][a]=[]);m[g][a].push(c)}g=d?"_attrUpdateListeners":"_attrListeners"}void 0===m[g][a]&&(m[g][a]=[]);m[g][a].push(c)}else{if(e||"*"===a)for(q=document.querySelectorAll("input, textarea"),b=q.length,n=
0;n<b;n++)void 0!==q[n].addInputBinding&&q[n].addInputBinding(),void 0!==q[n].addInputBoxBinding&&q[n].addInputBoxBinding();if(f){f=Array.prototype.slice.call(document.body.querySelectorAll("*"));b=f.length+1;f.unshift(document.body);for(n=0;n<b;n++)h.injectStyleProperty(f[n],a);g=d?z:B}else{if("*"===a){f=Array.prototype.slice.call(document.body.querySelectorAll("*"));b=f.length+1;e=u.length;f.unshift(document.body);for(n=0;n<b;n++)for(q=0;q<e;q++)h.injectStyleProperty(f[n],u[q]);g=d?z:B;void 0===
g[a]&&(g[a]=[]);g[a].push(c)}g=d?A:k}void 0===g[a]&&(g[a]=[]);g[a].push(c)}}function F(a,c,b,d){function e(a,b){var d=b[a],f=d.length;for(g=0;g<f;g++)d[g].toString()===c.toString()&&d.splice(g,1)}if("function"!==typeof c)return h;["value","checked"].indexOf(a);var f=-1!==u.indexOf(a),g;if(this.toString()!==h.toString())if(b){b=this.querySelectorAll("*");var r=b.length;f?(f=d?"_childStyleUpdateListeners":"_childStyleListeners",e(a,this.attrListeners()[f]),f=d?"_parentStyleUpdateListeners":"_parentStyleListeners"):
("*"===a&&(f=d?"_childStyleUpdateListeners":"_childStyleListeners",e(a,this.attrListeners()[f])),f=d?"_childAttrUpdateListeners":"_childAttrListeners",e(a,this.attrListeners()[f]),f=d?"_parentAttrUpdateListeners":"_parentAttrListeners");for(g=0;g<r;g++){for(var m=b[g].attrListeners()[f][a],n=m.length,q=0;q<n;q++)m[q].isEqualNode(this)&&m.slice(q,1);if("*"===a)for(listenersStyle=d?"_parentStyleUpdateListeners":"_parentStyleListeners",m=b[g].attrListeners()[f][a],n=m.length,q=0;q<n;q++)m[q].isEqualNode(this)&&
m.slice(q,1)}}else f?f=d?"_styleUpdateListeners":"_styleListeners":("*"===a&&(f=d?"_styleUpdateListeners":"_styleListeners",e(a,this.attrListeners()[f])),f=d?"_attrUpdateListeners":"_attrListeners"),e(a,this.attrListeners()[f]);else f?f=d?z:B:("*"===a&&(f=d?z:B,e(a,f)),f=d?A:k),e(a,f)}function Q(a,c){h.addAttrListener.call(this,a,c,!0);return this}function P(a,c){h.addAttrUpdateListener.call(this,a,c,!0);return this}function L(a,c){h.removeAttrListener.call(this,a,c,!0);return this}function R(a,c){h.removeAttrUpdateListener.call(this,
a,c,!0);return this}function J(a,c,b){var d=this.attrListeners();"html"===c&&(c="innerHTML");"events"===c&&(c="onclick");switch(a){case "attr":if(I(d._attrListeners[c],b))return!0;break;case "attrupdate":if(I(d._attrUpdateListeners[c],b))return!0}return!1}function M(){this._stopChange=!0;return this}function h(){function a(a,b){var c,d=b.length;for(c=0;c<d;c++)-1===a.indexOf(b[c])&&a.push(b[c]);return a}function c(a,b){for(var c=Object.keys(a),d,e,f=0,g=c.length;f<g;f++)if(d=c[f],void 0===b[d])b[d]=
a[d].slice();else for(var h=0,l=a[d].length;h<l;h++)e=a[d][h],b[d].push(e)}function b(b){if(3!==b.target.nodeType&&8!==b.target.nodeType){var d=b.target.attrListeners(),e,f=["value","checked"],g=d._attrListeners,l=d._attrUpdateListeners,p=d._parentAttrListeners;e=d._parentAttrUpdateListeners;var t=!1;if(void 0!==k["*"]||void 0!==A["*"])t=!0;if(!0!==t&&void 0!==g["*"]||void 0!==l["*"]||void 0!==p["*"]||void 0!==e["*"])t=!0;if(!0!==t)for(var w=0;w<f.length;w++)if(void 0!==k[f[w]]||void 0!==A[f[w]]||
void 0!==g[f[w]]||void 0!==l[f[w]]||void 0!==p[f[w]]||void 0!==e[f[w]]){t=!0;break}e=t;f=Object.keys(B);g=Object.keys(z);Object.keys(d._styleListeners);Object.keys(d._styleUpdateListeners);l=Object.keys(d._parentStyleListeners);d=Object.keys(d._parentStyleUpdateListeners);p=[];if(0!==f.length||0!==g.length)p=a(p,f),p=a(p,g);if(0!==p.length&&0!==l.length||0!==d.length)p=a(p,l),p=a(p,d);-1!==p.indexOf("*")&&(p=u);var d=p,f=d.length,y,v,g=[],x,l="outerHTML"===b.attr||"outerText"===b.attr?b.attr:void 0,
p=b.target;void 0!==l&&(b.attr="appendChild",b.arguments=[b.target],b.target=b.target.parentElement);if(e){"appendChild"===b.attr&&3!==b.arguments[0].nodeType&&8!==b.arguments[0].nodeType?(g=Array.prototype.slice.call(b.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==b.arguments[0].tagName&&"TEXTAREA"!==b.arguments[0].tagName||g.unshift(b.arguments[0])):g=Array.prototype.slice.call(b.target.querySelectorAll("input,textarea"));x=g.length;for(var C=0;C<x;C++)void 0!==g[C].addInputBinding&&
g[C].addInputBinding(),void 0!==g[C].addInputBoxBinding&&g[C].addInputBoxBinding()}"appendChild"===b.attr&&"#text"!==b.arguments[0].nodeName&&"#comment"!==b.arguments[0].nodeName?(g=Array.prototype.slice.call(b.arguments[0].querySelectorAll("*")),g.unshift(b.arguments[0])):g=Array.prototype.slice.call(b.target.querySelectorAll("*"));e=b.target.__kb._parentAttrListeners;t=b.target.__kb._parentAttrUpdateListeners;w=b.target.__kb._parentStyleListeners;y=b.target.__kb._parentStyleUpdateListeners;x=g.length;
for(C=0;C<x;C++){if(0!==f)for(v=0;v<f;v++)h.injectStyleProperty(g[C],d[v]);v=g[C].attrListeners();c(e,v._parentAttrListeners);c(t,v._parentAttrUpdateListeners);c(w,v._parentStyleListeners);c(y,v._parentStyleUpdateListeners)}void 0!==l&&(b.attr=l,b.target=p,b.arguments=[])}}function d(a){var b=a.target.attributes[a.arguments[0]],c="setAttribute"===a.attr?a.arguments[1]:"";f(a.target,a.arguments[0],c,void 0!==b?b.value:"",[c])||a.preventDefault()}function l(a){var b=a.target.attributes[a.arguments[0]],
c="setAttribute"===a.attr?a.arguments[1]:"";g(a.target,a.arguments[0],c,void 0!==b?b.value:"",[c])}h.injectPrototypes(Node,"Node");h.injectPrototypes(Element,"Element");h.injectPrototypes(HTMLElement,"HTMLElement");h.injectPrototypes(HTMLInputElement,"HTMLInputElement");h.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");h.injectPrototypes(Document,"Document");var f=y,g=e;h.addAttrUpdateListener("appendChild",b);h.addAttrUpdateListener("removeChild",b);h.addAttrUpdateListener("innerHTML",
b);h.addAttrUpdateListener("outerHTML",b);h.addAttrUpdateListener("innerText",b);h.addAttrUpdateListener("outerText",b);h.addAttrUpdateListener("textContent",b);h.addAttrListener("setAttribute",d);h.addAttrListener("removeAttribute",d);h.addAttrUpdateListener("setAttribute",l);h.addAttrUpdateListener("removeAttribute",l);return h}var k={},A={},B={},z={},D={},x="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),u=Object.getOwnPropertyNames(document.body.style),
t=Object.keys(HTMLElement.prototype).filter(function(a){return 0===a.indexOf("on")}).concat(["addEventListener","removeEventListener"]),E,y=function(a,c,b,d,e,f){b=new N(a,c,b,d,e,void 0,"set",f);void 0!==a.__kb&&(d=a.__kb._attrListeners,e=a.__kb._styleListeners,f=a.__kb._parentAttrListeners,a=a.__kb._parentStyleListeners,void 0!==d[c]&&p(d[c],b),void 0===b._stopPropogation&&void 0!==e[c]&&p(e[c],b),void 0===b._stopPropogation&&void 0!==d["*"]&&(p(d["*"],b),void 0===b._stopPropogation&&p(e["*"],b)),
void 0===b._stopPropogation&&void 0!==f[c]&&v(f[c],b),void 0===b._stopPropogation&&void 0!==a[c]&&v(a[c],b),void 0===b._stopPropogation&&void 0!==f["*"]&&(v(f["*"],b),void 0===b._stopPropogation&&v(a["*"],b)));void 0===b._stopPropogation&&void 0!==k[c]&&p(k[c],b);void 0===b._stopPropogation&&void 0!==B[c]&&p(B[c],b);void 0===b._stopPropogation&&void 0!==k["*"]&&(p(k["*"],b),void 0===b._stopPropogation&&p(B["*"],b));return void 0!==b._preventDefault?!1:!0},e=function(a,c,b,d,e,f){b=new N(a,c,b,d,e,
f,"update");void 0!==a.__kb&&(d=a.__kb._attrUpdateListeners,e=a.__kb._styleUpdateListeners,f=a.__kb._parentAttrUpdateListeners,a=a.__kb._parentStyleUpdateListeners,void 0!==d[c]&&p(d[c],b),void 0===b._stopPropogation&&void 0!==e[c]&&p(e[c],b),void 0===b._stopPropogation&&void 0!==d["*"]&&(p(d["*"],b),void 0===b._stopPropogation&&p(e["*"],b)),void 0===b._stopPropogation&&void 0!==f[c]&&v(f[c],b),void 0===b._stopPropogation&&void 0!==a[c]&&v(a[c],b),void 0===b._stopPropogation&&void 0!==f["*"]&&(v(f["*"],
b),void 0===b._stopPropogation&&v(a["*"],b)));void 0===b._stopPropogation&&void 0!==A[c]&&p(A[c],b);void 0===b._stopPropogation&&void 0!==z[c]&&p(z[c],b);void 0===b._stopPropogation&&void 0!==A["*"]&&(p(A["*"],b),void 0===b._stopPropogation&&p(z["*"],b));return void 0!==b._preventDefault?!1:!0};h.injectPrototypeProperty=function(a,c,b,d,l){var f=a.prototype,g=Object.getOwnPropertyDescriptor(f,c);b=b||a.toString().split(/\s+/)[1].split("{")[0].replace("()","");var k=D[b];d=d||y;l=l||e;void 0===f.attrListeners&&
(f={},f.attrListeners=function(){void 0===this.__kb&&(this.__kb=new O);return this.__kb}.bind(f),f.addAttrListener=h.addAttrListener,f.addAttrUpdateListener=h.addAttrUpdateListener,f.addChildAttrListener=Q,f.addChildAttrUpdateListener=P,f.hasListener=J,f.removeAttrListener=h.removeAttrListener,f.removeAttrUpdateListener=h.removeAttrUpdateListener,f.removeChildAttrListener=L,f.removeChildAttrUpdateListener=R,f.stopChange=M);void 0===k&&(D[b]={obj:a,proto:f,descriptors:{},set:void 0,update:void 0},
k=D[b],k.set=d,k.update=l);void 0===k.descriptors[c]&&(k.descriptors[c]=g);g.configurable&&(void 0!==g.set?Object.defineProperty(f,c,{get:g.get,set:S(g,c,d,l),enumerable:!0,configurable:!0}):"function"===typeof g.value?Object.defineProperty(f,c,{value:T(g,c,d,l),writable:!0,enumerable:!0,configurable:!0}):void 0!==g.value&&Object.defineProperty(f,c,{get:function(){return g.value},set:K(g,c,d,l),enumerable:!0,configurable:!0}));return h};h.injectStyleProperty=function(a,c,b,d){var l=a.style,f=Object.getOwnPropertyDescriptor(l,
c),g=a.attrListeners().injectedStyle;b=b||y;d=d||e;void 0===g&&(a.attrListeners().injectedStyle={obj:a,proto:l,descriptors:{},set:void 0,update:void 0},a.attrListeners().injectedStyle.set=b,a.attrListeners().injectedStyle.update=d,g=a.attrListeners().injectedStyle);void 0===g.descriptors[c]&&(g.descriptors[c]=f);f.configurable&&Object.defineProperty(l,c,U(f,c,b,d,a));return h};h.injectPrototypes=function(a,c,b,d){var l=a.prototype;c=c||a.toString().split(/\s+/)[1].split("{")[0].replace("()","");var f=
D[c],g=Object.getOwnPropertyNames(l);b=b||y;d=d||e;var k;void 0===l.attrListeners&&(l.attrListeners=function(){void 0===this.__kb&&(this.__kb=new O);return this.__kb},l.addAttrListener=h.addAttrListener,l.addAttrUpdateListener=h.addAttrUpdateListener,l.addChildAttrListener=Q,l.addChildAttrUpdateListener=P,l.removeAttrListener=h.removeAttrListener,l.removeAttrUpdateListener=h.removeAttrUpdateListener,l.removeChildAttrListener=L,l.removeChildAttrUpdateListener=R,l.hasListener=J,l.stopChange=M);void 0===
f&&(D[c]={obj:a,proto:l,descriptors:{},set:void 0,update:void 0},f=D[c],f.set=b,f.update=d);k=D[c].descriptors;for(d=0;d<g.length;d+=1)void 0===k[g[d]]&&h.injectPrototypeProperty(a,g[d],c,b,e);if(-1!==g.indexOf("value")){var m=function(a){var b,c,d;if("checkbox"===this.type||"radio"===this.type)b=!0;c=b?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){d=b?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;b&&(f.set(this,
"checked",this.checked,c)?f.update(this,"checked",this.checked,c):k.checked.set.call(this,c));this.value=d;f.set(this,"value",this.value,c)?f.update(this,"value",this.value,c):k.value.set.call(this,c)}.bind(this),0)};l.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",m)};l.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",m)};l.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=void 0;
this.removeEventListener("mouseup",m)};l.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",m)}}return h};h.addAttrListener=function(a,c,b){if("html"===a){a=0;for(var d=x.length;a<d;a++)G.call(this,x[a],c,b,!1)}else if("events"===a)for(a=0,d=t.length;a<d;a++)G.call(this,t[a],c,b,!1);else G.call(this,a,c,b,!1);return this};h.addAttrUpdateListener=function(a,c,b){if("html"===a){a=0;for(var d=x.length;a<d;a++)G.call(this,x[a],c,b,!0)}else if("events"===
a)for(a=0,d=t.length;a<d;a++)G.call(this,t[a],c,b,!0);else G.call(this,a,c,b,!0);return this};h.removeAttrListener=function(a,c,b){if("html"===a){a=0;for(var d=x.length;a<d;a++)F.call(this,x[a],c,b,!1)}else if("events"===a)for(a=0,d=t.length;a<d;a++)F.call(this,t[a],c,b,!1);else F.call(this,a,c,b,!1);return this};h.removeAttrUpdateListener=function(a,c,b){if("html"===a){a=0;for(var d=x.length;a<d;a++)F.call(this,x[a],c,b,!0)}else if("events"===a)for(a=0,d=t.length;a<d;a++)F.call(this,t[a],c,b,!0);
else F.call(this,a,c,b,!0);return this};h.hasListener=function(a,c,b){"html"===c&&(c="innerHTML");"events"===c&&(c="onclick");switch(a){case "attr":if(I(k[c],b))return!0;break;case "attrupdate":if(I(A[c],b))return!0}return!1};h.injectedPrototypes=function(){return D};return h}"function"===typeof define&&define.amd&&define("KB",H);return H}());"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return H}):"undefined"!==typeof module&&
(module.exports=H);return H}();
