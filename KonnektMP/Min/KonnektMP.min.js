var KonnektMP=function(){var H=function(S){return function(){function p(d,a){this.name=d.tagName.toLowerCase();this.template=z[this.name]||'<div class="missing_component">Unknown Component</div>';this.node=d;this.fragment=document.createDocumentFragment();this.wrapper=document.createElement("div");this.wrapper.className="Wrapper Wrapper__"+this.name;a||(this.wrapper.innerHTML=this.template);this.fragment.appendChild(this.wrapper);a||(this.maps=this.map(this.wrapper));a||(this.wrapper.kb_maps=this.maps)}
function v(){return new RegExp("(\\"+u.split("").join("\\")+")(.*?)(\\"+t.split("").join("\\")+")","g")}function I(d,a,c,b,g,l,e,f){function r(b){var c="for"===a?h(b):[],e=this;this.key="for"!==a?J(b):c[0];this.filterNames=M(b);this.component="for"===a?c[1]:void 0;this.id=0;this.isEvent=m;this.isInput=n;this.__proto__.bindText=this.__proto__.bindText.map(function(a){return a===b?this:a});this.__proto__.bindMaps.push(this);Object.defineProperties(this,{value:{get:this.valget,set:this.valset,enumerable:!0,
configurable:!1},_value:k("",!0)});this.updateData=function(a){if(this.isConnected&&this._data){if("object"!==typeof a||void 0===a.value)a={value:a};"function"===typeof this._data.stopChange&&this._data.stopChange().set(e.key,a.value)}}.bind(this);this.updateDom=function(a){if(this.isSynced()){this.element.stopChange();if("object"!==typeof a||void 0===a.value)a={value:a};this.value=a.value}}.bind(this);this.updateLoop=function(a){this.kb_loop&&this.loop(a,this.kb_loop)}.bind(this)}var m="attribute"===
a&&-1!==x.indexOf(e.name)||"component"===a&&e.name&&-1!==x.indexOf(e.name),n="input"===f.tagName.toLowerCase();m&&f.stopChange().removeAttribute(e.name);Object.defineProperties(r.prototype,{valget:k(N),valset:k(O),refresh:k(T),connect:k(U),deleteMap:k(F),loop:k(G),unsync:k(P),unconnect:k(Q),isSynced:k(H),type:k(a),text:k(c,!0),bindText:k(b,!0),bindNames:k("for"===a?[h(b[0])[0]]:R(b),!0),bindMaps:k([],!0),bindListener:k(m?g.toLowerCase():g),bindProperty:k(m?e.name.toLowerCase():l),bindTarget:k(e,!0),
element:k(f,!0),_data:k({},!0),filters:k({},!0),maps:k(d,!0)});return r}function N(){return this._value}function O(d){this._value=this.isSynced()?d:this._value;this.refresh()}function H(){return this.element.parentElement?!!this.element.parentElement:this.unsync()}function K(d,a){function c(a,c){return c.reduce(function(c,e){return c+("string"===typeof e?e:0===e.filterNames.length?e._value:e.filterNames.reduce(function(c,e){if(void 0!==a.filters){if(void 0!==a.filters[e])return a.filters[e](c);console.warn("there is no filter by the name %o in the data model filters %o",
e,Object.keys(a.filters));return c}console.error("Somehow filters object was not added to the mapping via .connect() method, please see dev");return c},e._value))},"")}return 1===a.length?"string"===typeof a[0]._value?c(d,a):a[0]._value:c(d,a)}function T(){if("for"!==this.type)if(this.isEvent)this.element.stopChange()[this.bindProperty]=this.bindText[0]._value;else if("component"===this.type)this.element.k_post||(this.element.k_post={}),this.element.k_post["textContent"===this.bindProperty?"innerHTML":
this.bindTarget.name]=K(this,this.bindText);else if("innerHTML"===this.key){this.bindTarget[this.bindProperty]="";for(var d=0,a=this._value.length;d<a;d++)this.element.stopChange().appendChild(this._value[d])}else this.bindTarget[this.bindProperty]=K(this,this.bindText),this.isInput&&(this.element.stopChange()[this.bindTarget.name]=K(this,this.bindText));return this}function U(d){this._data=d;this.filters=void 0!==d.filters?d.filters:this.filters;d=0;for(var a=this.bindNames.length;d<a;d++){var c=
this.bindNames[d],b=this.bindMaps[d];b._data.addDataUpdateListener&&(b._data.exists(c)||(console.warn("No property by the name %o exists on this data set %o",c,b._data),b._data.add(c,b._value)),b.value=b._data.get(c),"component"!==b.type&&"for"!==b.type?(b.isConnected=!0,b._data.addDataUpdateListener(c,b.updateDom)):"for"===b.type&&b._value.addDataUpdateListener&&(b.element.stopChange().innerHTML="",b._value.addDataMethodUpdateListener(b.updateLoop).addDataDeleteListener(b.updateLoop)))}1!==this.bindText.length||
"text"!==this.type&&"attribute"!==this.type&&!this.isEvent||this.element.addAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);return this}function G(d,a){"function"===typeof d&&(this.kb_loop=d);for(var c=this._value,b=0,g=this.filterNames.length;b<g;b++)c=this.filters[this.filterNames[b]](c);if("function"===typeof d)for(b=0,g=this._value.length;b<g;b++)c=document.createElement(this.component),c.k_post=this._value[b],c.k_post.k_id=b,c.kb_wrapper=this.element.kb_wrapper,
this.element.stopChange().appendChild(c),d(c);else if("postset"===d.type&&"undefined"===typeof d.oldValue)c=document.createElement(this.component),b=this.element.children.length,c.k_post=this._value[d.key],c.kb_wrapper=this.element.kb_wrapper,parseInt(d.key)>=b?this.element.stopChange().appendChild(c):this.element.stopChange().insertBefore(c,this.element.children[d.key]),"function"===typeof a&&a(c);else if("delete"===d.event)this.element.stopChange().removeChild(this.element.children[d.key]);else if("postpush"!==
d.type)for(this.element.stopChange().innerHTML="",b=0,g=this._value.length;b<g;b++)c=document.createElement(this.component),c.k_post=this._value[b],c.k_post.k_id=b,c.kb_wrapper=this.element.kb_wrapper,this.element.stopChange().appendChild(c),a&&a(c)}function F(){this.maps[this.key].splice(this.id,1);return this}function Q(d){d=0;for(var a=this.bindNames.length;d<a;d++)this._data.removeDataUpdateListener(this.bindNames[d],this.updateDom);return this}function P(){for(var d=0,a=this.bindNames.length;d<
a;d++)this._data.removeDataUpdateListener&&("for"===this.type?this._value.removeDataMethodUpdateListener("*",this.updateLoop).removeDataDeleteListener(this.updateLoop):"component"!==this.type&&this._data.removeDataUpdateListener(this.bindNames[d],this.updateDom));this.element.removeAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);this.maps[this.key].splice(this.id,1);d=0;for(a=this.maps[this.key].length;d<a;d++)this.maps[this.key][d].id=d;this.bindMaps=this.maps=this.bindNames=
this.filters=this._data=null;this.__proto__._data=null;this.__proto__.element=null;this.__proto__.filters=null;this.__proto__.bindTarget=null;this.__proto__.bindText=null;this.__proto__.bindNames=null;this.__proto__.element=null;this.__proto__.maps=null;this.__proto__.bindMaps=null;return this}function L(d){return d.split(new RegExp("("+u.split("").join("\\")+")(.*?)("+t.split("").join("\\")+")","g")).map(function(a,c,b){return b[c-1]===u?u+a+t:a}).filter(function(a,c,b){return 0!==a.length&&a!==
u&&a!==t&&0!==a.length})}function R(d){return d.filter(function(a){return-1!==a.indexOf(u)&&-1!==a.indexOf(t)}).map(function(a){return J(a)})}function J(d){return d.replace(new RegExp("["+u+t+"]","g"),"").replace(new RegExp("\\"+E.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function M(d){return-1!==d.indexOf(E)?d.replace(new RegExp("["+t+"]","g"),"").replace(new RegExp("(.*?)(\\"+E.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[]}function h(d){return-1!==d.indexOf("for")?d.replace(new RegExp("["+
u+t+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(a){return 0!==a.length}):[]}function k(d,a,c){return{value:d,writable:!!a,enumerable:!1,configurable:!!c}}function A(d,a){for(var c=y[d],b=0,g=c.length;b<g&&(c[b](a),a._stopPropogation);b++);return a._preventDefault}function B(d){var a=d.match(D).map(function(a){return a.replace(/[<\/>]/g,"")});a.filter(function(c,b){return document.createElement(c)instanceof HTMLUnknownElement&&-1===a.indexOf(c,b+1)&&void 0===
z[c]});0!==a.length&&A("unknown",new Event("unknown",a));return a}var z={},D=/(<\/.*?>)/g;S().call();var x=Object.keys(HTMLElement.prototype).filter(function(d){return 0===d.indexOf("on")}),u="{{",t="}}",E="|",y={unknown:[]};p.prototype.map=function(d){function a(b){b=Array.prototype.slice.call(b);for(var g=0,l=b.length;g<l;g++)if(void 0===b[g].kb_maps&&8!==b[g].nodeType){b[g].kb_mapper=d;if(3===b[g].nodeType){var e=b[g],f=c,r=e.textContent,m=e.parentElement instanceof HTMLUnknownElement;if(r.match(v()))for(var n=
m?"component":r.match(new RegExp("(\\"+u.split("").join("\\")+")(.*?)(for)(.*?)(loop)(.*?)(\\"+t.split("").join("\\")+")","g"))?"for":"text",e=I(f,n,r,L(r),m?"":"textContent","textContent",e,e.parentElement),r=0,m=e.prototype.bindText.length;r<m;r++){var n=r,q=e.prototype.bindText[r];0===q.indexOf(u)&&(q=new e(q),e.prototype.bindText[n]=q,void 0===f[q.key]&&(f[q.key]=[]),q.id=f[q.key].length,f[q.key].push(q))}}else for(f=b[g],e=c,r=Array.prototype.slice.call(f.attributes),m=f instanceof HTMLUnknownElement,
n=0,q=r.length;n<q;n++){var h=r[n];if(h.value.match(v()))for(var h=I(e,m?"component":"attribute",h.value,L(h.value),m?"":h.name,"value",h,f),k=0,V=h.prototype.bindText.length;k<V;k++){var p=k,w=h.prototype.bindText[k];0===w.indexOf(u)&&(w=new h(w),h.prototype.bindText[p]=w,void 0===e[w.key]&&(e[w.key]=[]),e[w.key].push(w),w.id=e[w.key].length-1)}}b[g].childNodes&&0!==b[g].childNodes.length&&a(b[g].childNodes)}}var c={};a(d.childNodes);return c};Object.defineProperties(p,{start:k(function(d){if(void 0===
d)return u;u="string"===typeof d?d:u;return this}),end:k(function(d){if(void 0===d)return t;t="string"===typeof d?d:t;return this}),pipe:k(function(d){if(void 0===d)return E;E="string"===typeof d?d:E;return this}),getUnknown:k(B),isRegistered:k(function(d){return void 0!==z[d]}),register:k(function(d,a){void 0===z[d]?(z[d]=a,B(a)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",d);return this}),addEventListener:k(function(d,a){void 0!==y[d]?y[d].push(a):
console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",d);return this}),removeEventListener:k(function(d,a){if(void 0!==y[d])for(var c=0,b=y[d].length;c<b;c++)y[d][c].toString()===a.toString()&&y[d].splice(c,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",d);return this})});return p}}(function(){function H(){function p(a,c){var b=a.length,g;for(g=0;g<b&&(a[g](c),void 0===c._stopPropogation);g++);}function v(a,
c){var b=a.length,g;for(g=0;g<b&&(c.child=c.target,c.target=a[g].parent,a[g].func(c),void 0===c._stopPropogation);g++);}function I(a,c){for(var b=a.length;0<b;E++)if(a[E].toString()===c.toString())return!0;return!1}function N(a,c,b,g,d,e,f,r){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=b;this.oldValue=g;this.target=a;this.attr=c;this.arguments=d;this.action=e;this.child=void 0;this.type=f;this.stopChange=r}function O(){this._attrListeners=
{};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function S(a,c,b,g){var d=a.get,e=a.set,f;return function(a){f=d.call(this);b(this,c,a,f,void 0,this._stopChange)&&e.call(this,a);this._stopChange||g(this,c,a,f);this._stopChange=void 0}}function K(a,c,b,g){var d;return function(e){d=a.value;b(this,c,e,d,arguments,
this._stopChange)&&(a.value=e);this._stopChange||g(this,c,e,d,arguments);this._stopChange=void 0}}function T(a,c,b,g){var d=a.value,e;return function(){b(this,c,null,null,arguments,this._stopChange)&&(e=d.apply(this,arguments));this._stopChange||g(this,c,null,null,arguments,e);this._stopChange=void 0;return e}}function U(a,c,b,g,d){var e=d.style,f=c.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),r,m;return{get:function(){return m},set:function(a){r=m;b(d,c,a,r,void 0,this._stopChange)&&(m=
a,e.setProperty(f,a));this._stopChange||g(d,c,a,r);this._stopChange=void 0},enumerable:!0,configurable:!0}}function G(a,c,b,g){if("function"!==typeof c)return h;var d=-1!==["value","checked"].indexOf(a),e=-1!==u.indexOf(a),f;if(this.toString()!==h.toString())if(b){var r=this.querySelectorAll("*");b=r.length;for(var m,n=0;n<b;n++){m=r[n].attrListeners();if(d||"*"===a)void 0!==r[n].addInputBinding&&r[n].addInputBinding(),void 0!==r[n].addInputBoxBinding&&r[n].addInputBoxBinding();if(e)h.injectStyleProperty(r[n],
a),f=g?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===a){f=g?"_parentStyleUpdateListeners":"_parentStyleListeners";b=u.length;for(var q=0;q<b;q++)h.injectStyleProperty(r[n],u[q]);void 0===m[f]["*"]&&(m[f]["*"]=[]);m[f]["*"].push({parent:this,func:c})}f=g?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===m[f][a]&&(m[f][a]=[]);m[f][a].push({parent:this,func:c})}}else{m=this.attrListeners();if(e)f=g?"_styleUpdateListeners":"_styleListeners",h.injectStyleProperty(this,
a);else{if(d||"*"===a)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===a){f=g?"_styleUpdateListeners":"_styleListeners";b=u.length;for(n=0;n<b;n++)h.injectStyleProperty(this,u[n]);void 0===m[f][a]&&(m[f][a]=[]);m[f][a].push(c)}f=g?"_attrUpdateListeners":"_attrListeners"}void 0===m[f][a]&&(m[f][a]=[]);m[f][a].push(c)}else{if(d||"*"===a)for(q=document.querySelectorAll("input, textarea"),b=q.length,n=0;n<b;n++)void 0!==q[n].addInputBinding&&
q[n].addInputBinding(),void 0!==q[n].addInputBoxBinding&&q[n].addInputBoxBinding();if(e){e=Array.prototype.slice.call(document.body.querySelectorAll("*"));b=e.length+1;e.unshift(document.body);for(n=0;n<b;n++)h.injectStyleProperty(e[n],a);f=g?z:B}else{if("*"===a){e=Array.prototype.slice.call(document.body.querySelectorAll("*"));b=e.length+1;d=u.length;e.unshift(document.body);for(n=0;n<b;n++)for(q=0;q<d;q++)h.injectStyleProperty(e[n],u[q]);f=g?z:B;void 0===f[a]&&(f[a]=[]);f[a].push(c)}f=g?A:k}void 0===
f[a]&&(f[a]=[]);f[a].push(c)}}function F(a,c,b,d){function l(a,b){var d=b[a],e=d.length;for(f=0;f<e;f++)d[f].toString()===c.toString()&&d.splice(f,1)}if("function"!==typeof c)return h;["value","checked"].indexOf(a);var e=-1!==u.indexOf(a),f;if(this.toString()!==h.toString())if(b){b=this.querySelectorAll("*");var r=b.length;e?(e=d?"_childStyleUpdateListeners":"_childStyleListeners",l(a,this.attrListeners()[e]),e=d?"_parentStyleUpdateListeners":"_parentStyleListeners"):("*"===a&&(e=d?"_childStyleUpdateListeners":
"_childStyleListeners",l(a,this.attrListeners()[e])),e=d?"_childAttrUpdateListeners":"_childAttrListeners",l(a,this.attrListeners()[e]),e=d?"_parentAttrUpdateListeners":"_parentAttrListeners");for(f=0;f<r;f++){for(var m=b[f].attrListeners()[e][a],n=m.length,q=0;q<n;q++)m[q].isEqualNode(this)&&m.slice(q,1);if("*"===a)for(listenersStyle=d?"_parentStyleUpdateListeners":"_parentStyleListeners",m=b[f].attrListeners()[e][a],n=m.length,q=0;q<n;q++)m[q].isEqualNode(this)&&m.slice(q,1)}}else e?e=d?"_styleUpdateListeners":
"_styleListeners":("*"===a&&(e=d?"_styleUpdateListeners":"_styleListeners",l(a,this.attrListeners()[e])),e=d?"_attrUpdateListeners":"_attrListeners"),l(a,this.attrListeners()[e]);else e?e=d?z:B:("*"===a&&(e=d?z:B,l(a,e)),e=d?A:k),l(a,e)}function Q(a,c){h.addAttrListener.call(this,a,c,!0);return this}function P(a,c){h.addAttrUpdateListener.call(this,a,c,!0);return this}function L(a,c){h.removeAttrListener.call(this,a,c,!0);return this}function R(a,c){h.removeAttrUpdateListener.call(this,a,c,!0);return this}
function J(a,c,b){var d=this.attrListeners();"html"===c&&(c="innerHTML");"events"===c&&(c="onclick");switch(a){case "attr":if(I(d._attrListeners[c],b))return!0;break;case "attrupdate":if(I(d._attrUpdateListeners[c],b))return!0}return!1}function M(){this._stopChange=!0;return this}function h(){function a(a,b){var c,d=b.length;for(c=0;c<d;c++)-1===a.indexOf(b[c])&&a.push(b[c]);return a}function c(a,b){for(var c=Object.keys(a),d,e,g=0,f=c.length;g<f;g++)if(d=c[g],void 0===b[d])b[d]=a[d].slice();else for(var h=
0,l=a[d].length;h<l;h++)e=a[d][h],b[d].push(e)}function b(b){if(3!==b.target.nodeType&&8!==b.target.nodeType){var d=b.target.attrListeners(),e,g=["value","checked"],f=d._attrListeners,l=d._attrUpdateListeners,p=d._parentAttrListeners;e=d._parentAttrUpdateListeners;var t=!1;if(void 0!==k["*"]||void 0!==A["*"])t=!0;if(!0!==t&&void 0!==f["*"]||void 0!==l["*"]||void 0!==p["*"]||void 0!==e["*"])t=!0;if(!0!==t)for(var w=0;w<g.length;w++)if(void 0!==k[g[w]]||void 0!==A[g[w]]||void 0!==f[g[w]]||void 0!==
l[g[w]]||void 0!==p[g[w]]||void 0!==e[g[w]]){t=!0;break}e=t;g=Object.keys(B);f=Object.keys(z);Object.keys(d._styleListeners);Object.keys(d._styleUpdateListeners);l=Object.keys(d._parentStyleListeners);d=Object.keys(d._parentStyleUpdateListeners);p=[];if(0!==g.length||0!==f.length)p=a(p,g),p=a(p,f);if(0!==p.length&&0!==l.length||0!==d.length)p=a(p,l),p=a(p,d);-1!==p.indexOf("*")&&(p=u);var d=p,g=d.length,y,v,f=[],x,l="outerHTML"===b.attr||"outerText"===b.attr?b.attr:void 0,p=b.target;void 0!==l&&(b.attr=
"appendChild",b.arguments=[b.target],b.target=b.target.parentElement);if(e){"appendChild"===b.attr&&3!==b.arguments[0].nodeType&&8!==b.arguments[0].nodeType?(f=Array.prototype.slice.call(b.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==b.arguments[0].tagName&&"TEXTAREA"!==b.arguments[0].tagName||f.unshift(b.arguments[0])):f=Array.prototype.slice.call(b.target.querySelectorAll("input,textarea"));x=f.length;for(var C=0;C<x;C++)void 0!==f[C].addInputBinding&&f[C].addInputBinding(),void 0!==
f[C].addInputBoxBinding&&f[C].addInputBoxBinding()}"appendChild"===b.attr&&"#text"!==b.arguments[0].nodeName&&"#comment"!==b.arguments[0].nodeName?(f=Array.prototype.slice.call(b.arguments[0].querySelectorAll("*")),f.unshift(b.arguments[0])):f=Array.prototype.slice.call(b.target.querySelectorAll("*"));e=b.target.__kb._parentAttrListeners;t=b.target.__kb._parentAttrUpdateListeners;w=b.target.__kb._parentStyleListeners;y=b.target.__kb._parentStyleUpdateListeners;x=f.length;for(C=0;C<x;C++){if(0!==g)for(v=
0;v<g;v++)h.injectStyleProperty(f[C],d[v]);v=f[C].attrListeners();c(e,v._parentAttrListeners);c(t,v._parentAttrUpdateListeners);c(w,v._parentStyleListeners);c(y,v._parentStyleUpdateListeners)}void 0!==l&&(b.attr=l,b.target=p,b.arguments=[])}}function g(a){var b=a.target.attributes[a.arguments[0]],c="setAttribute"===a.attr?a.arguments[1]:"";e(a.target,a.arguments[0],c,void 0!==b?b.value:"",[c])||a.preventDefault()}function l(a){var b=a.target.attributes[a.arguments[0]],c="setAttribute"===a.attr?a.arguments[1]:
"";f(a.target,a.arguments[0],c,void 0!==b?b.value:"",[c])}h.injectPrototypes(Node,"Node");h.injectPrototypes(Element,"Element");h.injectPrototypes(HTMLElement,"HTMLElement");h.injectPrototypes(HTMLInputElement,"HTMLInputElement");h.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");h.injectPrototypes(Document,"Document");var e=y,f=d;h.addAttrUpdateListener("appendChild",b);h.addAttrUpdateListener("removeChild",b);h.addAttrUpdateListener("innerHTML",b);h.addAttrUpdateListener("outerHTML",
b);h.addAttrUpdateListener("innerText",b);h.addAttrUpdateListener("outerText",b);h.addAttrUpdateListener("textContent",b);h.addAttrListener("setAttribute",g);h.addAttrListener("removeAttribute",g);h.addAttrUpdateListener("setAttribute",l);h.addAttrUpdateListener("removeAttribute",l);return h}var k={},A={},B={},z={},D={},x="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),u=Object.getOwnPropertyNames(document.documentElement.style),
t=Object.keys(HTMLElement.prototype).filter(function(a){return 0===a.indexOf("on")}).concat(["addEventListener","removeEventListener"]),E,y=function(a,c,b,d,h,e){b=new N(a,c,b,d,h,void 0,"set",e);void 0!==a.__kb&&(d=a.__kb._attrListeners,h=a.__kb._styleListeners,e=a.__kb._parentAttrListeners,a=a.__kb._parentStyleListeners,void 0!==d[c]&&p(d[c],b),void 0===b._stopPropogation&&void 0!==h[c]&&p(h[c],b),void 0===b._stopPropogation&&void 0!==d["*"]&&(p(d["*"],b),void 0===b._stopPropogation&&p(h["*"],b)),
void 0===b._stopPropogation&&void 0!==e[c]&&v(e[c],b),void 0===b._stopPropogation&&void 0!==a[c]&&v(a[c],b),void 0===b._stopPropogation&&void 0!==e["*"]&&(v(e["*"],b),void 0===b._stopPropogation&&v(a["*"],b)));void 0===b._stopPropogation&&void 0!==k[c]&&p(k[c],b);void 0===b._stopPropogation&&void 0!==B[c]&&p(B[c],b);void 0===b._stopPropogation&&void 0!==k["*"]&&(p(k["*"],b),void 0===b._stopPropogation&&p(B["*"],b));return void 0!==b._preventDefault?!1:!0},d=function(a,c,b,d,h,e){b=new N(a,c,b,d,h,
e,"update");void 0!==a.__kb&&(d=a.__kb._attrUpdateListeners,h=a.__kb._styleUpdateListeners,e=a.__kb._parentAttrUpdateListeners,a=a.__kb._parentStyleUpdateListeners,void 0!==d[c]&&p(d[c],b),void 0===b._stopPropogation&&void 0!==h[c]&&p(h[c],b),void 0===b._stopPropogation&&void 0!==d["*"]&&(p(d["*"],b),void 0===b._stopPropogation&&p(h["*"],b)),void 0===b._stopPropogation&&void 0!==e[c]&&v(e[c],b),void 0===b._stopPropogation&&void 0!==a[c]&&v(a[c],b),void 0===b._stopPropogation&&void 0!==e["*"]&&(v(e["*"],
b),void 0===b._stopPropogation&&v(a["*"],b)));void 0===b._stopPropogation&&void 0!==A[c]&&p(A[c],b);void 0===b._stopPropogation&&void 0!==z[c]&&p(z[c],b);void 0===b._stopPropogation&&void 0!==A["*"]&&(p(A["*"],b),void 0===b._stopPropogation&&p(z["*"],b));return void 0!==b._preventDefault?!1:!0};h.injectPrototypeProperty=function(a,c,b,g,l){var e=a.prototype,f=Object.getOwnPropertyDescriptor(e,c);b=b||a.toString().split(/\s+/)[1].split("{")[0].replace("()","");var k=D[b];g=g||y;l=l||d;void 0===e.attrListeners&&
(e={},e.attrListeners=function(){void 0===this.__kb&&(this.__kb=new O);return this.__kb}.bind(e),e.addAttrListener=h.addAttrListener,e.addAttrUpdateListener=h.addAttrUpdateListener,e.addChildAttrListener=Q,e.addChildAttrUpdateListener=P,e.hasListener=J,e.removeAttrListener=h.removeAttrListener,e.removeAttrUpdateListener=h.removeAttrUpdateListener,e.removeChildAttrListener=L,e.removeChildAttrUpdateListener=R,e.stopChange=M);void 0===k&&(D[b]={obj:a,proto:e,descriptors:{},set:void 0,update:void 0},
k=D[b],k.set=g,k.update=l);void 0===k.descriptors[c]&&(k.descriptors[c]=f);f.configurable&&(void 0!==f.set?Object.defineProperty(e,c,{get:f.get,set:S(f,c,g,l),enumerable:!0,configurable:!0}):"function"===typeof f.value?Object.defineProperty(e,c,{value:T(f,c,g,l),writable:!0,enumerable:!0,configurable:!0}):void 0!==f.value&&Object.defineProperty(e,c,{get:function(){return f.value},set:K(f,c,g,l),enumerable:!0,configurable:!0}));return h};h.injectStyleProperty=function(a,c,b,g){var l=a.style,e=Object.getOwnPropertyDescriptor(l,
c),f=a.attrListeners().injectedStyle;b=b||y;g=g||d;void 0===f&&(a.attrListeners().injectedStyle={obj:a,proto:l,descriptors:{},set:void 0,update:void 0},a.attrListeners().injectedStyle.set=b,a.attrListeners().injectedStyle.update=g,f=a.attrListeners().injectedStyle);void 0===f.descriptors[c]&&(f.descriptors[c]=e);e.configurable&&Object.defineProperty(l,c,U(e,c,b,g,a));return h};h.injectPrototypes=function(a,c,b,g){var l=a.prototype;c=c||a.toString().split(/\s+/)[1].split("{")[0].replace("()","");var e=
D[c],f=Object.getOwnPropertyNames(l);b=b||y;g=g||d;var k;void 0===l.attrListeners&&(l.attrListeners=function(){void 0===this.__kb&&(this.__kb=new O);return this.__kb},l.addAttrListener=h.addAttrListener,l.addAttrUpdateListener=h.addAttrUpdateListener,l.addChildAttrListener=Q,l.addChildAttrUpdateListener=P,l.removeAttrListener=h.removeAttrListener,l.removeAttrUpdateListener=h.removeAttrUpdateListener,l.removeChildAttrListener=L,l.removeChildAttrUpdateListener=R,l.hasListener=J,l.stopChange=M);void 0===
e&&(D[c]={obj:a,proto:l,descriptors:{},set:void 0,update:void 0},e=D[c],e.set=b,e.update=g);k=D[c].descriptors;for(g=0;g<f.length;g+=1)void 0===k[f[g]]&&h.injectPrototypeProperty(a,f[g],c,b,d);if(-1!==f.indexOf("value")){var m=function(a){var b,c,d;if("checkbox"===this.type||"radio"===this.type)b=!0;c=b?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){d=b?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;b&&(e.set(this,
"checked",this.checked,c)?e.update(this,"checked",this.checked,c):k.checked.set.call(this,c));this.value=d;e.set(this,"value",this.value,c)?e.update(this,"value",this.value,c):k.value.set.call(this,c)}.bind(this),0)};l.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",m)};l.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",m)};l.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=void 0;
this.removeEventListener("mouseup",m)};l.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",m)}}return h};h.addAttrListener=function(a,c,b){if("html"===a){a=0;for(var d=x.length;a<d;a++)G.call(this,x[a],c,b,!1)}else if("events"===a)for(a=0,d=t.length;a<d;a++)G.call(this,t[a],c,b,!1);else G.call(this,a,c,b,!1);return this};h.addAttrUpdateListener=function(a,c,b){if("html"===a){a=0;for(var d=x.length;a<d;a++)G.call(this,x[a],c,b,!0)}else if("events"===
a)for(a=0,d=t.length;a<d;a++)G.call(this,t[a],c,b,!0);else G.call(this,a,c,b,!0);return this};h.removeAttrListener=function(a,c,b){if("html"===a){a=0;for(var d=x.length;a<d;a++)F.call(this,x[a],c,b,!1)}else if("events"===a)for(a=0,d=t.length;a<d;a++)F.call(this,t[a],c,b,!1);else F.call(this,a,c,b,!1);return this};h.removeAttrUpdateListener=function(a,c,b){if("html"===a){a=0;for(var d=x.length;a<d;a++)F.call(this,x[a],c,b,!0)}else if("events"===a)for(a=0,d=t.length;a<d;a++)F.call(this,t[a],c,b,!0);
else F.call(this,a,c,b,!0);return this};h.hasListener=function(a,c,b){"html"===c&&(c="innerHTML");"events"===c&&(c="onclick");switch(a){case "attr":if(I(k[c],b))return!0;break;case "attrupdate":if(I(A[c],b))return!0}return!1};h.injectedPrototypes=function(){return D};return h}"function"===typeof define&&define.amd&&define("KB",H);return H}());"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return H}):"undefined"!==typeof module&&
(module.exports=H);return H}();
