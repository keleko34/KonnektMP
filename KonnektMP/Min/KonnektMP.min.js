var KonnektMP=function(){var H=function(T){return function(){function t(b){this.name=b.tagName.toLowerCase();this.template=z[this.name]||'<div class="missing_component">Unknown Component</div>';this.node=b;this.fragment=document.createDocumentFragment();this.wrapper=document.createElement("div");this.wrapper.className="Wrapper Wrapper__"+this.name;this.wrapper.innerHTML=this.template;this.fragment.appendChild(this.wrapper);this.maps=this.map(this.wrapper);this.wrapper.kb_maps=this.maps}function x(b,
m,f,a,g,c,e,k){function d(a){var g="for"===m?J(a):[],c=this;this.key="for"!==m?K(a):g[0];this.filterNames=N(a);this.component="for"===m?g[1]:void 0;this.id=0;this.isEvent=h;this.__proto__.bindText=this.__proto__.bindText.map(function(g){return g===a?this:g});Object.defineProperties(this,{value:{get:this.valget,set:this.valset,enumerable:!0,configurable:!1},_value:l("",!0)});this.__proto__.updateData=function(a){if(c.isConnected&&c._data){if("object"!==typeof a||void 0===a.value)a={value:a};"function"===
typeof c._data.stopChange&&c._data.stopChange().set(c.key,a.value)}};this.__proto__.updateDom=function(a){if(c.isSynced()){c.element.stopChange();if("object"!==typeof a||void 0===a.value)a={value:a};c.value=a.value}};this.__proto__.updateLoop=function(){c.kb_loop&&c.loop(c.kb_loop)}}var h="attribute"===m&&-1!==B.indexOf(e.name)||"component"===m&&e.name&&-1!==B.indexOf(e.name);h&&k.stopChange().removeAttribute(e.name);Object.defineProperties(d.prototype,{valget:l(I),valset:l(O),refresh:l(H),connect:l(U),
deleteMap:l(F),loop:l(P),unsync:l(G),isSynced:l(Q),type:l(m),text:l(f,!0),bindText:l(a,!0),bindNames:l("for"===m?[J(a[0])[0]]:R(a),!0),bindListener:l(h?g.toLowerCase():g),bindProperty:l(h?e.name.toLowerCase():c),bindTarget:l(e,!0),element:l(k,!0),_data:l({},!0),filters:l({},!0),maps:l(b,!0),loop:l(P)});return d}function I(){return this._value}function O(b){this._value=this.isSynced()?b:this._value;this.refresh()}function Q(){return this.element.parentElement?!!this.element.parentElement:this.unsync()}
function S(b,m){function f(a,g){return g.reduce(function(g,e){return g+("string"===typeof e?e:0===e.filterNames.length?e._value:e.filterNames.reduce(function(g,c){if(void 0!==a.filters){if(void 0!==a.filters[c])return a.filters[c](g);console.warn("there is no filter by the name %o in the data model filters %o",c,Object.keys(a.filters));return g}console.error("Somehow filters object was not added to the mapping via .connect() method, please see dev");return g},e._value))},"")}return 1===m.length?"string"===
typeof m[0]._value?f(b,m):m[0]._value:f(b,m)}function H(){"for"!==this.type&&(this.isEvent?this.element[this.bindProperty]=this.bindText[0]._value:"component"===this.type?(this.element.k_post||(this.element.k_post={}),this.element.k_post["textContent"===this.bindProperty?"innerHTML":this.bindTarget.name]=S(this,this.bindText)):this.bindTarget[this.bindProperty]=S(this,this.bindText));return this}function U(b){this._data=b;this.filters=void 0!==b.filters?b.filters:this.filters;b=0;for(var m=this.bindNames.length;b<
m;b++)this._data.addDataUpdateListener&&(this._data.exists(this.bindNames[b])||(console.warn("No property by the name %o exists on this data set %o",this.bindNames[b],this._data),this._data.add(this.bindNames[b],this._value)),this.value=this._data.get(this.bindNames[b]),"component"!==this.type&&(this.isConnected=!0,this._data.removeDataUpdateListener(this.bindNames[b],this.updateDom).addDataUpdateListener(this.bindNames[b],this.updateDom),"for"===this.type&&this._value.addActionListener&&this._value.removeDataUpdateListener("*",
this.updateLoop).addDataUpdateListener("*",this.updateLoop).removeDataCreateListener(this.updateLoop).addDataCreateListener(this.updateLoop).removeDataDeleteListener(this.updateLoop).addDataDeleteListener(this.updateLoop)));1!==this.bindText.length||"text"!==this.type&&"attribute"!==this.type&&!this.isEvent||this.element.addAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);return this}function P(b){this.kb_loop=b;this.element.stopChange().innerHTML="";for(var m=this._value,
f=0,a=this.filterNames.length;f<a;f++)m=this.filters[this.filterNames[f]](m);m=0;for(f=this._value.length;m<f;m++)a=document.createElement(this.component),a.k_post=this._value[m],a.kb_wrapper=this.element.kb_wrapper,this.element.stopChange().appendChild(a),"function"===typeof b&&b(a)}function F(){this.maps[this.key].splice(this.id,1);return this}function G(){for(var b=0,m=this.bindNames.length;b<m;b++)this._data.removeDataUpdateListener&&(this._data.removeDataUpdateListener(this.bindNames[b],this.updateDom),
this._value.removeDataUpdateListener("*",this.updateLoop).removeDataCreateListener(this.updateLoop).removeDataDeleteListener(this.updateLoop));this.element.removeAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);this.maps=this.bindNames=this.filters=this._data=null;this.__proto__._data=null;this.__proto__.element=null;this.__proto__.filters=null;this.__proto__.bindTarget=null;this.__proto__.bindText=null;this.__proto__.bindNames=null;this.__proto__.element=null;this.__proto__.maps=
null;return!1}function L(b){return b.split(new RegExp("("+q.split("").join("\\")+")(.*?)("+w.split("").join("\\")+")","g")).map(function(b,f,a){return a[f-1]===q?q+b+w:b}).filter(function(b,f,a){return 0!==b.length&&b!==q&&b!==w&&0!==b.length})}function R(b){return b.filter(function(b){return-1!==b.indexOf(q)&&-1!==b.indexOf(w)}).map(function(b){return K(b)})}function K(b){return b.replace(new RegExp("["+q+w+"]","g"),"").replace(new RegExp("\\"+y.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}
function N(b){return-1!==b.indexOf(y)?b.replace(new RegExp("["+w+"]","g"),"").replace(new RegExp("(.*?)(\\"+y.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[]}function J(b){return-1!==b.indexOf("for")?b.replace(new RegExp("["+q+w+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(b){return 0!==b.length}):[]}function l(b,f,D){return{value:b,writable:!!f,enumerable:!1,configurable:!!D}}function f(b,f){for(var D=v[b],a=0,g=D.length;a<g&&(D[a](f),f._stopPropogation);a++);
return f._preventDefault}function A(b){var m=b.match(E).map(function(b){return b.replace(/[<\/>]/g,"")});m.filter(function(b,a){return document.createElement(b)instanceof HTMLUnknownElement&&-1===m.indexOf(b,a+1)&&void 0===z[b]});0!==m.length&&f("unknown",new Event("unknown",m));return m}var z={},E=/(<\/.*?>)/g;T().call();var B=Object.keys(HTMLElement.prototype).filter(function(b){return 0===b.indexOf("on")}),q="{{",w="}}",y="|",v={unknown:[]};t.prototype.map=function(b){function f(a){for(var g=0,
c=a.length;g<c;g++)if(void 0===a[g].kb_maps&&8!==a[g].nodeType){a[g].kb_mapper=b;if(3===a[g].nodeType){var e=a[g],k=l,d=e.textContent,h=e.parentElement instanceof HTMLUnknownElement;if(d.match(new RegExp("(\\"+q.split("").join("\\")+")(.*?)(\\"+w.split("").join("\\")+")","g")))for(var n=h?"component":-1!==d.indexOf("for")&&void 0!==d.indexOf("loop")?"for":"text",e=x(k,n,d,L(d),h?"":"textContent","textContent",e,e.parentElement),d=0,h=e.prototype.bindText.length;d<h;d++)0===e.prototype.bindText[d].indexOf(q)&&
(n=new e(e.prototype.bindText[d]),e.prototype.bindText[d]=n,void 0===k[n.key]&&(k[n.key]=[]),n.id=k[n.key].length,k[n.key].push(n))}else for(var k=a[g],e=l,d=k.attributes,h=k instanceof HTMLUnknownElement,n=0,r=d.length;n<r;n++)if(d[n].value.match(new RegExp("(\\"+q.split("").join("\\")+")(.*?)(\\"+w.split("").join("\\")+")","g")))for(var p=x(e,h?"component":"attribute",d[n].value,L(d[n].value),h?"":d[n].name,"value",d[n],k),u=0,V=p.prototype.bindText.length;u<V;u++)if(0===p.prototype.bindText[u].indexOf(q)){var M=
new p(p.prototype.bindText[u]);p.prototype.bindText[u]=M;void 0===e[M.key]&&(e[M.key]=[]);e[M.key].push(M)}a[g].childNodes&&0!==a[g].childNodes.length&&f(a[g].childNodes)}}var l={};f(b.childNodes);return l};t.prototype.addFilter=function(b,f){void 0!==this.maps[b]&&this.maps[b].forEach(function(b){b.filters.push(f);b.refresh()});return this};t.prototype.removeFilter=function(b,f){void 0!==this.maps[b]&&this.maps[b].forEach(function(l){l.filters.splice(this.maps[b].filters.indexOf(f),1);l.refresh()});
return this};t.prototype.swapFilter=function(b,f,l){void 0!==this.maps[b]&&this.maps[b].forEach(function(a){a.filters.splice(this.maps[b].filters.indexOf(f),1,l);a.refresh()});return this};Object.defineProperties(t,{startChars:l(function(b){if(void 0===b)return q;q="string"===typeof b?b:q;return this}),endChars:l(function(b){if(void 0===b)return w;w="string"===typeof b?b:w;return this}),pipeChars:l(function(b){if(void 0===b)return y;y="string"===typeof b?b:y;return this}),getUnknown:l(A),isRegistered:l(function(b){return void 0!==
z[b]}),register:l(function(b,f){void 0===z[b]?(z[b]=f,A(f)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",b);return this}),addEventListener:l(function(b,f){void 0!==v[b]?v[b].push(f):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",b);return this}),removeEventListener:l(function(b,f){if(void 0!==v[b])for(var l=0,a=v[b].length;l<a;l++)v[b][l].toString()===f.toString()&&v[b].splice(l,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",
b);return this})});return t}}(function(){function H(){function t(a,g){var c=a.length,e;for(e=0;e<c&&(a[e](g),void 0===g._stopPropogation);e++);}function x(a,g){var c=a.length,e;for(e=0;e<c&&(g.child=g.target,g.target=a[e].parent,a[e].func(g),void 0===g._stopPropogation);e++);}function I(a,g){for(var c=a.length;0<c;b++)if(a[b].toString()===g.toString())return!0;return!1}function O(a,g,c,e,b,d,f,n){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=
!0};this.value=c;this.oldValue=e;this.target=a;this.attr=g;this.arguments=b;this.action=d;this.child=void 0;this.type=f;this.stopChange=n}function Q(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function S(a,g,c,e){var b=a.get,d=a.set,f;return function(a){f=b.call(this);c(this,g,a,f,void 0,
this._stopChange)&&d.call(this,a);this._stopChange||e(this,g,a,f);this._stopChange=void 0}}function T(a,g,c,e){var b;return function(d){b=a.value;c(this,g,d,b,arguments,this._stopChange)&&(a.value=d);this._stopChange||e(this,g,d,b,arguments);this._stopChange=void 0}}function U(a,g,c,e){var b=a.value,d;return function(){c(this,g,null,null,arguments,this._stopChange)&&(d=b.apply(this,arguments));this._stopChange||e(this,g,null,null,arguments,d);this._stopChange=void 0;return d}}function P(a,g,c,e,b){var d=
b.style,f=g.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),n,r;return{get:function(){return r},set:function(a){n=r;c(b,g,a,n,void 0,this._stopChange)&&(r=a,d.setProperty(f,a));this._stopChange||e(b,g,a,n);this._stopChange=void 0},enumerable:!0,configurable:!0}}function F(a,g,c,b){if("function"!==typeof g)return f;var k=-1!==["value","checked"].indexOf(a),d=-1!==y.indexOf(a),h;if(this.toString()!==f.toString())if(c){var n=this.querySelectorAll("*");c=n.length;for(var r,p=0;p<c;p++){r=n[p].attrListeners();
if(k||"*"===a)void 0!==n[p].addInputBinding&&n[p].addInputBinding(),void 0!==n[p].addInputBoxBinding&&n[p].addInputBoxBinding();if(d)f.injectStyleProperty(n[p],a),h=b?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===a){h=b?"_parentStyleUpdateListeners":"_parentStyleListeners";c=y.length;for(var u=0;u<c;u++)f.injectStyleProperty(n[p],y[u]);void 0===r[h]["*"]&&(r[h]["*"]=[]);r[h]["*"].push({parent:this,func:g})}h=b?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===r[h][a]&&
(r[h][a]=[]);r[h][a].push({parent:this,func:g})}}else{r=this.attrListeners();if(d)h=b?"_styleUpdateListeners":"_styleListeners",f.injectStyleProperty(this,a);else{if(k||"*"===a)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===a){h=b?"_styleUpdateListeners":"_styleListeners";c=y.length;for(p=0;p<c;p++)f.injectStyleProperty(this,y[p]);void 0===r[h][a]&&(r[h][a]=[]);r[h][a].push(g)}h=b?"_attrUpdateListeners":"_attrListeners"}void 0===
r[h][a]&&(r[h][a]=[]);r[h][a].push(g)}else{if(k||"*"===a)for(u=document.querySelectorAll("input, textarea"),c=u.length,p=0;p<c;p++)void 0!==u[p].addInputBinding&&u[p].addInputBinding(),void 0!==u[p].addInputBoxBinding&&u[p].addInputBoxBinding();if(d){d=Array.prototype.slice.call(document.body.querySelectorAll("*"));c=d.length+1;d.unshift(document.body);for(p=0;p<c;p++)f.injectStyleProperty(d[p],a);h=b?B:E}else{if("*"===a){d=Array.prototype.slice.call(document.body.querySelectorAll("*"));c=d.length+
1;k=y.length;d.unshift(document.body);for(p=0;p<c;p++)for(u=0;u<k;u++)f.injectStyleProperty(d[p],y[u]);h=b?B:E;void 0===h[a]&&(h[a]=[]);h[a].push(g)}h=b?z:A}void 0===h[a]&&(h[a]=[]);h[a].push(g)}}function G(a,g,c,b){function k(a,b){var c=b[a],d=c.length;for(h=0;h<d;h++)c[h].toString()===g.toString()&&c.splice(h,1)}if("function"!==typeof g)return f;["value","checked"].indexOf(a);var d=-1!==y.indexOf(a),h;if(this.toString()!==f.toString())if(c){c=this.querySelectorAll("*");var n=c.length;d?(d=b?"_childStyleUpdateListeners":
"_childStyleListeners",k(a,this.attrListeners()[d]),d=b?"_parentStyleUpdateListeners":"_parentStyleListeners"):("*"===a&&(d=b?"_childStyleUpdateListeners":"_childStyleListeners",k(a,this.attrListeners()[d])),d=b?"_childAttrUpdateListeners":"_childAttrListeners",k(a,this.attrListeners()[d]),d=b?"_parentAttrUpdateListeners":"_parentAttrListeners");for(h=0;h<n;h++){for(var r=c[h].attrListeners()[d][a],p=r.length,u=0;u<p;u++)r[u].isEqualNode(this)&&r.slice(u,1);if("*"===a)for(listenersStyle=b?"_parentStyleUpdateListeners":
"_parentStyleListeners",r=c[h].attrListeners()[d][a],p=r.length,u=0;u<p;u++)r[u].isEqualNode(this)&&r.slice(u,1)}}else d?d=b?"_styleUpdateListeners":"_styleListeners":("*"===a&&(d=b?"_styleUpdateListeners":"_styleListeners",k(a,this.attrListeners()[d])),d=b?"_attrUpdateListeners":"_attrListeners"),k(a,this.attrListeners()[d]);else d?d=b?B:E:("*"===a&&(d=b?B:E,k(a,d)),d=b?z:A),k(a,d)}function L(a,g){f.addAttrListener.call(this,a,g,!0);return this}function R(a,g){f.addAttrUpdateListener.call(this,a,
g,!0);return this}function K(a,g){f.removeAttrListener.call(this,a,g,!0);return this}function N(a,g){f.removeAttrUpdateListener.call(this,a,g,!0);return this}function J(a,g,c){var b=this.attrListeners();"html"===g&&(g="innerHTML");"events"===g&&(g="onclick");switch(a){case "attr":if(I(b._attrListeners[g],c))return!0;break;case "attrupdate":if(I(b._attrUpdateListeners[g],c))return!0}return!1}function l(){this._stopChange=!0;return this}function f(){function a(a,b){var g,c=b.length;for(g=0;g<c;g++)-1===
a.indexOf(b[g])&&a.push(b[g]);return a}function g(a,b){for(var g=Object.keys(a),c,d,e=0,f=g.length;e<f;e++)if(c=g[e],void 0===b[c])b[c]=a[c].slice();else for(var h=0,k=a[c].length;h<k;h++)d=a[c][h],b[c].push(d)}function b(c){if(3!==c.target.nodeType&&8!==c.target.nodeType){var d=c.target.attrListeners(),e,h=["value","checked"],k=d._attrListeners,l=d._attrUpdateListeners,m=d._parentAttrListeners;e=d._parentAttrUpdateListeners;var t=!1;if(void 0!==A["*"]||void 0!==z["*"])t=!0;if(!0!==t&&void 0!==k["*"]||
void 0!==l["*"]||void 0!==m["*"]||void 0!==e["*"])t=!0;if(!0!==t)for(var q=0;q<h.length;q++)if(void 0!==A[h[q]]||void 0!==z[h[q]]||void 0!==k[h[q]]||void 0!==l[h[q]]||void 0!==m[h[q]]||void 0!==e[h[q]]){t=!0;break}e=t;h=Object.keys(E);k=Object.keys(B);Object.keys(d._styleListeners);Object.keys(d._styleUpdateListeners);l=Object.keys(d._parentStyleListeners);d=Object.keys(d._parentStyleUpdateListeners);m=[];if(0!==h.length||0!==k.length)m=a(m,h),m=a(m,k);if(0!==m.length&&0!==l.length||0!==d.length)m=
a(m,l),m=a(m,d);-1!==m.indexOf("*")&&(m=y);var d=m,h=d.length,w,v,k=[],x,l="outerHTML"===c.attr||"outerText"===c.attr?c.attr:void 0,m=c.target;void 0!==l&&(c.attr="appendChild",c.arguments=[c.target],c.target=c.target.parentElement);if(e){"appendChild"===c.attr&&3!==c.arguments[0].nodeType&&8!==c.arguments[0].nodeType?(k=Array.prototype.slice.call(c.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==c.arguments[0].tagName&&"TEXTAREA"!==c.arguments[0].tagName||k.unshift(c.arguments[0])):k=
Array.prototype.slice.call(c.target.querySelectorAll("input,textarea"));x=k.length;for(var C=0;C<x;C++)void 0!==k[C].addInputBinding&&k[C].addInputBinding(),void 0!==k[C].addInputBoxBinding&&k[C].addInputBoxBinding()}"appendChild"===c.attr&&"#text"!==c.arguments[0].nodeName&&"#comment"!==c.arguments[0].nodeName?(k=Array.prototype.slice.call(c.arguments[0].querySelectorAll("*")),k.unshift(c.arguments[0])):k=Array.prototype.slice.call(c.target.querySelectorAll("*"));e=c.target.__kb._parentAttrListeners;
t=c.target.__kb._parentAttrUpdateListeners;q=c.target.__kb._parentStyleListeners;w=c.target.__kb._parentStyleUpdateListeners;x=k.length;for(C=0;C<x;C++){if(0!==h)for(v=0;v<h;v++)f.injectStyleProperty(k[C],d[v]);v=k[C].attrListeners();g(e,v._parentAttrListeners);g(t,v._parentAttrUpdateListeners);g(q,v._parentStyleListeners);g(w,v._parentStyleUpdateListeners)}void 0!==l&&(c.attr=l,c.target=m,c.arguments=[])}}function e(a){var c=a.target.attributes[a.arguments[0]],b="setAttribute"===a.attr?a.arguments[1]:
"";d(a.target,a.arguments[0],b,void 0!==c?c.value:"",[b])||a.preventDefault()}function k(a){var c=a.target.attributes[a.arguments[0]],b="setAttribute"===a.attr?a.arguments[1]:"";h(a.target,a.arguments[0],b,void 0!==c?c.value:"",[b])}f.injectPrototypes(Node,"Node");f.injectPrototypes(Element,"Element");f.injectPrototypes(HTMLElement,"HTMLElement");f.injectPrototypes(HTMLInputElement,"HTMLInputElement");f.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");f.injectPrototypes(Document,"Document");
var d=m,h=D;f.addAttrUpdateListener("appendChild",b);f.addAttrUpdateListener("removeChild",b);f.addAttrUpdateListener("innerHTML",b);f.addAttrUpdateListener("outerHTML",b);f.addAttrUpdateListener("innerText",b);f.addAttrUpdateListener("outerText",b);f.addAttrUpdateListener("textContent",b);f.addAttrListener("setAttribute",e);f.addAttrListener("removeAttribute",e);f.addAttrUpdateListener("setAttribute",k);f.addAttrUpdateListener("removeAttribute",k);return f}var A={},z={},E={},B={},q={},w="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),
y=Object.getOwnPropertyNames(document.body.style),v=Object.keys(HTMLElement.prototype).filter(function(a){return 0===a.indexOf("on")}).concat(["addEventListener","removeEventListener"]),b,m=function(a,b,c,e,f,d){c=new O(a,b,c,e,f,void 0,"set",d);void 0!==a.__kb&&(e=a.__kb._attrListeners,f=a.__kb._styleListeners,d=a.__kb._parentAttrListeners,a=a.__kb._parentStyleListeners,void 0!==e[b]&&t(e[b],c),void 0===c._stopPropogation&&void 0!==f[b]&&t(f[b],c),void 0===c._stopPropogation&&void 0!==e["*"]&&(t(e["*"],
c),void 0===c._stopPropogation&&t(f["*"],c)),void 0===c._stopPropogation&&void 0!==d[b]&&x(d[b],c),void 0===c._stopPropogation&&void 0!==a[b]&&x(a[b],c),void 0===c._stopPropogation&&void 0!==d["*"]&&(x(d["*"],c),void 0===c._stopPropogation&&x(a["*"],c)));void 0===c._stopPropogation&&void 0!==A[b]&&t(A[b],c);void 0===c._stopPropogation&&void 0!==E[b]&&t(E[b],c);void 0===c._stopPropogation&&void 0!==A["*"]&&(t(A["*"],c),void 0===c._stopPropogation&&t(E["*"],c));return void 0!==c._preventDefault?!1:
!0},D=function(a,b,c,e,f,d){c=new O(a,b,c,e,f,d,"update");void 0!==a.__kb&&(e=a.__kb._attrUpdateListeners,f=a.__kb._styleUpdateListeners,d=a.__kb._parentAttrUpdateListeners,a=a.__kb._parentStyleUpdateListeners,void 0!==e[b]&&t(e[b],c),void 0===c._stopPropogation&&void 0!==f[b]&&t(f[b],c),void 0===c._stopPropogation&&void 0!==e["*"]&&(t(e["*"],c),void 0===c._stopPropogation&&t(f["*"],c)),void 0===c._stopPropogation&&void 0!==d[b]&&x(d[b],c),void 0===c._stopPropogation&&void 0!==a[b]&&x(a[b],c),void 0===
c._stopPropogation&&void 0!==d["*"]&&(x(d["*"],c),void 0===c._stopPropogation&&x(a["*"],c)));void 0===c._stopPropogation&&void 0!==z[b]&&t(z[b],c);void 0===c._stopPropogation&&void 0!==B[b]&&t(B[b],c);void 0===c._stopPropogation&&void 0!==z["*"]&&(t(z["*"],c),void 0===c._stopPropogation&&t(B["*"],c));return void 0!==c._preventDefault?!1:!0};f.injectPrototypeProperty=function(a,b,c,e,k){var d=a.prototype,h=Object.getOwnPropertyDescriptor(d,b);c=c||a.toString().split(/\s+/)[1].split("{")[0].replace("()",
"");var n=q[c];e=e||m;k=k||D;void 0===d.attrListeners&&(d={},d.attrListeners=function(){void 0===this.__kb&&(this.__kb=new Q);return this.__kb}.bind(d),d.addAttrListener=f.addAttrListener,d.addAttrUpdateListener=f.addAttrUpdateListener,d.addChildAttrListener=L,d.addChildAttrUpdateListener=R,d.hasListener=J,d.removeAttrListener=f.removeAttrListener,d.removeAttrUpdateListener=f.removeAttrUpdateListener,d.removeChildAttrListener=K,d.removeChildAttrUpdateListener=N,d.stopChange=l);void 0===n&&(q[c]={obj:a,
proto:d,descriptors:{},set:void 0,update:void 0},n=q[c],n.set=e,n.update=k);void 0===n.descriptors[b]&&(n.descriptors[b]=h);h.configurable&&(void 0!==h.set?Object.defineProperty(d,b,{get:h.get,set:S(h,b,e,k),enumerable:!0,configurable:!0}):"function"===typeof h.value?Object.defineProperty(d,b,{value:U(h,b,e,k),writable:!0,enumerable:!0,configurable:!0}):void 0!==h.value&&Object.defineProperty(d,b,{get:function(){return h.value},set:T(h,b,e,k),enumerable:!0,configurable:!0}));return f};f.injectStyleProperty=
function(a,b,c,e){var k=a.style,d=Object.getOwnPropertyDescriptor(k,b),h=a.attrListeners().injectedStyle;c=c||m;e=e||D;void 0===h&&(a.attrListeners().injectedStyle={obj:a,proto:k,descriptors:{},set:void 0,update:void 0},a.attrListeners().injectedStyle.set=c,a.attrListeners().injectedStyle.update=e,h=a.attrListeners().injectedStyle);void 0===h.descriptors[b]&&(h.descriptors[b]=d);d.configurable&&Object.defineProperty(k,b,P(d,b,c,e,a));return f};f.injectPrototypes=function(a,b,c,e){var k=a.prototype;
b=b||a.toString().split(/\s+/)[1].split("{")[0].replace("()","");var d=q[b],h=Object.getOwnPropertyNames(k);c=c||m;e=e||D;var n;void 0===k.attrListeners&&(k.attrListeners=function(){void 0===this.__kb&&(this.__kb=new Q);return this.__kb},k.addAttrListener=f.addAttrListener,k.addAttrUpdateListener=f.addAttrUpdateListener,k.addChildAttrListener=L,k.addChildAttrUpdateListener=R,k.removeAttrListener=f.removeAttrListener,k.removeAttrUpdateListener=f.removeAttrUpdateListener,k.removeChildAttrListener=K,
k.removeChildAttrUpdateListener=N,k.hasListener=J,k.stopChange=l);void 0===d&&(q[b]={obj:a,proto:k,descriptors:{},set:void 0,update:void 0},d=q[b],d.set=c,d.update=e);n=q[b].descriptors;for(e=0;e<h.length;e+=1)void 0===n[h[e]]&&f.injectPrototypeProperty(a,h[e],b,c,D);if(-1!==h.indexOf("value")){var r=function(a){var b,c,g;if("checkbox"===this.type||"radio"===this.type)b=!0;c=b?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){g=b?"string"===typeof this.checked?
this.checked:this.checked?"true":"false":this.value;b&&(d.set(this,"checked",this.checked,c)?d.update(this,"checked",this.checked,c):n.checked.set.call(this,c));this.value=g;d.set(this,"value",this.value,c)?d.update(this,"value",this.checked,c):n.value.set.call(this,c)}.bind(this),0)};k.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",r)};k.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",r)};k.removeInputBoxBinding=
function(){this.attrListeners()._onmousedown=void 0;this.removeEventListener("mouseup",r)};k.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",r)}}return f};f.addAttrListener=function(a,b,c){if("html"===a){a=0;for(var e=w.length;a<e;a++)F.call(this,w[a],b,c,!1)}else if("events"===a)for(a=0,e=v.length;a<e;a++)F.call(this,v[a],b,c,!1);else F.call(this,a,b,c,!1);return this};f.addAttrUpdateListener=function(a,b,c){if("html"===a){a=0;for(var e=w.length;a<
e;a++)F.call(this,w[a],b,c,!0)}else if("events"===a)for(a=0,e=v.length;a<e;a++)F.call(this,v[a],b,c,!0);else F.call(this,a,b,c,!0);return this};f.removeAttrListener=function(a,b,c){if("html"===a){a=0;for(var e=w.length;a<e;a++)G.call(this,w[a],b,c,!1)}else if("events"===a)for(a=0,e=v.length;a<e;a++)G.call(this,v[a],b,c,!1);else G.call(this,a,b,c,!1);return this};f.removeAttrUpdateListener=function(a,b,c){if("html"===a){a=0;for(var e=w.length;a<e;a++)G.call(this,w[a],b,c,!0)}else if("events"===a)for(a=
0,e=v.length;a<e;a++)G.call(this,v[a],b,c,!0);else G.call(this,a,b,c,!0);return this};f.hasListener=function(a,b,c){"html"===b&&(b="innerHTML");"events"===b&&(b="onclick");switch(a){case "attr":if(I(A[b],c))return!0;break;case "attrupdate":if(I(z[b],c))return!0}return!1};f.injectedPrototypes=function(){return q};return f}"function"===typeof define&&define.amd&&define("KB",H);return H}());"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],
function(){return H}):"undefined"!==typeof module&&(module.exports=H);return H}();
