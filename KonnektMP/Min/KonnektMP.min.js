var KonnektMP=function(){var G=function(S){return function(){function p(a){this.name=a.tagName.toLowerCase();this.template=z[this.name]||'<div class="missing_component">Unknown Component</div>';this.node=a;this.fragment=document.createDocumentFragment();this.wrapper=document.createElement("div");this.wrapper.className="Wrapper Wrapper__"+this.name;this.wrapper.innerHTML=this.template;this.fragment.appendChild(this.wrapper);this.maps=this.map(this.wrapper);this.wrapper.kb_maps=this.maps}function w(a,
n,d,b,f,c,k,h){function e(b){var f="for"===n?I(b):[],c=this;this.key="for"!==n?J(b):f[0];this.filterNames=M(b);this.component="for"===n?f[1]:void 0;this.id=0;this.isEvent=g;this.__proto__.bindText=this.__proto__.bindText.map(function(c){return c===b?this:c});Object.defineProperties(this,{value:{get:this.valget,set:this.valset,enumerable:!0,configurable:!1},_value:l("",!0)});this.__proto__.updateData=function(b){c.isConnected&&c._data&&("object"===typeof b&&b.value||(b={value:b}),"function"===typeof c._data.stopChange&&
c._data.stopChange().set(c.key,b.value))};this.__proto__.updateDom=function(b){c.isSynced()&&(c.element.stopChange(),"object"===typeof b&&b.value||(b={value:b}),c.value=b.value)};this.__proto__.updateLoop=function(){c.kb_loop&&c.loop(c.kb_loop)}}var g="attribute"===n&&-1!==B.indexOf(k.name)||"component"===n&&k.name&&-1!==B.indexOf(k.name);g&&h.stopChange().removeAttribute(k.name);Object.defineProperties(e.prototype,{valget:l(H),valset:l(N),refresh:l(G),connect:l(T),deleteMap:l(E),loop:l(O),unsync:l(F),
isSynced:l(P),type:l(n),text:l(d,!0),bindText:l(b,!0),bindNames:l("for"===n?[I(b[0])[0]]:Q(b),!0),bindListener:l(g?f.toLowerCase():f),bindProperty:l(g?k.name.toLowerCase():c),bindTarget:l(k,!0),element:l(h,!0),_data:l({},!0),filters:l({},!0),maps:l(a,!0),loop:l(O)});return e}function H(){return this._value}function N(a){this._value=this.isSynced()?a:this._value;this.refresh()}function P(){return this.element.parentElement?!!this.element.parentElement:this.unsync()}function R(a,n){function d(b,f){return f.reduce(function(c,
f){return c+("string"===typeof f?f:0===f.filterNames.length?f._value:f.filterNames.reduce(function(f,c){if(void 0!==b.filters){if(void 0!==b.filters[c])return b.filters[c](f);console.warn("there is no filter by the name %o in the data model filters %o",c,Object.keys(b.filters));return f}console.error("Somehow filters object was not added to the mapping via .connect() method, please see dev");return f},f._value))},"")}return 1===n.length?"string"===typeof n[0]._value?d(a,n):n[0]._value:d(a,n)}function G(){"for"!==
this.type&&(this.isEvent?this.element[this.bindProperty]=this.bindText[0]._value:"component"===this.type?(this.element.k_post||(this.element.k_post={}),this.element.k_post["textContent"===this.bindProperty?"innerHTML":this.bindTarget.name]=R(this,this.bindText)):this.bindTarget[this.bindProperty]=R(this,this.bindText));return this}function T(a){this._data=a;this.filters=void 0!==a.filters?a.filters:this.filters;a=0;for(var n=this.bindNames.length;a<n;a++)this._data.addDataUpdateListener&&(this._data.exists(this.bindNames[a])||
(console.warn("No property by the name %o exists on this data set %o",this.bindNames[a],this._data),this._data.add(this.bindNames[a],this._value)),this.value=this._data.get(this.bindNames[a]),"component"!==this.type&&(this.isConnected=!0,this._data.removeDataUpdateListener(this.bindNames[a],this.updateDom).addDataUpdateListener(this.bindNames[a],this.updateDom),"for"===this.type&&this._value.addActionListener&&this._value.removeDataUpdateListener("*",this.updateLoop).addDataUpdateListener("*",this.updateLoop).removeDataCreateListener(this.updateLoop).addDataCreateListener(this.updateLoop).removeDataDeleteListener(this.updateLoop).addDataDeleteListener(this.updateLoop)));
1!==this.bindText.length||"text"!==this.type&&"attribute"!==this.type&&!this.isEvent||this.element.addAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);return this}function O(a){this.kb_loop=a;this.element.stopChange().innerHTML="";for(var n=this._value,d=0,b=this.filterNames.length;d<b;d++)n=this.filters[this.filterNames[d]](n);n=0;for(d=this._value.length;n<d;n++)b=document.createElement(this.component),b.k_post=this._value[n],b.kb_wrapper=this.element.kb_wrapper,this.element.stopChange().appendChild(b),
"function"===typeof a&&a(b)}function E(){this.maps[this.key].splice(this.id,1);return this}function F(){for(var a=0,n=this.bindNames.length;a<n;a++)this._data.removeDataUpdateListener&&(this._data.removeDataUpdateListener(this.bindNames[a],this.updateDom),this._value.removeDataUpdateListener("*",this.updateLoop).removeDataCreateListener(this.updateLoop).removeDataDeleteListener(this.updateLoop));this.element.removeAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);this.maps=
this.bindNames=this.filters=this._data=null;this.__proto__._data=null;this.__proto__.element=null;this.__proto__.filters=null;this.__proto__.bindTarget=null;this.__proto__.bindText=null;this.__proto__.bindNames=null;this.__proto__.element=null;this.__proto__.maps=null;return!1}function K(a){return a.split(new RegExp("("+v.split("").join("\\")+")(.*?)("+r.split("").join("\\")+")","g")).map(function(a,d,b){return b[d-1]===v?v+a+r:a}).filter(function(a,d,b){return 0!==a.length&&a!==v&&a!==r&&0!==a.length})}
function Q(a){return a.filter(function(a){return-1!==a.indexOf(v)&&-1!==a.indexOf(r)}).map(function(a){return J(a)})}function J(a){return a.replace(new RegExp("["+v+r+"]","g"),"").replace(new RegExp("\\"+y.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function M(a){return-1!==a.indexOf(y)?a.replace(new RegExp("["+r+"]","g"),"").replace(new RegExp("(.*?)(\\"+y.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[]}function I(a){return-1!==a.indexOf("for")?a.replace(new RegExp("["+v+r+"]",
"g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(a){return 0!==a.length}):[]}function l(a,d,C){return{value:a,writable:!!d,enumerable:!1,configurable:!!C}}function d(a,d){for(var C=x[a],b=0,f=C.length;b<f&&(C[b](d),d._stopPropogation);b++);return d._preventDefault}function A(a){var n=a.match(D).map(function(a){return a.replace(/[<\/>]/g,"")});n.filter(function(a,b){return document.createElement(a)instanceof HTMLUnknownElement&&-1===n.indexOf(a,b+1)&&void 0===z[a]});
0!==n.length&&d("unknown",new Event("unknown",n));return n}var z={},D=/(<\/.*?>)/g;S().call();var B=Object.keys(HTMLElement.prototype).filter(function(a){return 0===a.indexOf("on")}),v="{{",r="}}",y="|",x={unknown:[]};p.prototype.map=function(a){function d(b){for(var f=0,c=b.length;f<c;f++)if(void 0===b[f].kb_maps){b[f].kb_mapper=a;if(3===b[f].nodeType){var k=b[f],h=l,e=k.textContent,g=k.parentElement instanceof HTMLUnknownElement;if(e.match(new RegExp("(\\"+v.split("").join("\\")+")(.*?)(\\"+r.split("").join("\\")+
")","g")))for(var m=g?"component":-1!==e.indexOf("for")&&void 0!==e.indexOf("loop")?"for":"text",k=w(h,m,e,K(e),g?"":"textContent","textContent",k,k.parentElement),e=0,g=k.prototype.bindText.length;e<g;e++)0===k.prototype.bindText[e].indexOf(v)&&(m=new k(k.prototype.bindText[e]),k.prototype.bindText[e]=m,void 0===h[m.key]&&(h[m.key]=[]),m.id=h[m.key].length,h[m.key].push(m))}else for(var h=b[f],k=l,e=h.attributes,g=h instanceof HTMLUnknownElement,m=0,u=e.length;m<u;m++)if(e[m].value.match(new RegExp("(\\"+
v.split("").join("\\")+")(.*?)(\\"+r.split("").join("\\")+")","g")))for(var q=w(k,g?"component":"attribute",e[m].value,K(e[m].value),g?"":e[m].name,"value",e[m],h),t=0,U=q.prototype.bindText.length;t<U;t++)if(0===q.prototype.bindText[t].indexOf(v)){var L=new q(q.prototype.bindText[t]);q.prototype.bindText[t]=L;void 0===k[L.key]&&(k[L.key]=[]);k[L.key].push(L)}b[f].childNodes&&0!==b[f].childNodes.length&&d(b[f].childNodes)}}var l={};d(a.childNodes);return l};p.prototype.addFilter=function(a,d){void 0!==
this.maps[a]&&this.maps[a].forEach(function(a){a.filters.push(d);a.refresh()});return this};p.prototype.removeFilter=function(a,d){void 0!==this.maps[a]&&this.maps[a].forEach(function(l){l.filters.splice(this.maps[a].filters.indexOf(d),1);l.refresh()});return this};p.prototype.swapFilter=function(a,d,l){void 0!==this.maps[a]&&this.maps[a].forEach(function(b){b.filters.splice(this.maps[a].filters.indexOf(d),1,l);b.refresh()});return this};Object.defineProperties(p,{startChars:l(function(a){if(void 0===
a)return v;v="string"===typeof a?a:v;return this}),endChars:l(function(a){if(void 0===a)return r;r="string"===typeof a?a:r;return this}),pipeChars:l(function(a){if(void 0===a)return y;y="string"===typeof a?a:y;return this}),getUnknown:l(A),isRegistered:l(function(a){return void 0!==z[a]}),register:l(function(a,d){void 0===z[a]?(z[a]=d,A(d)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",a);return this}),addEventListener:l(function(a,d){void 0!==x[a]?
x[a].push(d):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",a);return this}),removeEventListener:l(function(a,d){if(void 0!==x[a])for(var l=0,b=x[a].length;l<b;l++)x[a][l].toString()===d.toString()&&x[a].splice(l,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",a);return this})});return p}}(function(){function G(){function p(b,f){var c=b.length,k;for(k=0;k<c&&(b[k](f),void 0===f._stopPropogation);k++);
}function w(b,f){var c=b.length,k;for(k=0;k<c&&(f.child=f.target,f.target=b[k].parent,b[k].func(f),void 0===f._stopPropogation);k++);}function H(b,f){for(var c=b.length;0<c;a++)if(b[a].toString()===f.toString())return!0;return!1}function N(b,f,c,k,a,e,d,m){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=c;this.oldValue=k;this.target=b;this.attr=f;this.arguments=a;this.action=e;this.child=void 0;this.type=d;this.stopChange=
m}function P(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function R(b,f,c,k){var a=b.get,e=b.set,d;return function(b){d=a.call(this);c(this,f,b,d,void 0,this._stopChange)&&e.call(this,b);this._stopChange||k(this,f,b,d);this._stopChange=void 0}}function S(b,f,c,k){var a;return function(e){a=
b.value;c(this,f,e,a,arguments,this._stopChange)&&(b.value=e);this._stopChange||k(this,f,e,a,arguments);this._stopChange=void 0}}function T(b,f,c,a){var d=b.value,e;return function(){c(this,f,null,null,arguments,this._stopChange)&&(e=d.apply(this,arguments));this._stopChange||a(this,f,null,null,arguments,e);this._stopChange=void 0;return e}}function O(b,f,c,a,d){var e=d.style,g=f.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),m,u;return{get:function(){return u},set:function(b){m=u;c(d,f,b,
m,void 0,this._stopChange)&&(u=b,e.setProperty(g,b));this._stopChange||a(d,f,b,m);this._stopChange=void 0},enumerable:!0,configurable:!0}}function E(b,f,c,a){if("function"!==typeof f)return d;var h=-1!==["value","checked"].indexOf(b),e=-1!==y.indexOf(b),g;if(this.toString()!==d.toString())if(c){var m=this.querySelectorAll("*");c=m.length;for(var u,q=0;q<c;q++){u=m[q].attrListeners();if(h||"*"===b)void 0!==m[q].addInputBinding&&m[q].addInputBinding(),void 0!==m[q].addInputBoxBinding&&m[q].addInputBoxBinding();
if(e)d.injectStyleProperty(m[q],b),g=a?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===b){g=a?"_parentStyleUpdateListeners":"_parentStyleListeners";c=y.length;for(var t=0;t<c;t++)d.injectStyleProperty(m[q],y[t]);void 0===u[g]["*"]&&(u[g]["*"]=[]);u[g]["*"].push({parent:this,func:f})}g=a?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===u[g][b]&&(u[g][b]=[]);u[g][b].push({parent:this,func:f})}}else{u=this.attrListeners();if(e)g=a?"_styleUpdateListeners":"_styleListeners",
d.injectStyleProperty(this,b);else{if(h||"*"===b)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===b){g=a?"_styleUpdateListeners":"_styleListeners";c=y.length;for(q=0;q<c;q++)d.injectStyleProperty(this,y[q]);void 0===u[g][b]&&(u[g][b]=[]);u[g][b].push(f)}g=a?"_attrUpdateListeners":"_attrListeners"}void 0===u[g][b]&&(u[g][b]=[]);u[g][b].push(f)}else{if(h||"*"===b)for(t=document.querySelectorAll("input, textarea"),c=t.length,q=
0;q<c;q++)void 0!==t[q].addInputBinding&&t[q].addInputBinding(),void 0!==t[q].addInputBoxBinding&&t[q].addInputBoxBinding();if(e){e=Array.prototype.slice.call(document.body.querySelectorAll("*"));c=e.length+1;e.unshift(document.body);for(q=0;q<c;q++)d.injectStyleProperty(e[q],b);g=a?B:D}else{if("*"===b){e=Array.prototype.slice.call(document.body.querySelectorAll("*"));c=e.length+1;h=y.length;e.unshift(document.body);for(q=0;q<c;q++)for(t=0;t<h;t++)d.injectStyleProperty(e[q],y[t]);g=a?B:D;void 0===
g[b]&&(g[b]=[]);g[b].push(f)}g=a?z:A}void 0===g[b]&&(g[b]=[]);g[b].push(f)}}function F(b,f,c,a){function h(b,c){var a=c[b],e=a.length;for(g=0;g<e;g++)a[g].toString()===f.toString()&&a.splice(g,1)}if("function"!==typeof f)return d;["value","checked"].indexOf(b);var e=-1!==y.indexOf(b),g;if(this.toString()!==d.toString())if(c){c=this.querySelectorAll("*");var m=c.length;e?(e=a?"_childStyleUpdateListeners":"_childStyleListeners",h(b,this.attrListeners()[e]),e=a?"_parentStyleUpdateListeners":"_parentStyleListeners"):
("*"===b&&(e=a?"_childStyleUpdateListeners":"_childStyleListeners",h(b,this.attrListeners()[e])),e=a?"_childAttrUpdateListeners":"_childAttrListeners",h(b,this.attrListeners()[e]),e=a?"_parentAttrUpdateListeners":"_parentAttrListeners");for(g=0;g<m;g++){for(var u=c[g].attrListeners()[e][b],q=u.length,t=0;t<q;t++)u[t].isEqualNode(this)&&u.slice(t,1);if("*"===b)for(listenersStyle=a?"_parentStyleUpdateListeners":"_parentStyleListeners",u=c[g].attrListeners()[e][b],q=u.length,t=0;t<q;t++)u[t].isEqualNode(this)&&
u.slice(t,1)}}else e?e=a?"_styleUpdateListeners":"_styleListeners":("*"===b&&(e=a?"_styleUpdateListeners":"_styleListeners",h(b,this.attrListeners()[e])),e=a?"_attrUpdateListeners":"_attrListeners"),h(b,this.attrListeners()[e]);else e?e=a?B:D:("*"===b&&(e=a?B:D,h(b,e)),e=a?z:A),h(b,e)}function K(b,f){d.addAttrListener.call(this,b,f,!0);return this}function Q(b,f){d.addAttrUpdateListener.call(this,b,f,!0);return this}function J(b,f){d.removeAttrListener.call(this,b,f,!0);return this}function M(b,f){d.removeAttrUpdateListener.call(this,
b,f,!0);return this}function I(b,f,c){var a=this.attrListeners();"html"===f&&(f="innerHTML");"events"===f&&(f="onclick");switch(b){case "attr":if(H(a._attrListeners[f],c))return!0;break;case "attrupdate":if(H(a._attrUpdateListeners[f],c))return!0}return!1}function l(){this._stopChange=!0;return this}function d(){function b(b,a){var f,c=a.length;for(f=0;f<c;f++)-1===b.indexOf(a[f])&&b.push(a[f]);return b}function f(b,f){for(var a=Object.keys(b),c,e,d=0,k=a.length;d<k;d++)if(c=a[d],void 0===f[c])f[c]=
b[c].slice();else for(var g=0,h=b[c].length;g<h;g++)e=b[c][g],f[c].push(e)}function c(c){if(3!==c.target.nodeType&&8!==c.target.nodeType){var a=c.target.attrListeners(),e,k=["value","checked"],g=a._attrListeners,h=a._attrUpdateListeners,l=a._parentAttrListeners;e=a._parentAttrUpdateListeners;var n=!1;if(void 0!==A["*"]||void 0!==z["*"])n=!0;if(!0!==n&&void 0!==g["*"]||void 0!==h["*"]||void 0!==l["*"]||void 0!==e["*"])n=!0;if(!0!==n)for(var p=0;p<k.length;p++)if(void 0!==A[k[p]]||void 0!==z[k[p]]||
void 0!==g[k[p]]||void 0!==h[k[p]]||void 0!==l[k[p]]||void 0!==e[k[p]]){n=!0;break}e=n;k=Object.keys(D);g=Object.keys(B);Object.keys(a._styleListeners);Object.keys(a._styleUpdateListeners);h=Object.keys(a._parentStyleListeners);a=Object.keys(a._parentStyleUpdateListeners);l=[];if(0!==k.length||0!==g.length)l=b(l,k),l=b(l,g);if(0!==l.length&&0!==h.length||0!==a.length)l=b(l,h),l=b(l,a);-1!==l.indexOf("*")&&(l=y);var a=l,k=a.length,v,r,g=[],x,h="outerHTML"===c.attr||"outerText"===c.attr?c.attr:void 0,
l=c.target;void 0!==h&&(c.attr="appendChild",c.arguments=[c.target],c.target=c.target.parentElement);if(e){"appendChild"===c.attr&&3!==c.arguments[0].nodeType&&8!==c.arguments[0].nodeType?(g=Array.prototype.slice.call(c.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==c.arguments[0].tagName&&"TEXTAREA"!==c.arguments[0].tagName||g.unshift(c.arguments[0])):g=Array.prototype.slice.call(c.target.querySelectorAll("input,textarea"));x=g.length;for(var w=0;w<x;w++)void 0!==g[w].addInputBinding&&
g[w].addInputBinding(),void 0!==g[w].addInputBoxBinding&&g[w].addInputBoxBinding()}"appendChild"===c.attr&&"#text"!==c.arguments[0].nodeName&&"#comment"!==c.arguments[0].nodeName?(g=Array.prototype.slice.call(c.arguments[0].querySelectorAll("*")),g.unshift(c.arguments[0])):g=Array.prototype.slice.call(c.target.querySelectorAll("*"));e=c.target.__kb._parentAttrListeners;n=c.target.__kb._parentAttrUpdateListeners;p=c.target.__kb._parentStyleListeners;v=c.target.__kb._parentStyleUpdateListeners;x=g.length;
for(w=0;w<x;w++){if(0!==k)for(r=0;r<k;r++)d.injectStyleProperty(g[w],a[r]);r=g[w].attrListeners();f(e,r._parentAttrListeners);f(n,r._parentAttrUpdateListeners);f(p,r._parentStyleListeners);f(v,r._parentStyleUpdateListeners)}void 0!==h&&(c.attr=h,c.target=l,c.arguments=[])}}function a(b){var c=b.target.attributes[b.arguments[0]],f="setAttribute"===b.attr?b.arguments[1]:"";e(b.target,b.arguments[0],f,void 0!==c?c.value:"",[f])||b.preventDefault()}function h(b){var c=b.target.attributes[b.arguments[0]],
a="setAttribute"===b.attr?b.arguments[1]:"";g(b.target,b.arguments[0],a,void 0!==c?c.value:"",[a])}d.injectPrototypes(Node,"Node");d.injectPrototypes(Element,"Element");d.injectPrototypes(HTMLElement,"HTMLElement");d.injectPrototypes(HTMLInputElement,"HTMLInputElement");d.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");d.injectPrototypes(Document,"Document");var e=n,g=C;d.addAttrUpdateListener("appendChild",c);d.addAttrUpdateListener("removeChild",c);d.addAttrUpdateListener("innerHTML",
c);d.addAttrUpdateListener("outerHTML",c);d.addAttrUpdateListener("innerText",c);d.addAttrUpdateListener("outerText",c);d.addAttrUpdateListener("textContent",c);d.addAttrListener("setAttribute",a);d.addAttrListener("removeAttribute",a);d.addAttrUpdateListener("setAttribute",h);d.addAttrUpdateListener("removeAttribute",h);return d}var A={},z={},D={},B={},v={},r="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),y=Object.getOwnPropertyNames(document.body.style),
x=Object.keys(HTMLElement.prototype).filter(function(b){return 0===b.indexOf("on")}).concat(["addEventListener","removeEventListener"]),a,n=function(b,a,c,d,h,e){c=new N(b,a,c,d,h,void 0,"set",e);void 0!==b.__kb&&(d=b.__kb._attrListeners,h=b.__kb._styleListeners,e=b.__kb._parentAttrListeners,b=b.__kb._parentStyleListeners,void 0!==d[a]&&p(d[a],c),void 0===c._stopPropogation&&void 0!==h[a]&&p(h[a],c),void 0===c._stopPropogation&&void 0!==d["*"]&&(p(d["*"],c),void 0===c._stopPropogation&&p(h["*"],c)),
void 0===c._stopPropogation&&void 0!==e[a]&&w(e[a],c),void 0===c._stopPropogation&&void 0!==b[a]&&w(b[a],c),void 0===c._stopPropogation&&void 0!==e["*"]&&(w(e["*"],c),void 0===c._stopPropogation&&w(b["*"],c)));void 0===c._stopPropogation&&void 0!==A[a]&&p(A[a],c);void 0===c._stopPropogation&&void 0!==D[a]&&p(D[a],c);void 0===c._stopPropogation&&void 0!==A["*"]&&(p(A["*"],c),void 0===c._stopPropogation&&p(D["*"],c));return void 0!==c._preventDefault?!1:!0},C=function(b,a,c,d,h,e){c=new N(b,a,c,d,h,
e,"update");void 0!==b.__kb&&(d=b.__kb._attrUpdateListeners,h=b.__kb._styleUpdateListeners,e=b.__kb._parentAttrUpdateListeners,b=b.__kb._parentStyleUpdateListeners,void 0!==d[a]&&p(d[a],c),void 0===c._stopPropogation&&void 0!==h[a]&&p(h[a],c),void 0===c._stopPropogation&&void 0!==d["*"]&&(p(d["*"],c),void 0===c._stopPropogation&&p(h["*"],c)),void 0===c._stopPropogation&&void 0!==e[a]&&w(e[a],c),void 0===c._stopPropogation&&void 0!==b[a]&&w(b[a],c),void 0===c._stopPropogation&&void 0!==e["*"]&&(w(e["*"],
c),void 0===c._stopPropogation&&w(b["*"],c)));void 0===c._stopPropogation&&void 0!==z[a]&&p(z[a],c);void 0===c._stopPropogation&&void 0!==B[a]&&p(B[a],c);void 0===c._stopPropogation&&void 0!==z["*"]&&(p(z["*"],c),void 0===c._stopPropogation&&p(B["*"],c));return void 0!==c._preventDefault?!1:!0};d.injectPrototypeProperty=function(b,a,c,k,h){var e=b.prototype,g=Object.getOwnPropertyDescriptor(e,a);c=c||b.toString().split(/\s+/)[1].split("{")[0].replace("()","");var m=v[c];k=k||n;h=h||C;void 0===e.attrListeners&&
(e={},e.attrListeners=function(){void 0===this.__kb&&(this.__kb=new P);return this.__kb}.bind(e),e.addAttrListener=d.addAttrListener,e.addAttrUpdateListener=d.addAttrUpdateListener,e.addChildAttrListener=K,e.addChildAttrUpdateListener=Q,e.hasListener=I,e.removeAttrListener=d.removeAttrListener,e.removeAttrUpdateListener=d.removeAttrUpdateListener,e.removeChildAttrListener=J,e.removeChildAttrUpdateListener=M,e.stopChange=l);void 0===m&&(v[c]={obj:b,proto:e,descriptors:{},set:void 0,update:void 0},
m=v[c],m.set=k,m.update=h);void 0===m.descriptors[a]&&(m.descriptors[a]=g);g.configurable&&(void 0!==g.set?Object.defineProperty(e,a,{get:g.get,set:R(g,a,k,h),enumerable:!0,configurable:!0}):"function"===typeof g.value?Object.defineProperty(e,a,{value:T(g,a,k,h),writable:!0,enumerable:!0,configurable:!0}):void 0!==g.value&&Object.defineProperty(e,a,{get:function(){return g.value},set:S(g,a,k,h),enumerable:!0,configurable:!0}));return d};d.injectStyleProperty=function(b,a,c,k){var h=b.style,e=Object.getOwnPropertyDescriptor(h,
a),g=b.attrListeners().injectedStyle;c=c||n;k=k||C;void 0===g&&(b.attrListeners().injectedStyle={obj:b,proto:h,descriptors:{},set:void 0,update:void 0},b.attrListeners().injectedStyle.set=c,b.attrListeners().injectedStyle.update=k,g=b.attrListeners().injectedStyle);void 0===g.descriptors[a]&&(g.descriptors[a]=e);e.configurable&&Object.defineProperty(h,a,O(e,a,c,k,b));return d};d.injectPrototypes=function(b,a,c,k){var h=b.prototype;a=a||b.toString().split(/\s+/)[1].split("{")[0].replace("()","");var e=
v[a],g=Object.getOwnPropertyNames(h);c=c||n;k=k||C;var m;void 0===h.attrListeners&&(h.attrListeners=function(){void 0===this.__kb&&(this.__kb=new P);return this.__kb},h.addAttrListener=d.addAttrListener,h.addAttrUpdateListener=d.addAttrUpdateListener,h.addChildAttrListener=K,h.addChildAttrUpdateListener=Q,h.removeAttrListener=d.removeAttrListener,h.removeAttrUpdateListener=d.removeAttrUpdateListener,h.removeChildAttrListener=J,h.removeChildAttrUpdateListener=M,h.hasListener=I,h.stopChange=l);void 0===
e&&(v[a]={obj:b,proto:h,descriptors:{},set:void 0,update:void 0},e=v[a],e.set=c,e.update=k);m=v[a].descriptors;for(k=0;k<g.length;k+=1)void 0===m[g[k]]&&d.injectPrototypeProperty(b,g[k],a,c,C);if(-1!==g.indexOf("value")){var p=function(b){var a,c,f;if("checkbox"===this.type||"radio"===this.type)a=!0;c=a?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){f=a?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;a&&(e.set(this,
"checked",this.checked,c)?e.update(this,"checked",this.checked,c):m.checked.set.call(this,c));this.value=f;e.set(this,"value",this.value,c)?e.update(this,"value",this.checked,c):m.value.set.call(this,c)}.bind(this),0)};h.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",p)};h.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",p)};h.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=void 0;
this.removeEventListener("mouseup",p)};h.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",p)}}return d};d.addAttrListener=function(b,a,c){if("html"===b){b=0;for(var d=r.length;b<d;b++)E.call(this,r[b],a,c,!1)}else if("events"===b)for(b=0,d=x.length;b<d;b++)E.call(this,x[b],a,c,!1);else E.call(this,b,a,c,!1);return this};d.addAttrUpdateListener=function(b,a,c){if("html"===b){b=0;for(var d=r.length;b<d;b++)E.call(this,r[b],a,c,!0)}else if("events"===
b)for(b=0,d=x.length;b<d;b++)E.call(this,x[b],a,c,!0);else E.call(this,b,a,c,!0);return this};d.removeAttrListener=function(b,a,c){if("html"===b){b=0;for(var d=r.length;b<d;b++)F.call(this,r[b],a,c,!1)}else if("events"===b)for(b=0,d=x.length;b<d;b++)F.call(this,x[b],a,c,!1);else F.call(this,b,a,c,!1);return this};d.removeAttrUpdateListener=function(b,a,c){if("html"===b){b=0;for(var d=r.length;b<d;b++)F.call(this,r[b],a,c,!0)}else if("events"===b)for(b=0,d=x.length;b<d;b++)F.call(this,x[b],a,c,!0);
else F.call(this,b,a,c,!0);return this};d.hasListener=function(b,a,c){"html"===a&&(a="innerHTML");"events"===a&&(a="onclick");switch(b){case "attr":if(H(A[a],c))return!0;break;case "attrupdate":if(H(z[a],c))return!0}return!1};d.injectedPrototypes=function(){return v};return d}"function"===typeof define&&define.amd&&define("KB",G);return G}());"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return G}):"undefined"!==typeof module&&
(module.exports=G);return G}();
