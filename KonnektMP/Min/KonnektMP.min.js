var KonnektMP=function(){var G=function(P){return function(){function l(a){this.name=a.tagName.toLowerCase();this.template=E[name]||'<div class="missing_component">Unknown Component</div>';this.node=a;this.fragment=document.createDocumentFragment();this.wrapper=document.createElement("div");this.wrapper.className="Wrapper Wrapper__"+this.name;this.wrapper.innerHTML=this.template;this.fragment.appendChild(this.wrapper);this.maps=this.map(this.wrapper);this.wrapper.kb_maps=this.maps}function x(a,p,
d,n,t,l,u){function c(c){var b=K(c),g=this;this.key="for"!==a?C(c):b[0];this.filterNames=L(c);this.component="for"!==a?b[1]:void 0;this.__proto__.bindText=this.__proto__.bindText.map(function(b){return b===c?this:b});Object.defineProperties(this,{value:{get:this.valget,set:this.valset,enumerable:!0,configurable:!1},_value:m("",!0)});this.updateData=function(c){g.isConnected&&g._data&&("string"===typeof c&&(c={value:c}),"function"===typeof g._data.stopChange&&g._data.stopChange().set(g.key,c.value))};
this.updateDom=function(c){g.element.stopChange();"string"===typeof c&&(c={value:c});g.value=c.value}}Object.defineProperties(c.prototype,{valget:m(H),valset:m(M),refresh:m(G),connect:m(Q),unsync:m(R),isSynced:m(N),type:m(a),text:m(p,!0),bindText:m(d),bindNames:m(F(d)),bindListener:m(n),bindProperty:m(t),bindTarget:m(l),element:m(u),_data:m({},!0),filters:m({},!0)});return c}function H(){return this._value}function M(a){this._value="string"===typeof a&&this.isSynced()?a:this._value;this.refresh()}
function N(){this.element.parentElement||this.unsync();return!!this.element.parentElement}function G(){var a=this;this.target[this.bindProperty]=this.bindText.reduce(function(p,d){return p+("string"===typeof d?d:d.filterNames.reduce(function(d,p){if(void 0!==a.filters){if(void 0!==a.filters[p])return a.filters[p](d);console.warn("there is no filter by the name %o in the data model filters %o",p,Object.keys(a.filters));return d}console.error("Somehow filters object was not added to the mapping via .connect() method, please see dev");
return d},d._value))},"");return this}function Q(a){this._data=a;this.filters=void 0!==a.filters?a.filters:this.filters;a=0;for(var d=this.bindNames.length;a<d;a++)this._data.addDataUpdateListener&&(this._data.exists(this.bindNames[a])||this._data.add(this.bindNames[a],this._value),this._data.addDataUpdatelistener(this.bindNames[a],this.updateDom));this.element.addAttrUpdateListener(this.listener,this.updateData);return this}function R(){for(var a=0,d=this.bindNames.length;a<d;a++)this._data.removeDataUpdateListener&&
this._data.removeDataUpdateListener(this.bindNames[a],this.updateDom);this.element.removeAttrUpdateListener(this.listener,this.updateData);this.bindNames=this.bindText=this.filters=this.element=this._data=null;return this}function O(a){return a.split(new RegExp("("+t.split("").join("\\")+")(.*?)("+u.split("").join("\\")+")","g")).map(function(a,d,n){return n[d-1]===t?t+a+u:a}).filter(function(a,d,n){return 0!==a.length&&a!==t&&a!==u&&0!==a.length})}function F(a){a.filter(function(a){return-1!==a.indexOf(t)&&
-1!==a.indexOf(u)}).map(function(a){return C(a)})}function C(a){return a.replace(new RegExp("["+t+u+"]","g"),"").replace(new RegExp("\\"+A.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function L(a){return-1!==a.indexOf(A)?a.replace(new RegExp("["+u+"]","g"),"").replace(new RegExp("(.*?)(\\"+A.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[]}function K(a){return-1!==a.indexOf("for")?a.replace(new RegExp("["+t+u+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(a){return 0!==
a.length}):[]}function m(a,d,B){return{value:a,writable:!!d,enumerable:!1,configurable:!!B}}function S(a,d){for(var B=y[a],n=0,m=B.length;n<m&&(B[n](d),d._stopPropogation);n++);return d._preventDefault}function I(a){var p=a.match(d).map(function(a){return a.replace(/[<\/>]/g,"")});p.filter(function(a,d){return document.createElement(a)instanceof HTMLUnknownElement&&-1===p.indexOf(a,d+1)&&void 0===E[a]});0!==p.length&&S("unknown",new Event("unknown",p));return p}var E={},d=/(<\/.*?>)/g;P().call();
var t="{{",u="}}",A="|",y={unknown:[]};l.prototype.map=function(a){function d(n){for(var l=0,y=n.length;l<y;l++)if(void 0===n[l].kb_maps){n[l].kb_mapper=a;if(3===n[l].nodeType){var w=n[l],c=m,k=w.textContent,b=w.parentElement instanceof HTMLUnknownElement;if(k.match(new RegExp("(\\"+t.split("").join("\\")+")(.*?)(\\"+u.split("").join("\\")+")","g")))for(var g=b?"component":-1!==k.indexOf("for")&&void 0!==k.indexOf("loop")?"for":"text",w=x(g,k,O(k),b?"":"textContent","textContent",w,w.parentElement),
k=0,b=w.prototype.bindText.length;k<b;k++)0===w.prototype.bindText[k].indexOf(t)&&(g=new w(w.prototype.bindText[k]),void 0===c[g.key]&&(c[g.key]=[]),c[g.key].push(g))}else for(var c=n[l],w=m,k=c.attributes,b=c instanceof HTMLUnknownElement,g=0,h=k.length;g<h;g++)if(k[g].value.match(new RegExp("(\\"+t.split("").join("\\")+")(.*?)(\\"+u.split("").join("\\")+")","g")))for(var e=x(b?"component":"attribute",k[g].value,O(k[g].value),b?"":k[g].name,"value",k[g],c),f=0,z=e.prototype.bindText.length;f<z;f++)if(0===
e.prototype.bindText[f].indexOf(t)){var r=new e(e.prototype.bindText[f]);void 0===w[r.key]&&(w[r.key]=[]);w[r.key].push(r)}n[l].childNodes&&0!==n[l].childNodes.length&&d(n[l].childNodes)}}var m={};d(a.childNodes);return m};l.prototype.addFilter=function(a,d){void 0!==this.maps[a]&&this.maps[a].forEach(function(a){a.filters.push(d)});return this};l.prototype.removeFilter=function(a,d){void 0!==this.maps[a]&&this.maps[a].forEach(function(l){l.filters.splice(this.maps[a].filters.indexOf(d),1)});return this};
l.prototype.swapFilter=function(a,d,l){void 0!==this.maps[a]&&this.maps[a].forEach(function(m){m.filters.splice(this.maps[a].filters.indexOf(d),1,l)});return this};Object.defineProperties(l,{startChars:m(function(a){if(void 0===a)return t;t="string"===typeof a?a:t;return this}),endChars:m(function(a){if(void 0===a)return u;u="string"===typeof a?a:u;return this}),pipeChars:m(function(a){if(void 0===a)return A;A="string"===typeof a?a:A;return this}),getUnknown:m(I),isRegistered:m(function(a){return void 0!==
E[a]}),register:m(function(a,d){void 0===E[a]?(E[a]=d,I(d)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",a);return this}),addEventListener:m(function(a,d){void 0!==y[a]?y[a].push(d):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",a);return this}),removeEventListener:m(function(a,d){if(void 0!==y[a])for(var l=0,m=y[a].length;l<m;l++)y[a][l].toString()===d.toString()&&y[a].splice(l,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",
a);return this})});return l}}(function(){function G(){function l(c,k){var b=c.length,g;for(g=0;g<b&&(c[g](k),void 0===k._stopPropogation);g++);}function x(c,k){var b=c.length,g;for(g=0;g<b&&(k.child=k.target,k.target=c[g].parent,c[g].func(k),void 0===k._stopPropogation);g++);}function H(c,k){for(var b=c.length;0<b;T++)if(c[T].toString()===k.toString())return!0;return!1}function M(c,k,b,g,a,e,d,z){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=
!0};this.value=b;this.oldValue=g;this.target=c;this.attr=k;this.arguments=a;this.action=e;this.child=void 0;this.type=d;this.stopChange=z}function N(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function P(c,k,b,g){var a=c.get,e=c.set,d;return function(c){d=a.call(this);b(this,k,c,d,void 0,
this._stopChange)&&e.call(this,c);this._stopChange||g(this,k,c,d);this._stopChange=void 0}}function Q(c,k,b,a){var d;return function(e){d=c.value;b(this,k,e,d,arguments,this._stopChange)&&(c.value=e);this._stopChange||a(this,k,e,d,arguments);this._stopChange=void 0}}function R(c,k,b,a){var d=c.value,e;return function(){b(this,k,null,null,arguments,this._stopChange)&&(e=d.apply(this,arguments));this._stopChange||a(this,k,null,null,arguments,e);this._stopChange=void 0;return e}}function O(c,k,b,a,d){var e=
d.style,f=k.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),z,r;return{get:function(){return r},set:function(c){z=r;b(d,k,c,z,void 0,this._stopChange)&&(r=c,e.setProperty(f,c));this._stopChange||a(d,k,c,z);this._stopChange=void 0},enumerable:!0,configurable:!0}}function F(c,k,b,a){if("function"!==typeof k)return d;var h=-1!==["value","checked"].indexOf(c),e=-1!==B.indexOf(c),f;if(this.toString()!==d.toString())if(b){var z=this.querySelectorAll("*");b=z.length;for(var r,q=0;q<b;q++){r=z[q].attrListeners();
if(h||"*"===c)void 0!==z[q].addInputBinding&&z[q].addInputBinding(),void 0!==z[q].addInputBoxBinding&&z[q].addInputBoxBinding();if(e)d.injectStyleProperty(z[q],c),f=a?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===c){f=a?"_parentStyleUpdateListeners":"_parentStyleListeners";b=B.length;for(var v=0;v<b;v++)d.injectStyleProperty(z[q],B[v]);void 0===r[f]["*"]&&(r[f]["*"]=[]);r[f]["*"].push({parent:this,func:k})}f=a?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===r[f][c]&&
(r[f][c]=[]);r[f][c].push({parent:this,func:k})}}else{r=this.attrListeners();if(e)f=a?"_styleUpdateListeners":"_styleListeners",d.injectStyleProperty(this,c);else{if(h||"*"===c)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===c){f=a?"_styleUpdateListeners":"_styleListeners";b=B.length;for(q=0;q<b;q++)d.injectStyleProperty(this,B[q]);void 0===r[f][c]&&(r[f][c]=[]);r[f][c].push(k)}f=a?"_attrUpdateListeners":"_attrListeners"}void 0===
r[f][c]&&(r[f][c]=[]);r[f][c].push(k)}else{if(h||"*"===c)for(v=document.querySelectorAll("input, textarea"),b=v.length,q=0;q<b;q++)void 0!==v[q].addInputBinding&&v[q].addInputBinding(),void 0!==v[q].addInputBoxBinding&&v[q].addInputBoxBinding();if(e){e=Array.prototype.slice.call(document.body.querySelectorAll("*"));b=e.length+1;e.unshift(document.body);for(q=0;q<b;q++)d.injectStyleProperty(e[q],c);f=a?y:A}else{if("*"===c){e=Array.prototype.slice.call(document.body.querySelectorAll("*"));b=e.length+
1;h=B.length;e.unshift(document.body);for(q=0;q<b;q++)for(v=0;v<h;v++)d.injectStyleProperty(e[q],B[v]);f=a?y:A;void 0===f[c]&&(f[c]=[]);f[c].push(k)}f=a?u:t}void 0===f[c]&&(f[c]=[]);f[c].push(k)}}function C(c,k,b,a){function h(c,a){var b=a[c],d=b.length;for(f=0;f<d;f++)b[f].toString()===k.toString()&&b.splice(f,1)}if("function"!==typeof k)return d;["value","checked"].indexOf(c);var e=-1!==B.indexOf(c),f;if(this.toString()!==d.toString())if(b){b=this.querySelectorAll("*");var z=b.length;e?(e=a?"_childStyleUpdateListeners":
"_childStyleListeners",h(c,this.attrListeners()[e]),e=a?"_parentStyleUpdateListeners":"_parentStyleListeners"):("*"===c&&(e=a?"_childStyleUpdateListeners":"_childStyleListeners",h(c,this.attrListeners()[e])),e=a?"_childAttrUpdateListeners":"_childAttrListeners",h(c,this.attrListeners()[e]),e=a?"_parentAttrUpdateListeners":"_parentAttrListeners");for(f=0;f<z;f++){for(var r=b[f].attrListeners()[e][c],q=r.length,v=0;v<q;v++)r[v].isEqualNode(this)&&r.slice(v,1);if("*"===c)for(listenersStyle=a?"_parentStyleUpdateListeners":
"_parentStyleListeners",r=b[f].attrListeners()[e][c],q=r.length,v=0;v<q;v++)r[v].isEqualNode(this)&&r.slice(v,1)}}else e?e=a?"_styleUpdateListeners":"_styleListeners":("*"===c&&(e=a?"_styleUpdateListeners":"_styleListeners",h(c,this.attrListeners()[e])),e=a?"_attrUpdateListeners":"_attrListeners"),h(c,this.attrListeners()[e]);else e?e=a?y:A:("*"===c&&(e=a?y:A,h(c,e)),e=a?u:t),h(c,e)}function L(c,a){d.addAttrListener.call(this,c,a,!0);return this}function K(c,a){d.addAttrUpdateListener.call(this,c,
a,!0);return this}function m(c,a){d.removeAttrListener.call(this,c,a,!0);return this}function S(c,a){d.removeAttrUpdateListener.call(this,c,a,!0);return this}function I(c,a,b){var d=this.attrListeners();"html"===a&&(a="innerHTML");"events"===a&&(a="onclick");switch(c){case "attr":if(H(d._attrListeners[a],b))return!0;break;case "attrupdate":if(H(d._attrUpdateListeners[a],b))return!0}return!1}function E(){this._stopChange=!0;return this}function d(){function c(c,a){var b,k=a.length;for(b=0;b<k;b++)-1===
c.indexOf(a[b])&&c.push(a[b]);return c}function a(c,b){for(var k=Object.keys(c),d,e,g=0,f=k.length;g<f;g++)if(d=k[g],void 0===b[d])b[d]=c[d].slice();else for(var h=0,l=c[d].length;h<l;h++)e=c[d][h],b[d].push(e)}function b(b){if(3!==b.target.nodeType&&8!==b.target.nodeType){var e=b.target.attrListeners(),g,f=["value","checked"],h=e._attrListeners,l=e._attrUpdateListeners,m=e._parentAttrListeners;g=e._parentAttrUpdateListeners;var n=!1;if(void 0!==t["*"]||void 0!==u["*"])n=!0;if(!0!==n&&void 0!==h["*"]||
void 0!==l["*"]||void 0!==m["*"]||void 0!==g["*"])n=!0;if(!0!==n)for(var p=0;p<f.length;p++)if(void 0!==t[f[p]]||void 0!==u[f[p]]||void 0!==h[f[p]]||void 0!==l[f[p]]||void 0!==m[f[p]]||void 0!==g[f[p]]){n=!0;break}g=n;f=Object.keys(A);h=Object.keys(y);Object.keys(e._styleListeners);Object.keys(e._styleUpdateListeners);l=Object.keys(e._parentStyleListeners);e=Object.keys(e._parentStyleUpdateListeners);m=[];if(0!==f.length||0!==h.length)m=c(m,f),m=c(m,h);if(0!==m.length&&0!==l.length||0!==e.length)m=
c(m,l),m=c(m,e);-1!==m.indexOf("*")&&(m=B);var e=m,f=e.length,w,x,h=[],C,l="outerHTML"===b.attr||"outerText"===b.attr?b.attr:void 0,m=b.target;void 0!==l&&(b.attr="appendChild",b.arguments=[b.target],b.target=b.target.parentElement);if(g){"appendChild"===b.attr&&3!==b.arguments[0].nodeType&&8!==b.arguments[0].nodeType?(h=Array.prototype.slice.call(b.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==b.arguments[0].tagName&&"TEXTAREA"!==b.arguments[0].tagName||h.unshift(b.arguments[0])):h=
Array.prototype.slice.call(b.target.querySelectorAll("input,textarea"));C=h.length;for(var D=0;D<C;D++)void 0!==h[D].addInputBinding&&h[D].addInputBinding(),void 0!==h[D].addInputBoxBinding&&h[D].addInputBoxBinding()}"appendChild"===b.attr&&"#text"!==b.arguments[0].nodeName&&"#comment"!==b.arguments[0].nodeName?(h=Array.prototype.slice.call(b.arguments[0].querySelectorAll("*")),h.unshift(b.arguments[0])):h=Array.prototype.slice.call(b.target.querySelectorAll("*"));g=b.target.__kb._parentAttrListeners;
n=b.target.__kb._parentAttrUpdateListeners;p=b.target.__kb._parentStyleListeners;w=b.target.__kb._parentStyleUpdateListeners;C=h.length;for(D=0;D<C;D++){if(0!==f)for(x=0;x<f;x++)d.injectStyleProperty(h[D],e[x]);x=h[D].attrListeners();a(g,x._parentAttrListeners);a(n,x._parentAttrUpdateListeners);a(p,x._parentStyleListeners);a(w,x._parentStyleUpdateListeners)}void 0!==l&&(b.attr=l,b.target=m,b.arguments=[])}}function g(c){var b=c.target.attributes[c.arguments[0]],a="setAttribute"===c.attr?c.arguments[1]:
"";e(c.target,c.arguments[0],a,void 0!==b?b.value:"",[a])||c.preventDefault()}function h(c){var b=c.target.attributes[c.arguments[0]],a="setAttribute"===c.attr?c.arguments[1]:"";f(c.target,c.arguments[0],a,void 0!==b?b.value:"",[a])}d.injectPrototypes(Node,"Node");d.injectPrototypes(Element,"Element");d.injectPrototypes(HTMLElement,"HTMLElement");d.injectPrototypes(HTMLInputElement,"HTMLInputElement");d.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");d.injectPrototypes(Document,"Document");
var e=J,f=w;d.addAttrUpdateListener("appendChild",b);d.addAttrUpdateListener("removeChild",b);d.addAttrUpdateListener("innerHTML",b);d.addAttrUpdateListener("outerHTML",b);d.addAttrUpdateListener("innerText",b);d.addAttrUpdateListener("outerText",b);d.addAttrUpdateListener("textContent",b);d.addAttrListener("setAttribute",g);d.addAttrListener("removeAttribute",g);d.addAttrUpdateListener("setAttribute",h);d.addAttrUpdateListener("removeAttribute",h);return d}var t={},u={},A={},y={},a={},p="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),
B=Object.getOwnPropertyNames(document.body.style),n=Object.keys(HTMLElement.prototype).filter(function(c){return 0===c.indexOf("on")}).concat(["addEventListener","removeEventListener"]),T,J=function(c,a,b,d,h,e){b=new M(c,a,b,d,h,void 0,"set",e);void 0!==c.__kb&&(d=c.__kb._attrListeners,h=c.__kb._styleListeners,e=c.__kb._parentAttrListeners,c=c.__kb._parentStyleListeners,void 0!==d[a]&&l(d[a],b),void 0===b._stopPropogation&&void 0!==h[a]&&l(h[a],b),void 0===b._stopPropogation&&void 0!==d["*"]&&(l(d["*"],
b),void 0===b._stopPropogation&&l(h["*"],b)),void 0===b._stopPropogation&&void 0!==e[a]&&x(e[a],b),void 0===b._stopPropogation&&void 0!==c[a]&&x(c[a],b),void 0===b._stopPropogation&&void 0!==e["*"]&&(x(e["*"],b),void 0===b._stopPropogation&&x(c["*"],b)));void 0===b._stopPropogation&&void 0!==t[a]&&l(t[a],b);void 0===b._stopPropogation&&void 0!==A[a]&&l(A[a],b);void 0===b._stopPropogation&&void 0!==t["*"]&&(l(t["*"],b),void 0===b._stopPropogation&&l(A["*"],b));return void 0!==b._preventDefault?!1:
!0},w=function(c,a,b,d,h,e){b=new M(c,a,b,d,h,e,"update");void 0!==c.__kb&&(d=c.__kb._attrUpdateListeners,h=c.__kb._styleUpdateListeners,e=c.__kb._parentAttrUpdateListeners,c=c.__kb._parentStyleUpdateListeners,void 0!==d[a]&&l(d[a],b),void 0===b._stopPropogation&&void 0!==h[a]&&l(h[a],b),void 0===b._stopPropogation&&void 0!==d["*"]&&(l(d["*"],b),void 0===b._stopPropogation&&l(h["*"],b)),void 0===b._stopPropogation&&void 0!==e[a]&&x(e[a],b),void 0===b._stopPropogation&&void 0!==c[a]&&x(c[a],b),void 0===
b._stopPropogation&&void 0!==e["*"]&&(x(e["*"],b),void 0===b._stopPropogation&&x(c["*"],b)));void 0===b._stopPropogation&&void 0!==u[a]&&l(u[a],b);void 0===b._stopPropogation&&void 0!==y[a]&&l(y[a],b);void 0===b._stopPropogation&&void 0!==u["*"]&&(l(u["*"],b),void 0===b._stopPropogation&&l(y["*"],b));return void 0!==b._preventDefault?!1:!0};d.injectPrototypeProperty=function(c,k,b,g,h){var e=c.prototype,f=Object.getOwnPropertyDescriptor(e,k);b=b||c.toString().split(/\s+/)[1].split("{")[0].replace("()",
"");var l=a[b];g=g||J;h=h||w;void 0===e.attrListeners&&(e={},e.attrListeners=function(){void 0===this.__kb&&(this.__kb=new N);return this.__kb}.bind(e),e.addAttrListener=d.addAttrListener,e.addAttrUpdateListener=d.addAttrUpdateListener,e.addChildAttrListener=L,e.addChildAttrUpdateListener=K,e.hasListener=I,e.removeAttrListener=d.removeAttrListener,e.removeAttrUpdateListener=d.removeAttrUpdateListener,e.removeChildAttrListener=m,e.removeChildAttrUpdateListener=S,e.stopChange=E);void 0===l&&(a[b]={obj:c,
proto:e,descriptors:{},set:void 0,update:void 0},l=a[b],l.set=g,l.update=h);void 0===l.descriptors[k]&&(l.descriptors[k]=f);f.configurable&&(void 0!==f.set?Object.defineProperty(e,k,{get:f.get,set:P(f,k,g,h),enumerable:!0,configurable:!0}):"function"===typeof f.value?Object.defineProperty(e,k,{value:R(f,k,g,h),writable:!0,enumerable:!0,configurable:!0}):void 0!==f.value&&Object.defineProperty(e,k,{get:function(){return f.value},set:Q(f,k,g,h),enumerable:!0,configurable:!0}));return d};d.injectStyleProperty=
function(c,a,b,g){var h=c.style,e=Object.getOwnPropertyDescriptor(h,a),f=c.attrListeners().injectedStyle;b=b||J;g=g||w;void 0===f&&(c.attrListeners().injectedStyle={obj:c,proto:h,descriptors:{},set:void 0,update:void 0},c.attrListeners().injectedStyle.set=b,c.attrListeners().injectedStyle.update=g,f=c.attrListeners().injectedStyle);void 0===f.descriptors[a]&&(f.descriptors[a]=e);e.configurable&&Object.defineProperty(h,a,O(e,a,b,g,c));return d};d.injectPrototypes=function(c,k,b,g){var h=c.prototype;
k=k||c.toString().split(/\s+/)[1].split("{")[0].replace("()","");var e=a[k],f=Object.getOwnPropertyNames(h);b=b||J;g=g||w;var l;void 0===h.attrListeners&&(h.attrListeners=function(){void 0===this.__kb&&(this.__kb=new N);return this.__kb},h.addAttrListener=d.addAttrListener,h.addAttrUpdateListener=d.addAttrUpdateListener,h.addChildAttrListener=L,h.addChildAttrUpdateListener=K,h.hasListener=I,h.stopChange=E);void 0===e&&(a[k]={obj:c,proto:h,descriptors:{},set:void 0,update:void 0},e=a[k],e.set=b,e.update=
g);l=a[k].descriptors;for(g=0;g<f.length;g+=1)void 0===l[f[g]]&&d.injectPrototypeProperty(c,f[g],k,b,w);if(-1!==f.indexOf("value")){var m=function(c){var a,b,d;if("checkbox"===this.type||"radio"===this.type)a=!0;b=a?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){d=a?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;a&&(e.set(this,"checked",this.checked,b)?e.update(this,"checked",this.checked,b):l.checked.set.call(this,
b));this.value=d;e.set(this,"value",this.value,b)?e.update(this,"value",this.checked,b):l.value.set.call(this,b)}.bind(this),0)};h.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",m)};h.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",m)};h.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=void 0;this.removeEventListener("mouseup",m)};h.addInputBoxBinding=function(){this.attrListeners()._onmousedown=
!0;this.addEventListener("mouseup",m)}}return d};d.addAttrListener=function(c,a,b){if("html"===c){c=0;for(var d=p.length;c<d;c++)F.call(this,p[c],a,b,!1)}else if("events"===c)for(c=0,d=n.length;c<d;c++)F.call(this,n[c],a,b,!1);else F.call(this,c,a,b,!1);return this};d.addAttrUpdateListener=function(c,a,b){if("html"===c){c=0;for(var d=p.length;c<d;c++)F.call(this,p[c],a,b,!0)}else if("events"===c)for(c=0,d=n.length;c<d;c++)F.call(this,n[c],a,b,!0);else F.call(this,c,a,b,!0);return this};d.removeAttrListener=
function(a,d,b){if("html"===a){a=0;for(var g=p.length;a<g;a++)C.call(this,p[a],d,b,!1)}else if("events"===a)for(a=0,g=n.length;a<g;a++)C.call(this,n[a],d,b,!1);else C.call(this,a,d,b,!1);return this};d.removeAttrUpdateListener=function(a,d,b){if("html"===a){a=0;for(var g=p.length;a<g;a++)C.call(this,p[a],d,b,!0)}else if("events"===a)for(a=0,g=n.length;a<g;a++)C.call(this,n[a],d,b,!0);else C.call(this,a,d,b,!0);return this};d.hasListener=function(a,d,b){"html"===d&&(d="innerHTML");"events"===d&&(d=
"onclick");switch(a){case "attr":if(H(t[d],b))return!0;break;case "attrupdate":if(H(u[d],b))return!0}return!1};d.injectedPrototypes=function(){return a};return d}"function"===typeof define&&define.amd&&define("KB",G);return G}());"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return G}):"undefined"!==typeof module&&(module.exports=G);return G}();
