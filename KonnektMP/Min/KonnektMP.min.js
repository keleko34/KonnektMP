var KonnektMP=function(){var G=function(S){return function(){function r(a,m){this.name=a.tagName.toLowerCase();this.template=z[this.name]||'<div class="missing_component">Unknown Component</div>';this.node=a;this.fragment=document.createDocumentFragment();this.wrapper=document.createElement("div");this.wrapper.className="Wrapper Wrapper__"+this.name;m||(this.wrapper.innerHTML=this.template);this.fragment.appendChild(this.wrapper);m||(this.maps=this.map(this.wrapper));m||(this.wrapper.kb_maps=this.maps)}
function w(a,m,f,b,g,c,d,l){function e(b){var g="for"===m?J(b):[],c=this;this.key="for"!==m?K(b):g[0];this.filterNames=M(b);this.component="for"===m?g[1]:void 0;this.id=0;this.isEvent=h;this.__proto__.bindText=this.__proto__.bindText.map(function(g){return g===b?this:g});this.__proto__.bindMaps.push(this);Object.defineProperties(this,{value:{get:this.valget,set:this.valset,enumerable:!0,configurable:!1},_value:k("",!0)});this.updateData=function(b){if(c.isConnected&&c._data){if("object"!==typeof b||
void 0===b.value)b={value:b};"function"===typeof c._data.stopChange&&c._data.stopChange().set(c.key,b.value)}};this.updateDom=function(b){if(c.isSynced()){c.element.stopChange();if("object"!==typeof b||void 0===b.value)b={value:b};c.value=b.value}};this.updateLoop=function(){c.kb_loop&&c.loop(c.kb_loop)}}var h="attribute"===m&&-1!==B.indexOf(d.name)||"component"===m&&d.name&&-1!==B.indexOf(d.name);h&&l.stopChange().removeAttribute(d.name);Object.defineProperties(e.prototype,{valget:k(H),valset:k(N),
refresh:k(G),connect:k(T),deleteMap:k(D),loop:k(O),unsync:k(E),isSynced:k(P),type:k(m),text:k(f,!0),bindText:k(b,!0),bindNames:k("for"===m?[J(b[0])[0]]:Q(b),!0),bindMaps:k([],!0),bindListener:k(h?g.toLowerCase():g),bindProperty:k(h?d.name.toLowerCase():c),bindTarget:k(d,!0),element:k(l,!0),_data:k({},!0),filters:k({},!0),maps:k(a,!0),loop:k(O)});return e}function H(){return this._value}function N(a){this._value=this.isSynced()?a:this._value;this.refresh()}function P(){return this.element.parentElement?
!!this.element.parentElement:this.unsync()}function R(a,m){function f(b,g){return g.reduce(function(g,d){return g+("string"===typeof d?d:0===d.filterNames.length?d._value:d.filterNames.reduce(function(g,c){if(void 0!==b.filters){if(void 0!==b.filters[c])return b.filters[c](g);console.warn("there is no filter by the name %o in the data model filters %o",c,Object.keys(b.filters));return g}console.error("Somehow filters object was not added to the mapping via .connect() method, please see dev");return g},
d._value))},"")}return 1===m.length?"string"===typeof m[0]._value?f(a,m):m[0]._value:f(a,m)}function G(){"for"!==this.type&&(this.isEvent?this.element[this.bindProperty]=this.bindText[0]._value:"component"===this.type?(this.element.k_post||(this.element.k_post={}),this.element.k_post["textContent"===this.bindProperty?"innerHTML":this.bindTarget.name]=R(this,this.bindText)):this.bindTarget[this.bindProperty]=R(this,this.bindText));return this}function T(a){this._data=a;this.filters=void 0!==a.filters?
a.filters:this.filters;a=0;for(var m=this.bindNames.length;a<m;a++){var f=this.bindNames[a],b=this.bindMaps[a];b._data.addDataUpdateListener&&(b._data.exists(f)||(console.warn("No property by the name %o exists on this data set %o",f,b._data),b._data.add(f,b._value)),b.value=b._data.get(f),"component"!==b.type&&"for"!==b.type?(b.isConnected=!0,b._data.addDataUpdateListener(f,b.updateDom)):"for"===b.type&&b._value.addDataUpdateListener&&b._value.addDataUpdateListener("*",b.updateLoop).addDataCreateListener(b.updateLoop).addDataDeleteListener(b.updateLoop))}1!==
this.bindText.length||"text"!==this.type&&"attribute"!==this.type&&!this.isEvent||this.element.addAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);return this}function O(a){this.kb_loop=a;this.element.stopChange().innerHTML="";for(var m=this._value,f=0,b=this.filterNames.length;f<b;f++)m=this.filters[this.filterNames[f]](m);m=0;for(f=this._value.length;m<f;m++){var b=this._value[m],g=document.createElement(this.component);g.k_post=b;g.kb_wrapper=this.element.kb_wrapper;
this.element.stopChange().appendChild(g);"function"===typeof a&&a(g)}}function D(){this.maps[this.key].splice(this.id,1);return this}function E(){for(var a=0,m=this.bindNames.length;a<m;a++)this._data.removeDataUpdateListener&&(this._data.removeDataUpdateListener(this.bindNames[a],this.updateDom),this._value.removeDataUpdateListener("*",this.updateLoop).removeDataCreateListener(this.updateLoop).removeDataDeleteListener(this.updateLoop));this.element.removeAttrUpdateListener("text"===this.type?"html":
this.bindListener,this.updateData);this.bindMaps=this.maps=this.bindNames=this.filters=this._data=null;this.__proto__._data=null;this.__proto__.element=null;this.__proto__.filters=null;this.__proto__.bindTarget=null;this.__proto__.bindText=null;this.__proto__.bindNames=null;this.__proto__.element=null;this.__proto__.maps=null;this.__proto__.bindMaps=null;return!1}function L(a){return a.split(new RegExp("("+v.split("").join("\\")+")(.*?)("+t.split("").join("\\")+")","g")).map(function(a,f,b){return b[f-
1]===v?v+a+t:a}).filter(function(a,f,b){return 0!==a.length&&a!==v&&a!==t&&0!==a.length})}function Q(a){return a.filter(function(a){return-1!==a.indexOf(v)&&-1!==a.indexOf(t)}).map(function(a){return K(a)})}function K(a){return a.replace(new RegExp("["+v+t+"]","g"),"").replace(new RegExp("\\"+y.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function M(a){return-1!==a.indexOf(y)?a.replace(new RegExp("["+t+"]","g"),"").replace(new RegExp("(.*?)(\\"+y.split("").join("\\")+")"),"").replace(/\s/g,
"").split(","):[]}function J(a){return-1!==a.indexOf("for")?a.replace(new RegExp("["+v+t+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(a){return 0!==a.length}):[]}function k(a,f,k){return{value:a,writable:!!f,enumerable:!1,configurable:!!k}}function f(a,f){for(var k=x[a],b=0,g=k.length;b<g&&(k[b](f),f._stopPropogation);b++);return f._preventDefault}function A(a){var m=a.match(C).map(function(a){return a.replace(/[<\/>]/g,"")});m.filter(function(a,b){return document.createElement(a)instanceof
HTMLUnknownElement&&-1===m.indexOf(a,b+1)&&void 0===z[a]});0!==m.length&&f("unknown",new Event("unknown",m));return m}var z={},C=/(<\/.*?>)/g;S().call();var B=Object.keys(HTMLElement.prototype).filter(function(a){return 0===a.indexOf("on")}),v="{{",t="}}",y="|",x={unknown:[]};r.prototype.map=function(a){function f(b){for(var g=0,c=b.length;g<c;g++)if(void 0===b[g].kb_maps&&8!==b[g].nodeType){b[g].kb_mapper=a;if(3===b[g].nodeType){var d=b[g],l=k,e=d.textContent,h=d.parentElement instanceof HTMLUnknownElement;
if(e.match(new RegExp("(\\"+v.split("").join("\\")+")(.*?)(\\"+t.split("").join("\\")+")","g")))for(var q=h?"component":-1!==e.indexOf("for")&&void 0!==e.indexOf("loop")?"for":"text",d=w(l,q,e,L(e),h?"":"textContent","textContent",d,d.parentElement),e=0,h=d.prototype.bindText.length;e<h;e++){var q=e,n=d.prototype.bindText[e];0===n.indexOf(v)&&(n=new d(n),d.prototype.bindText[q]=n,void 0===l[n.key]&&(l[n.key]=[]),n.id=l[n.key].length,l[n.key].push(n))}}else for(l=b[g],d=k,e=l.attributes,h=l instanceof
HTMLUnknownElement,q=0,n=e.length;q<n;q++){n=e.length;if(q>=n)break;var p=e[q];if(p.value.match(new RegExp("(\\"+v.split("").join("\\")+")(.*?)(\\"+t.split("").join("\\")+")","g")))for(var p=w(d,h?"component":"attribute",p.value,L(p.value),h?"":p.name,"value",p,l),u=0,U=p.prototype.bindText.length;u<U;u++){var r=u,F=p.prototype.bindText[u];0===F.indexOf(v)&&(F=new p(F),p.prototype.bindText[r]=F,void 0===d[F.key]&&(d[F.key]=[]),d[F.key].push(F))}}b[g].childNodes&&0!==b[g].childNodes.length&&f(b[g].childNodes)}}
var k={};f(a.childNodes);return k};r.prototype.addFilter=function(a,f){void 0!==this.maps[a]&&this.maps[a].forEach(function(a){a.filters.push(f);a.refresh()});return this};r.prototype.removeFilter=function(a,f){void 0!==this.maps[a]&&this.maps[a].forEach(function(k){k.filters.splice(this.maps[a].filters.indexOf(f),1);k.refresh()});return this};r.prototype.swapFilter=function(a,f,k){void 0!==this.maps[a]&&this.maps[a].forEach(function(b){b.filters.splice(this.maps[a].filters.indexOf(f),1,k);b.refresh()});
return this};Object.defineProperties(r,{startChars:k(function(a){if(void 0===a)return v;v="string"===typeof a?a:v;return this}),endChars:k(function(a){if(void 0===a)return t;t="string"===typeof a?a:t;return this}),pipeChars:k(function(a){if(void 0===a)return y;y="string"===typeof a?a:y;return this}),getUnknown:k(A),isRegistered:k(function(a){return void 0!==z[a]}),register:k(function(a,f){void 0===z[a]?(z[a]=f,A(f)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",
a);return this}),addEventListener:k(function(a,f){void 0!==x[a]?x[a].push(f):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",a);return this}),removeEventListener:k(function(a,f){if(void 0!==x[a])for(var k=0,b=x[a].length;k<b;k++)x[a][k].toString()===f.toString()&&x[a].splice(k,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",a);return this})});return r}}(function(){function G(){function r(b,g){var c=
b.length,d;for(d=0;d<c&&(b[d](g),void 0===g._stopPropogation);d++);}function w(b,g){var c=b.length,d;for(d=0;d<c&&(g.child=g.target,g.target=b[d].parent,b[d].func(g),void 0===g._stopPropogation);d++);}function H(b,g){for(var c=b.length;0<c;a++)if(b[a].toString()===g.toString())return!0;return!1}function N(b,g,c,d,a,e,f,q){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=c;this.oldValue=d;this.target=b;this.attr=g;this.arguments=
a;this.action=e;this.child=void 0;this.type=f;this.stopChange=q}function P(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function R(b,g,c,d){var a=b.get,e=b.set,f;return function(b){f=a.call(this);c(this,g,b,f,void 0,this._stopChange)&&e.call(this,b);this._stopChange||d(this,g,b,f);this._stopChange=
void 0}}function S(b,g,c,d){var a;return function(e){a=b.value;c(this,g,e,a,arguments,this._stopChange)&&(b.value=e);this._stopChange||d(this,g,e,a,arguments);this._stopChange=void 0}}function T(b,g,c,d){var a=b.value,e;return function(){c(this,g,null,null,arguments,this._stopChange)&&(e=a.apply(this,arguments));this._stopChange||d(this,g,null,null,arguments,e);this._stopChange=void 0;return e}}function O(b,g,c,d,a){var e=a.style,f=g.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),q,n;return{get:function(){return n},
set:function(b){q=n;c(a,g,b,q,void 0,this._stopChange)&&(n=b,e.setProperty(f,b));this._stopChange||d(a,g,b,q);this._stopChange=void 0},enumerable:!0,configurable:!0}}function D(b,g,c,d){if("function"!==typeof g)return f;var a=-1!==["value","checked"].indexOf(b),e=-1!==y.indexOf(b),h;if(this.toString()!==f.toString())if(c){var q=this.querySelectorAll("*");c=q.length;for(var n,p=0;p<c;p++){n=q[p].attrListeners();if(a||"*"===b)void 0!==q[p].addInputBinding&&q[p].addInputBinding(),void 0!==q[p].addInputBoxBinding&&
q[p].addInputBoxBinding();if(e)f.injectStyleProperty(q[p],b),h=d?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===b){h=d?"_parentStyleUpdateListeners":"_parentStyleListeners";c=y.length;for(var u=0;u<c;u++)f.injectStyleProperty(q[p],y[u]);void 0===n[h]["*"]&&(n[h]["*"]=[]);n[h]["*"].push({parent:this,func:g})}h=d?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===n[h][b]&&(n[h][b]=[]);n[h][b].push({parent:this,func:g})}}else{n=this.attrListeners();if(e)h=d?"_styleUpdateListeners":
"_styleListeners",f.injectStyleProperty(this,b);else{if(a||"*"===b)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===b){h=d?"_styleUpdateListeners":"_styleListeners";c=y.length;for(p=0;p<c;p++)f.injectStyleProperty(this,y[p]);void 0===n[h][b]&&(n[h][b]=[]);n[h][b].push(g)}h=d?"_attrUpdateListeners":"_attrListeners"}void 0===n[h][b]&&(n[h][b]=[]);n[h][b].push(g)}else{if(a||"*"===b)for(u=document.querySelectorAll("input, textarea"),
c=u.length,p=0;p<c;p++)void 0!==u[p].addInputBinding&&u[p].addInputBinding(),void 0!==u[p].addInputBoxBinding&&u[p].addInputBoxBinding();if(e){e=Array.prototype.slice.call(document.body.querySelectorAll("*"));c=e.length+1;e.unshift(document.body);for(p=0;p<c;p++)f.injectStyleProperty(e[p],b);h=d?B:C}else{if("*"===b){e=Array.prototype.slice.call(document.body.querySelectorAll("*"));c=e.length+1;a=y.length;e.unshift(document.body);for(p=0;p<c;p++)for(u=0;u<a;u++)f.injectStyleProperty(e[p],y[u]);h=d?
B:C;void 0===h[b]&&(h[b]=[]);h[b].push(g)}h=d?z:A}void 0===h[b]&&(h[b]=[]);h[b].push(g)}}function E(b,g,c,a){function l(b,c){var a=c[b],d=a.length;for(h=0;h<d;h++)a[h].toString()===g.toString()&&a.splice(h,1)}if("function"!==typeof g)return f;["value","checked"].indexOf(b);var e=-1!==y.indexOf(b),h;if(this.toString()!==f.toString())if(c){c=this.querySelectorAll("*");var q=c.length;e?(e=a?"_childStyleUpdateListeners":"_childStyleListeners",l(b,this.attrListeners()[e]),e=a?"_parentStyleUpdateListeners":
"_parentStyleListeners"):("*"===b&&(e=a?"_childStyleUpdateListeners":"_childStyleListeners",l(b,this.attrListeners()[e])),e=a?"_childAttrUpdateListeners":"_childAttrListeners",l(b,this.attrListeners()[e]),e=a?"_parentAttrUpdateListeners":"_parentAttrListeners");for(h=0;h<q;h++){for(var n=c[h].attrListeners()[e][b],p=n.length,u=0;u<p;u++)n[u].isEqualNode(this)&&n.slice(u,1);if("*"===b)for(listenersStyle=a?"_parentStyleUpdateListeners":"_parentStyleListeners",n=c[h].attrListeners()[e][b],p=n.length,
u=0;u<p;u++)n[u].isEqualNode(this)&&n.slice(u,1)}}else e?e=a?"_styleUpdateListeners":"_styleListeners":("*"===b&&(e=a?"_styleUpdateListeners":"_styleListeners",l(b,this.attrListeners()[e])),e=a?"_attrUpdateListeners":"_attrListeners"),l(b,this.attrListeners()[e]);else e?e=a?B:C:("*"===b&&(e=a?B:C,l(b,e)),e=a?z:A),l(b,e)}function L(b,g){f.addAttrListener.call(this,b,g,!0);return this}function Q(b,g){f.addAttrUpdateListener.call(this,b,g,!0);return this}function K(b,g){f.removeAttrListener.call(this,
b,g,!0);return this}function M(b,g){f.removeAttrUpdateListener.call(this,b,g,!0);return this}function J(b,g,c){var a=this.attrListeners();"html"===g&&(g="innerHTML");"events"===g&&(g="onclick");switch(b){case "attr":if(H(a._attrListeners[g],c))return!0;break;case "attrupdate":if(H(a._attrUpdateListeners[g],c))return!0}return!1}function k(){this._stopChange=!0;return this}function f(){function b(b,g){var a,c=g.length;for(a=0;a<c;a++)-1===b.indexOf(g[a])&&b.push(g[a]);return b}function g(b,g){for(var a=
Object.keys(b),c,e,d=0,f=a.length;d<f;d++)if(c=a[d],void 0===g[c])g[c]=b[c].slice();else for(var h=0,l=b[c].length;h<l;h++)e=b[c][h],g[c].push(e)}function c(a){if(3!==a.target.nodeType&&8!==a.target.nodeType){var c=a.target.attrListeners(),e,d=["value","checked"],h=c._attrListeners,l=c._attrUpdateListeners,k=c._parentAttrListeners;e=c._parentAttrUpdateListeners;var m=!1;if(void 0!==A["*"]||void 0!==z["*"])m=!0;if(!0!==m&&void 0!==h["*"]||void 0!==l["*"]||void 0!==k["*"]||void 0!==e["*"])m=!0;if(!0!==
m)for(var r=0;r<d.length;r++)if(void 0!==A[d[r]]||void 0!==z[d[r]]||void 0!==h[d[r]]||void 0!==l[d[r]]||void 0!==k[d[r]]||void 0!==e[d[r]]){m=!0;break}e=m;d=Object.keys(C);h=Object.keys(B);Object.keys(c._styleListeners);Object.keys(c._styleUpdateListeners);l=Object.keys(c._parentStyleListeners);c=Object.keys(c._parentStyleUpdateListeners);k=[];if(0!==d.length||0!==h.length)k=b(k,d),k=b(k,h);if(0!==k.length&&0!==l.length||0!==c.length)k=b(k,l),k=b(k,c);-1!==k.indexOf("*")&&(k=y);var c=k,d=c.length,
v,t,h=[],x,l="outerHTML"===a.attr||"outerText"===a.attr?a.attr:void 0,k=a.target;void 0!==l&&(a.attr="appendChild",a.arguments=[a.target],a.target=a.target.parentElement);if(e){"appendChild"===a.attr&&3!==a.arguments[0].nodeType&&8!==a.arguments[0].nodeType?(h=Array.prototype.slice.call(a.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==a.arguments[0].tagName&&"TEXTAREA"!==a.arguments[0].tagName||h.unshift(a.arguments[0])):h=Array.prototype.slice.call(a.target.querySelectorAll("input,textarea"));
x=h.length;for(var w=0;w<x;w++)void 0!==h[w].addInputBinding&&h[w].addInputBinding(),void 0!==h[w].addInputBoxBinding&&h[w].addInputBoxBinding()}"appendChild"===a.attr&&"#text"!==a.arguments[0].nodeName&&"#comment"!==a.arguments[0].nodeName?(h=Array.prototype.slice.call(a.arguments[0].querySelectorAll("*")),h.unshift(a.arguments[0])):h=Array.prototype.slice.call(a.target.querySelectorAll("*"));e=a.target.__kb._parentAttrListeners;m=a.target.__kb._parentAttrUpdateListeners;r=a.target.__kb._parentStyleListeners;
v=a.target.__kb._parentStyleUpdateListeners;x=h.length;for(w=0;w<x;w++){if(0!==d)for(t=0;t<d;t++)f.injectStyleProperty(h[w],c[t]);t=h[w].attrListeners();g(e,t._parentAttrListeners);g(m,t._parentAttrUpdateListeners);g(r,t._parentStyleListeners);g(v,t._parentStyleUpdateListeners)}void 0!==l&&(a.attr=l,a.target=k,a.arguments=[])}}function a(b){var c=b.target.attributes[b.arguments[0]],g="setAttribute"===b.attr?b.arguments[1]:"";e(b.target,b.arguments[0],g,void 0!==c?c.value:"",[g])||b.preventDefault()}
function l(b){var a=b.target.attributes[b.arguments[0]],c="setAttribute"===b.attr?b.arguments[1]:"";h(b.target,b.arguments[0],c,void 0!==a?a.value:"",[c])}f.injectPrototypes(Node,"Node");f.injectPrototypes(Element,"Element");f.injectPrototypes(HTMLElement,"HTMLElement");f.injectPrototypes(HTMLInputElement,"HTMLInputElement");f.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");f.injectPrototypes(Document,"Document");var e=m,h=I;f.addAttrUpdateListener("appendChild",c);f.addAttrUpdateListener("removeChild",
c);f.addAttrUpdateListener("innerHTML",c);f.addAttrUpdateListener("outerHTML",c);f.addAttrUpdateListener("innerText",c);f.addAttrUpdateListener("outerText",c);f.addAttrUpdateListener("textContent",c);f.addAttrListener("setAttribute",a);f.addAttrListener("removeAttribute",a);f.addAttrUpdateListener("setAttribute",l);f.addAttrUpdateListener("removeAttribute",l);return f}var A={},z={},C={},B={},v={},t="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),
y=Object.getOwnPropertyNames(document.body.style),x=Object.keys(HTMLElement.prototype).filter(function(b){return 0===b.indexOf("on")}).concat(["addEventListener","removeEventListener"]),a,m=function(b,a,c,d,f,e){c=new N(b,a,c,d,f,void 0,"set",e);void 0!==b.__kb&&(d=b.__kb._attrListeners,f=b.__kb._styleListeners,e=b.__kb._parentAttrListeners,b=b.__kb._parentStyleListeners,void 0!==d[a]&&r(d[a],c),void 0===c._stopPropogation&&void 0!==f[a]&&r(f[a],c),void 0===c._stopPropogation&&void 0!==d["*"]&&(r(d["*"],
c),void 0===c._stopPropogation&&r(f["*"],c)),void 0===c._stopPropogation&&void 0!==e[a]&&w(e[a],c),void 0===c._stopPropogation&&void 0!==b[a]&&w(b[a],c),void 0===c._stopPropogation&&void 0!==e["*"]&&(w(e["*"],c),void 0===c._stopPropogation&&w(b["*"],c)));void 0===c._stopPropogation&&void 0!==A[a]&&r(A[a],c);void 0===c._stopPropogation&&void 0!==C[a]&&r(C[a],c);void 0===c._stopPropogation&&void 0!==A["*"]&&(r(A["*"],c),void 0===c._stopPropogation&&r(C["*"],c));return void 0!==c._preventDefault?!1:
!0},I=function(b,a,c,d,f,e){c=new N(b,a,c,d,f,e,"update");void 0!==b.__kb&&(d=b.__kb._attrUpdateListeners,f=b.__kb._styleUpdateListeners,e=b.__kb._parentAttrUpdateListeners,b=b.__kb._parentStyleUpdateListeners,void 0!==d[a]&&r(d[a],c),void 0===c._stopPropogation&&void 0!==f[a]&&r(f[a],c),void 0===c._stopPropogation&&void 0!==d["*"]&&(r(d["*"],c),void 0===c._stopPropogation&&r(f["*"],c)),void 0===c._stopPropogation&&void 0!==e[a]&&w(e[a],c),void 0===c._stopPropogation&&void 0!==b[a]&&w(b[a],c),void 0===
c._stopPropogation&&void 0!==e["*"]&&(w(e["*"],c),void 0===c._stopPropogation&&w(b["*"],c)));void 0===c._stopPropogation&&void 0!==z[a]&&r(z[a],c);void 0===c._stopPropogation&&void 0!==B[a]&&r(B[a],c);void 0===c._stopPropogation&&void 0!==z["*"]&&(r(z["*"],c),void 0===c._stopPropogation&&r(B["*"],c));return void 0!==c._preventDefault?!1:!0};f.injectPrototypeProperty=function(b,a,c,d,l){var e=b.prototype,h=Object.getOwnPropertyDescriptor(e,a);c=c||b.toString().split(/\s+/)[1].split("{")[0].replace("()",
"");var q=v[c];d=d||m;l=l||I;void 0===e.attrListeners&&(e={},e.attrListeners=function(){void 0===this.__kb&&(this.__kb=new P);return this.__kb}.bind(e),e.addAttrListener=f.addAttrListener,e.addAttrUpdateListener=f.addAttrUpdateListener,e.addChildAttrListener=L,e.addChildAttrUpdateListener=Q,e.hasListener=J,e.removeAttrListener=f.removeAttrListener,e.removeAttrUpdateListener=f.removeAttrUpdateListener,e.removeChildAttrListener=K,e.removeChildAttrUpdateListener=M,e.stopChange=k);void 0===q&&(v[c]={obj:b,
proto:e,descriptors:{},set:void 0,update:void 0},q=v[c],q.set=d,q.update=l);void 0===q.descriptors[a]&&(q.descriptors[a]=h);h.configurable&&(void 0!==h.set?Object.defineProperty(e,a,{get:h.get,set:R(h,a,d,l),enumerable:!0,configurable:!0}):"function"===typeof h.value?Object.defineProperty(e,a,{value:T(h,a,d,l),writable:!0,enumerable:!0,configurable:!0}):void 0!==h.value&&Object.defineProperty(e,a,{get:function(){return h.value},set:S(h,a,d,l),enumerable:!0,configurable:!0}));return f};f.injectStyleProperty=
function(b,a,c,d){var k=b.style,e=Object.getOwnPropertyDescriptor(k,a),h=b.attrListeners().injectedStyle;c=c||m;d=d||I;void 0===h&&(b.attrListeners().injectedStyle={obj:b,proto:k,descriptors:{},set:void 0,update:void 0},b.attrListeners().injectedStyle.set=c,b.attrListeners().injectedStyle.update=d,h=b.attrListeners().injectedStyle);void 0===h.descriptors[a]&&(h.descriptors[a]=e);e.configurable&&Object.defineProperty(k,a,O(e,a,c,d,b));return f};f.injectPrototypes=function(b,a,c,d){var l=b.prototype;
a=a||b.toString().split(/\s+/)[1].split("{")[0].replace("()","");var e=v[a],h=Object.getOwnPropertyNames(l);c=c||m;d=d||I;var q;void 0===l.attrListeners&&(l.attrListeners=function(){void 0===this.__kb&&(this.__kb=new P);return this.__kb},l.addAttrListener=f.addAttrListener,l.addAttrUpdateListener=f.addAttrUpdateListener,l.addChildAttrListener=L,l.addChildAttrUpdateListener=Q,l.removeAttrListener=f.removeAttrListener,l.removeAttrUpdateListener=f.removeAttrUpdateListener,l.removeChildAttrListener=K,
l.removeChildAttrUpdateListener=M,l.hasListener=J,l.stopChange=k);void 0===e&&(v[a]={obj:b,proto:l,descriptors:{},set:void 0,update:void 0},e=v[a],e.set=c,e.update=d);q=v[a].descriptors;for(d=0;d<h.length;d+=1)void 0===q[h[d]]&&f.injectPrototypeProperty(b,h[d],a,c,I);if(-1!==h.indexOf("value")){var n=function(b){var a,c,d;if("checkbox"===this.type||"radio"===this.type)a=!0;c=a?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){d=a?"string"===typeof this.checked?
this.checked:this.checked?"true":"false":this.value;a&&(e.set(this,"checked",this.checked,c)?e.update(this,"checked",this.checked,c):q.checked.set.call(this,c));this.value=d;e.set(this,"value",this.value,c)?e.update(this,"value",this.value,c):q.value.set.call(this,c)}.bind(this),0)};l.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",n)};l.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",n)};l.removeInputBoxBinding=
function(){this.attrListeners()._onmousedown=void 0;this.removeEventListener("mouseup",n)};l.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",n)}}return f};f.addAttrListener=function(b,a,c){if("html"===b){b=0;for(var d=t.length;b<d;b++)D.call(this,t[b],a,c,!1)}else if("events"===b)for(b=0,d=x.length;b<d;b++)D.call(this,x[b],a,c,!1);else D.call(this,b,a,c,!1);return this};f.addAttrUpdateListener=function(b,a,c){if("html"===b){b=0;for(var d=t.length;b<
d;b++)D.call(this,t[b],a,c,!0)}else if("events"===b)for(b=0,d=x.length;b<d;b++)D.call(this,x[b],a,c,!0);else D.call(this,b,a,c,!0);return this};f.removeAttrListener=function(b,a,c){if("html"===b){b=0;for(var d=t.length;b<d;b++)E.call(this,t[b],a,c,!1)}else if("events"===b)for(b=0,d=x.length;b<d;b++)E.call(this,x[b],a,c,!1);else E.call(this,b,a,c,!1);return this};f.removeAttrUpdateListener=function(b,a,c){if("html"===b){b=0;for(var d=t.length;b<d;b++)E.call(this,t[b],a,c,!0)}else if("events"===b)for(b=
0,d=x.length;b<d;b++)E.call(this,x[b],a,c,!0);else E.call(this,b,a,c,!0);return this};f.hasListener=function(b,a,c){"html"===a&&(a="innerHTML");"events"===a&&(a="onclick");switch(b){case "attr":if(H(A[a],c))return!0;break;case "attrupdate":if(H(z[a],c))return!0}return!1};f.injectedPrototypes=function(){return v};return f}"function"===typeof define&&define.amd&&define("KB",G);return G}());"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],
function(){return G}):"undefined"!==typeof module&&(module.exports=G);return G}();
