var KonnektMP=function(){var H=function(T){return function(){function t(b,m){this.name=b.tagName.toLowerCase();this.template=z[this.name]||'<div class="missing_component">Unknown Component</div>';this.node=b;this.fragment=document.createDocumentFragment();this.wrapper=document.createElement("div");this.wrapper.className="Wrapper Wrapper__"+this.name;m||(this.wrapper.innerHTML=this.template);this.fragment.appendChild(this.wrapper);m||(this.maps=this.map(this.wrapper));m||(this.wrapper.kb_maps=this.maps)}
function x(b,m,d,a,f,c,h,k){function e(a){var f="for"===m?K(a):[],c=this;this.key="for"!==m?L(a):f[0];this.filterNames=O(a);this.component="for"===m?f[1]:void 0;this.id=0;this.isEvent=g;this.isInput=q;this.__proto__.bindText=this.__proto__.bindText.map(function(f){return f===a?this:f});this.__proto__.bindMaps.push(this);Object.defineProperties(this,{value:{get:this.valget,set:this.valset,enumerable:!0,configurable:!1},_value:l("",!0)});this.updateData=function(a){if(c.isConnected&&c._data){if("object"!==
typeof a||void 0===a.value)a={value:a};"function"===typeof c._data.stopChange&&c._data.stopChange().set(c.key,a.value)}};this.updateDom=function(a){if(c.isSynced()){c.element.stopChange();if("object"!==typeof a||void 0===a.value)a={value:a};c.value=a.value}};this.updateLoop=function(){c.kb_loop&&c.loop(c.kb_loop)}}var g="attribute"===m&&-1!==B.indexOf(h.name)||"component"===m&&h.name&&-1!==B.indexOf(h.name),q="input"===k.tagName.toLowerCase();g&&k.stopChange().removeAttribute(h.name);Object.defineProperties(e.prototype,
{valget:l(I),valset:l(P),refresh:l(H),connect:l(U),deleteMap:l(E),loop:l(Q),unsync:l(F),isSynced:l(R),type:l(m),text:l(d,!0),bindText:l(a,!0),bindNames:l("for"===m?[K(a[0])[0]]:S(a),!0),bindMaps:l([],!0),bindListener:l(g?f.toLowerCase():f),bindProperty:l(g?h.name.toLowerCase():c),bindTarget:l(h,!0),element:l(k,!0),_data:l({},!0),filters:l({},!0),maps:l(b,!0),loop:l(Q)});return e}function I(){return this._value}function P(b){this._value=this.isSynced()?b:this._value;this.refresh()}function R(){return this.element.parentElement?
!!this.element.parentElement:this.unsync()}function M(b,m){function d(a,f){return f.reduce(function(f,h){return f+("string"===typeof h?h:0===h.filterNames.length?h._value:h.filterNames.reduce(function(f,c){if(void 0!==a.filters){if(void 0!==a.filters[c])return a.filters[c](f);console.warn("there is no filter by the name %o in the data model filters %o",c,Object.keys(a.filters));return f}console.error("Somehow filters object was not added to the mapping via .connect() method, please see dev");return f},
h._value))},"")}return 1===m.length?"string"===typeof m[0]._value?d(b,m):m[0]._value:d(b,m)}function H(){if("for"!==this.type)if(this.isEvent)this.element.stopChange()[this.bindProperty]=this.bindText[0]._value;else if("component"===this.type)this.element.k_post||(this.element.k_post={}),this.element.k_post["textContent"===this.bindProperty?"innerHTML":this.bindTarget.name]=M(this,this.bindText);else if("innerHTML"===this.key){this.bindTarget[this.bindProperty]="";for(var b=0,m=this._value.length;b<
m;b++)this.element.stopChange().appendChild(this._value[b])}else this.bindTarget[this.bindProperty]=M(this,this.bindText),this.isInput&&(this.element.stopChange()[this.bindTarget.name]=M(this,this.bindText));return this}function U(b){this._data=b;this.filters=void 0!==b.filters?b.filters:this.filters;b=0;for(var m=this.bindNames.length;b<m;b++){var d=this.bindNames[b],a=this.bindMaps[b];a._data.addDataUpdateListener&&(a._data.exists(d)||(console.warn("No property by the name %o exists on this data set %o",
d,a._data),a._data.add(d,a._value)),a.value=a._data.get(d),"component"!==a.type&&"for"!==a.type?(a.isConnected=!0,a._data.addDataUpdateListener(d,a.updateDom)):"for"===a.type&&a._value.addDataUpdateListener&&a._value.addDataUpdateListener("*",a.updateLoop).addDataCreateListener(a.updateLoop).addDataDeleteListener(a.updateLoop))}1!==this.bindText.length||"text"!==this.type&&"attribute"!==this.type&&!this.isEvent||this.element.addAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);
return this}function Q(b){this.kb_loop=b;this.element.stopChange().innerHTML="";for(var m=this._value,d=0,a=this.filterNames.length;d<a;d++)m=this.filters[this.filterNames[d]](m);m=0;for(d=this._value.length;m<d;m++){var a=this._value[m],f=document.createElement(this.component);f.k_post=a;f.kb_wrapper=this.element.kb_wrapper;this.element.stopChange().appendChild(f);"function"===typeof b&&b(f)}}function E(){this.maps[this.key].splice(this.id,1);return this}function F(){for(var b=0,m=this.bindNames.length;b<
m;b++)this._data.removeDataUpdateListener&&(this._data.removeDataUpdateListener(this.bindNames[b],this.updateDom),this._value.removeDataUpdateListener("*",this.updateLoop).removeDataCreateListener(this.updateLoop).removeDataDeleteListener(this.updateLoop));this.element.removeAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);this.bindMaps=this.maps=this.bindNames=this.filters=this._data=null;this.__proto__._data=null;this.__proto__.element=null;this.__proto__.filters=
null;this.__proto__.bindTarget=null;this.__proto__.bindText=null;this.__proto__.bindNames=null;this.__proto__.element=null;this.__proto__.maps=null;this.__proto__.bindMaps=null;return!1}function N(b){return b.split(new RegExp("("+r.split("").join("\\")+")(.*?)("+w.split("").join("\\")+")","g")).map(function(b,d,a){return a[d-1]===r?r+b+w:b}).filter(function(b,d,a){return 0!==b.length&&b!==r&&b!==w&&0!==b.length})}function S(b){return b.filter(function(b){return-1!==b.indexOf(r)&&-1!==b.indexOf(w)}).map(function(b){return L(b)})}
function L(b){return b.replace(new RegExp("["+r+w+"]","g"),"").replace(new RegExp("\\"+y.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function O(b){return-1!==b.indexOf(y)?b.replace(new RegExp("["+w+"]","g"),"").replace(new RegExp("(.*?)(\\"+y.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[]}function K(b){return-1!==b.indexOf("for")?b.replace(new RegExp("["+r+w+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(b){return 0!==b.length}):[]}
function l(b,d,l){return{value:b,writable:!!d,enumerable:!1,configurable:!!l}}function d(b,d){for(var l=v[b],a=0,f=l.length;a<f&&(l[a](d),d._stopPropogation);a++);return d._preventDefault}function A(b){var m=b.match(D).map(function(b){return b.replace(/[<\/>]/g,"")});m.filter(function(b,a){return document.createElement(b)instanceof HTMLUnknownElement&&-1===m.indexOf(b,a+1)&&void 0===z[b]});0!==m.length&&d("unknown",new Event("unknown",m));return m}var z={},D=/(<\/.*?>)/g;T().call();var B=Object.keys(HTMLElement.prototype).filter(function(b){return 0===
b.indexOf("on")}),r="{{",w="}}",y="|",v={unknown:[]};t.prototype.map=function(b){function d(a){for(var f=0,c=a.length;f<c;f++)if(void 0===a[f].kb_maps&&8!==a[f].nodeType){a[f].kb_mapper=b;if(3===a[f].nodeType){var h=a[f],k=l,e=h.textContent,g=h.parentElement instanceof HTMLUnknownElement;if(e.match(new RegExp("(\\"+r.split("").join("\\")+")(.*?)(\\"+w.split("").join("\\")+")","g")))for(var q=g?"component":e.match(new RegExp("(\\"+r.split("").join("\\")+")(.*?)(for)(.*?)(loop)(.*?)(\\"+w.split("").join("\\")+
")","g"))?"for":"text",h=x(k,q,e,N(e),g?"":"textContent","textContent",h,h.parentElement),e=0,g=h.prototype.bindText.length;e<g;e++){var q=e,n=h.prototype.bindText[e];0===n.indexOf(r)&&(n=new h(n),h.prototype.bindText[q]=n,void 0===k[n.key]&&(k[n.key]=[]),n.id=k[n.key].length,k[n.key].push(n))}}else for(k=a[f],h=l,e=k.attributes,g=k instanceof HTMLUnknownElement,q=0,n=e.length;q<n;q++){n>e.length&&(q-=n-e.length,n=e.length);var p=e[q];if(p.value.match(new RegExp("(\\"+r.split("").join("\\")+")(.*?)(\\"+
w.split("").join("\\")+")","g")))for(var p=x(h,g?"component":"attribute",p.value,N(p.value),g?"":p.name,"value",p,k),u=0,V=p.prototype.bindText.length;u<V;u++){var t=u,G=p.prototype.bindText[u];0===G.indexOf(r)&&(G=new p(G),p.prototype.bindText[t]=G,void 0===h[G.key]&&(h[G.key]=[]),h[G.key].push(G))}}a[f].childNodes&&0!==a[f].childNodes.length&&d(a[f].childNodes)}}var l={};d(b.childNodes);return l};t.prototype.addFilter=function(b,d){void 0!==this.maps[b]&&this.maps[b].forEach(function(b){b.filters.push(d);
b.refresh()});return this};t.prototype.removeFilter=function(b,d){void 0!==this.maps[b]&&this.maps[b].forEach(function(l){l.filters.splice(this.maps[b].filters.indexOf(d),1);l.refresh()});return this};t.prototype.swapFilter=function(b,d,l){void 0!==this.maps[b]&&this.maps[b].forEach(function(a){a.filters.splice(this.maps[b].filters.indexOf(d),1,l);a.refresh()});return this};Object.defineProperties(t,{startChars:l(function(b){if(void 0===b)return r;r="string"===typeof b?b:r;return this}),endChars:l(function(b){if(void 0===
b)return w;w="string"===typeof b?b:w;return this}),pipeChars:l(function(b){if(void 0===b)return y;y="string"===typeof b?b:y;return this}),getUnknown:l(A),isRegistered:l(function(b){return void 0!==z[b]}),register:l(function(b,d){void 0===z[b]?(z[b]=d,A(d)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",b);return this}),addEventListener:l(function(b,d){void 0!==v[b]?v[b].push(d):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",
b);return this}),removeEventListener:l(function(b,d){if(void 0!==v[b])for(var l=0,a=v[b].length;l<a;l++)v[b][l].toString()===d.toString()&&v[b].splice(l,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",b);return this})});return t}}(function(){function H(){function t(a,f){var c=a.length,h;for(h=0;h<c&&(a[h](f),void 0===f._stopPropogation);h++);}function x(a,f){var c=a.length,h;for(h=0;h<c&&(f.child=f.target,f.target=a[h].parent,a[h].func(f),void 0===
f._stopPropogation);h++);}function I(a,f){for(var c=a.length;0<c;b++)if(a[b].toString()===f.toString())return!0;return!1}function P(a,f,c,h,b,e,d,q){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=c;this.oldValue=h;this.target=a;this.attr=f;this.arguments=b;this.action=e;this.child=void 0;this.type=d;this.stopChange=q}function R(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners=
{};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function M(a,f,c,h){var b=a.get,e=a.set,d;return function(a){d=b.call(this);c(this,f,a,d,void 0,this._stopChange)&&e.call(this,a);this._stopChange||h(this,f,a,d);this._stopChange=void 0}}function T(a,f,c,h){var b;return function(e){b=a.value;c(this,f,e,b,arguments,this._stopChange)&&(a.value=e);this._stopChange||h(this,f,e,b,arguments);this._stopChange=
void 0}}function U(a,f,c,h){var b=a.value,e;return function(){c(this,f,null,null,arguments,this._stopChange)&&(e=b.apply(this,arguments));this._stopChange||h(this,f,null,null,arguments,e);this._stopChange=void 0;return e}}function Q(a,f,c,h,b){var e=b.style,d=f.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),q,n;return{get:function(){return n},set:function(a){q=n;c(b,f,a,q,void 0,this._stopChange)&&(n=a,e.setProperty(d,a));this._stopChange||h(b,f,a,q);this._stopChange=void 0},enumerable:!0,
configurable:!0}}function E(a,f,c,b){if("function"!==typeof f)return d;var k=-1!==["value","checked"].indexOf(a),e=-1!==y.indexOf(a),g;if(this.toString()!==d.toString())if(c){var q=this.querySelectorAll("*");c=q.length;for(var n,p=0;p<c;p++){n=q[p].attrListeners();if(k||"*"===a)void 0!==q[p].addInputBinding&&q[p].addInputBinding(),void 0!==q[p].addInputBoxBinding&&q[p].addInputBoxBinding();if(e)d.injectStyleProperty(q[p],a),g=b?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===a){g=
b?"_parentStyleUpdateListeners":"_parentStyleListeners";c=y.length;for(var u=0;u<c;u++)d.injectStyleProperty(q[p],y[u]);void 0===n[g]["*"]&&(n[g]["*"]=[]);n[g]["*"].push({parent:this,func:f})}g=b?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===n[g][a]&&(n[g][a]=[]);n[g][a].push({parent:this,func:f})}}else{n=this.attrListeners();if(e)g=b?"_styleUpdateListeners":"_styleListeners",d.injectStyleProperty(this,a);else{if(k||"*"===a)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==
this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===a){g=b?"_styleUpdateListeners":"_styleListeners";c=y.length;for(p=0;p<c;p++)d.injectStyleProperty(this,y[p]);void 0===n[g][a]&&(n[g][a]=[]);n[g][a].push(f)}g=b?"_attrUpdateListeners":"_attrListeners"}void 0===n[g][a]&&(n[g][a]=[]);n[g][a].push(f)}else{if(k||"*"===a)for(u=document.querySelectorAll("input, textarea"),c=u.length,p=0;p<c;p++)void 0!==u[p].addInputBinding&&u[p].addInputBinding(),void 0!==u[p].addInputBoxBinding&&u[p].addInputBoxBinding();
if(e){e=Array.prototype.slice.call(document.body.querySelectorAll("*"));c=e.length+1;e.unshift(document.body);for(p=0;p<c;p++)d.injectStyleProperty(e[p],a);g=b?B:D}else{if("*"===a){e=Array.prototype.slice.call(document.body.querySelectorAll("*"));c=e.length+1;k=y.length;e.unshift(document.body);for(p=0;p<c;p++)for(u=0;u<k;u++)d.injectStyleProperty(e[p],y[u]);g=b?B:D;void 0===g[a]&&(g[a]=[]);g[a].push(f)}g=b?z:A}void 0===g[a]&&(g[a]=[]);g[a].push(f)}}function F(a,f,c,b){function k(a,b){var c=b[a],
e=c.length;for(g=0;g<e;g++)c[g].toString()===f.toString()&&c.splice(g,1)}if("function"!==typeof f)return d;["value","checked"].indexOf(a);var e=-1!==y.indexOf(a),g;if(this.toString()!==d.toString())if(c){c=this.querySelectorAll("*");var q=c.length;e?(e=b?"_childStyleUpdateListeners":"_childStyleListeners",k(a,this.attrListeners()[e]),e=b?"_parentStyleUpdateListeners":"_parentStyleListeners"):("*"===a&&(e=b?"_childStyleUpdateListeners":"_childStyleListeners",k(a,this.attrListeners()[e])),e=b?"_childAttrUpdateListeners":
"_childAttrListeners",k(a,this.attrListeners()[e]),e=b?"_parentAttrUpdateListeners":"_parentAttrListeners");for(g=0;g<q;g++){for(var n=c[g].attrListeners()[e][a],p=n.length,u=0;u<p;u++)n[u].isEqualNode(this)&&n.slice(u,1);if("*"===a)for(listenersStyle=b?"_parentStyleUpdateListeners":"_parentStyleListeners",n=c[g].attrListeners()[e][a],p=n.length,u=0;u<p;u++)n[u].isEqualNode(this)&&n.slice(u,1)}}else e?e=b?"_styleUpdateListeners":"_styleListeners":("*"===a&&(e=b?"_styleUpdateListeners":"_styleListeners",
k(a,this.attrListeners()[e])),e=b?"_attrUpdateListeners":"_attrListeners"),k(a,this.attrListeners()[e]);else e?e=b?B:D:("*"===a&&(e=b?B:D,k(a,e)),e=b?z:A),k(a,e)}function N(a,f){d.addAttrListener.call(this,a,f,!0);return this}function S(a,f){d.addAttrUpdateListener.call(this,a,f,!0);return this}function L(a,f){d.removeAttrListener.call(this,a,f,!0);return this}function O(a,f){d.removeAttrUpdateListener.call(this,a,f,!0);return this}function K(a,f,c){var b=this.attrListeners();"html"===f&&(f="innerHTML");
"events"===f&&(f="onclick");switch(a){case "attr":if(I(b._attrListeners[f],c))return!0;break;case "attrupdate":if(I(b._attrUpdateListeners[f],c))return!0}return!1}function l(){this._stopChange=!0;return this}function d(){function a(a,b){var f,c=b.length;for(f=0;f<c;f++)-1===a.indexOf(b[f])&&a.push(b[f]);return a}function f(a,b){for(var f=Object.keys(a),c,e,d=0,h=f.length;d<h;d++)if(c=f[d],void 0===b[c])b[c]=a[c].slice();else for(var g=0,k=a[c].length;g<k;g++)e=a[c][g],b[c].push(e)}function b(c){if(3!==
c.target.nodeType&&8!==c.target.nodeType){var e=c.target.attrListeners(),h,g=["value","checked"],k=e._attrListeners,l=e._attrUpdateListeners,m=e._parentAttrListeners;h=e._parentAttrUpdateListeners;var t=!1;if(void 0!==A["*"]||void 0!==z["*"])t=!0;if(!0!==t&&void 0!==k["*"]||void 0!==l["*"]||void 0!==m["*"]||void 0!==h["*"])t=!0;if(!0!==t)for(var r=0;r<g.length;r++)if(void 0!==A[g[r]]||void 0!==z[g[r]]||void 0!==k[g[r]]||void 0!==l[g[r]]||void 0!==m[g[r]]||void 0!==h[g[r]]){t=!0;break}h=t;g=Object.keys(D);
k=Object.keys(B);Object.keys(e._styleListeners);Object.keys(e._styleUpdateListeners);l=Object.keys(e._parentStyleListeners);e=Object.keys(e._parentStyleUpdateListeners);m=[];if(0!==g.length||0!==k.length)m=a(m,g),m=a(m,k);if(0!==m.length&&0!==l.length||0!==e.length)m=a(m,l),m=a(m,e);-1!==m.indexOf("*")&&(m=y);var e=m,g=e.length,w,v,k=[],x,l="outerHTML"===c.attr||"outerText"===c.attr?c.attr:void 0,m=c.target;void 0!==l&&(c.attr="appendChild",c.arguments=[c.target],c.target=c.target.parentElement);
if(h){"appendChild"===c.attr&&3!==c.arguments[0].nodeType&&8!==c.arguments[0].nodeType?(k=Array.prototype.slice.call(c.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==c.arguments[0].tagName&&"TEXTAREA"!==c.arguments[0].tagName||k.unshift(c.arguments[0])):k=Array.prototype.slice.call(c.target.querySelectorAll("input,textarea"));x=k.length;for(var C=0;C<x;C++)void 0!==k[C].addInputBinding&&k[C].addInputBinding(),void 0!==k[C].addInputBoxBinding&&k[C].addInputBoxBinding()}"appendChild"===
c.attr&&"#text"!==c.arguments[0].nodeName&&"#comment"!==c.arguments[0].nodeName?(k=Array.prototype.slice.call(c.arguments[0].querySelectorAll("*")),k.unshift(c.arguments[0])):k=Array.prototype.slice.call(c.target.querySelectorAll("*"));h=c.target.__kb._parentAttrListeners;t=c.target.__kb._parentAttrUpdateListeners;r=c.target.__kb._parentStyleListeners;w=c.target.__kb._parentStyleUpdateListeners;x=k.length;for(C=0;C<x;C++){if(0!==g)for(v=0;v<g;v++)d.injectStyleProperty(k[C],e[v]);v=k[C].attrListeners();
f(h,v._parentAttrListeners);f(t,v._parentAttrUpdateListeners);f(r,v._parentStyleListeners);f(w,v._parentStyleUpdateListeners)}void 0!==l&&(c.attr=l,c.target=m,c.arguments=[])}}function h(a){var c=a.target.attributes[a.arguments[0]],b="setAttribute"===a.attr?a.arguments[1]:"";e(a.target,a.arguments[0],b,void 0!==c?c.value:"",[b])||a.preventDefault()}function k(a){var c=a.target.attributes[a.arguments[0]],b="setAttribute"===a.attr?a.arguments[1]:"";g(a.target,a.arguments[0],b,void 0!==c?c.value:"",
[b])}d.injectPrototypes(Node,"Node");d.injectPrototypes(Element,"Element");d.injectPrototypes(HTMLElement,"HTMLElement");d.injectPrototypes(HTMLInputElement,"HTMLInputElement");d.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");d.injectPrototypes(Document,"Document");var e=m,g=J;d.addAttrUpdateListener("appendChild",b);d.addAttrUpdateListener("removeChild",b);d.addAttrUpdateListener("innerHTML",b);d.addAttrUpdateListener("outerHTML",b);d.addAttrUpdateListener("innerText",b);d.addAttrUpdateListener("outerText",
b);d.addAttrUpdateListener("textContent",b);d.addAttrListener("setAttribute",h);d.addAttrListener("removeAttribute",h);d.addAttrUpdateListener("setAttribute",k);d.addAttrUpdateListener("removeAttribute",k);return d}var A={},z={},D={},B={},r={},w="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),y=Object.getOwnPropertyNames(document.body.style),v=Object.keys(HTMLElement.prototype).filter(function(a){return 0===a.indexOf("on")}).concat(["addEventListener",
"removeEventListener"]),b,m=function(a,b,c,h,d,e){c=new P(a,b,c,h,d,void 0,"set",e);void 0!==a.__kb&&(h=a.__kb._attrListeners,d=a.__kb._styleListeners,e=a.__kb._parentAttrListeners,a=a.__kb._parentStyleListeners,void 0!==h[b]&&t(h[b],c),void 0===c._stopPropogation&&void 0!==d[b]&&t(d[b],c),void 0===c._stopPropogation&&void 0!==h["*"]&&(t(h["*"],c),void 0===c._stopPropogation&&t(d["*"],c)),void 0===c._stopPropogation&&void 0!==e[b]&&x(e[b],c),void 0===c._stopPropogation&&void 0!==a[b]&&x(a[b],c),void 0===
c._stopPropogation&&void 0!==e["*"]&&(x(e["*"],c),void 0===c._stopPropogation&&x(a["*"],c)));void 0===c._stopPropogation&&void 0!==A[b]&&t(A[b],c);void 0===c._stopPropogation&&void 0!==D[b]&&t(D[b],c);void 0===c._stopPropogation&&void 0!==A["*"]&&(t(A["*"],c),void 0===c._stopPropogation&&t(D["*"],c));return void 0!==c._preventDefault?!1:!0},J=function(a,b,c,d,k,e){c=new P(a,b,c,d,k,e,"update");void 0!==a.__kb&&(d=a.__kb._attrUpdateListeners,k=a.__kb._styleUpdateListeners,e=a.__kb._parentAttrUpdateListeners,
a=a.__kb._parentStyleUpdateListeners,void 0!==d[b]&&t(d[b],c),void 0===c._stopPropogation&&void 0!==k[b]&&t(k[b],c),void 0===c._stopPropogation&&void 0!==d["*"]&&(t(d["*"],c),void 0===c._stopPropogation&&t(k["*"],c)),void 0===c._stopPropogation&&void 0!==e[b]&&x(e[b],c),void 0===c._stopPropogation&&void 0!==a[b]&&x(a[b],c),void 0===c._stopPropogation&&void 0!==e["*"]&&(x(e["*"],c),void 0===c._stopPropogation&&x(a["*"],c)));void 0===c._stopPropogation&&void 0!==z[b]&&t(z[b],c);void 0===c._stopPropogation&&
void 0!==B[b]&&t(B[b],c);void 0===c._stopPropogation&&void 0!==z["*"]&&(t(z["*"],c),void 0===c._stopPropogation&&t(B["*"],c));return void 0!==c._preventDefault?!1:!0};d.injectPrototypeProperty=function(a,b,c,h,k){var e=a.prototype,g=Object.getOwnPropertyDescriptor(e,b);c=c||a.toString().split(/\s+/)[1].split("{")[0].replace("()","");var q=r[c];h=h||m;k=k||J;void 0===e.attrListeners&&(e={},e.attrListeners=function(){void 0===this.__kb&&(this.__kb=new R);return this.__kb}.bind(e),e.addAttrListener=
d.addAttrListener,e.addAttrUpdateListener=d.addAttrUpdateListener,e.addChildAttrListener=N,e.addChildAttrUpdateListener=S,e.hasListener=K,e.removeAttrListener=d.removeAttrListener,e.removeAttrUpdateListener=d.removeAttrUpdateListener,e.removeChildAttrListener=L,e.removeChildAttrUpdateListener=O,e.stopChange=l);void 0===q&&(r[c]={obj:a,proto:e,descriptors:{},set:void 0,update:void 0},q=r[c],q.set=h,q.update=k);void 0===q.descriptors[b]&&(q.descriptors[b]=g);g.configurable&&(void 0!==g.set?Object.defineProperty(e,
b,{get:g.get,set:M(g,b,h,k),enumerable:!0,configurable:!0}):"function"===typeof g.value?Object.defineProperty(e,b,{value:U(g,b,h,k),writable:!0,enumerable:!0,configurable:!0}):void 0!==g.value&&Object.defineProperty(e,b,{get:function(){return g.value},set:T(g,b,h,k),enumerable:!0,configurable:!0}));return d};d.injectStyleProperty=function(a,b,c,h){var k=a.style,e=Object.getOwnPropertyDescriptor(k,b),g=a.attrListeners().injectedStyle;c=c||m;h=h||J;void 0===g&&(a.attrListeners().injectedStyle={obj:a,
proto:k,descriptors:{},set:void 0,update:void 0},a.attrListeners().injectedStyle.set=c,a.attrListeners().injectedStyle.update=h,g=a.attrListeners().injectedStyle);void 0===g.descriptors[b]&&(g.descriptors[b]=e);e.configurable&&Object.defineProperty(k,b,Q(e,b,c,h,a));return d};d.injectPrototypes=function(a,b,c,h){var k=a.prototype;b=b||a.toString().split(/\s+/)[1].split("{")[0].replace("()","");var e=r[b],g=Object.getOwnPropertyNames(k);c=c||m;h=h||J;var q;void 0===k.attrListeners&&(k.attrListeners=
function(){void 0===this.__kb&&(this.__kb=new R);return this.__kb},k.addAttrListener=d.addAttrListener,k.addAttrUpdateListener=d.addAttrUpdateListener,k.addChildAttrListener=N,k.addChildAttrUpdateListener=S,k.removeAttrListener=d.removeAttrListener,k.removeAttrUpdateListener=d.removeAttrUpdateListener,k.removeChildAttrListener=L,k.removeChildAttrUpdateListener=O,k.hasListener=K,k.stopChange=l);void 0===e&&(r[b]={obj:a,proto:k,descriptors:{},set:void 0,update:void 0},e=r[b],e.set=c,e.update=h);q=r[b].descriptors;
for(h=0;h<g.length;h+=1)void 0===q[g[h]]&&d.injectPrototypeProperty(a,g[h],b,c,J);if(-1!==g.indexOf("value")){var n=function(a){var b,c,f;if("checkbox"===this.type||"radio"===this.type)b=!0;c=b?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){f=b?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;b&&(e.set(this,"checked",this.checked,c)?e.update(this,"checked",this.checked,c):q.checked.set.call(this,c));this.value=
f;e.set(this,"value",this.value,c)?e.update(this,"value",this.value,c):q.value.set.call(this,c)}.bind(this),0)};k.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",n)};k.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",n)};k.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=void 0;this.removeEventListener("mouseup",n)};k.addInputBoxBinding=function(){this.attrListeners()._onmousedown=
!0;this.addEventListener("mouseup",n)}}return d};d.addAttrListener=function(a,b,c){if("html"===a){a=0;for(var d=w.length;a<d;a++)E.call(this,w[a],b,c,!1)}else if("events"===a)for(a=0,d=v.length;a<d;a++)E.call(this,v[a],b,c,!1);else E.call(this,a,b,c,!1);return this};d.addAttrUpdateListener=function(a,b,c){if("html"===a){a=0;for(var d=w.length;a<d;a++)E.call(this,w[a],b,c,!0)}else if("events"===a)for(a=0,d=v.length;a<d;a++)E.call(this,v[a],b,c,!0);else E.call(this,a,b,c,!0);return this};d.removeAttrListener=
function(a,b,c){if("html"===a){a=0;for(var d=w.length;a<d;a++)F.call(this,w[a],b,c,!1)}else if("events"===a)for(a=0,d=v.length;a<d;a++)F.call(this,v[a],b,c,!1);else F.call(this,a,b,c,!1);return this};d.removeAttrUpdateListener=function(a,b,c){if("html"===a){a=0;for(var d=w.length;a<d;a++)F.call(this,w[a],b,c,!0)}else if("events"===a)for(a=0,d=v.length;a<d;a++)F.call(this,v[a],b,c,!0);else F.call(this,a,b,c,!0);return this};d.hasListener=function(a,b,c){"html"===b&&(b="innerHTML");"events"===b&&(b=
"onclick");switch(a){case "attr":if(I(A[b],c))return!0;break;case "attrupdate":if(I(z[b],c))return!0}return!1};d.injectedPrototypes=function(){return r};return d}"function"===typeof define&&define.amd&&define("KB",H);return H}());"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return H}):"undefined"!==typeof module&&(module.exports=H);return H}();
