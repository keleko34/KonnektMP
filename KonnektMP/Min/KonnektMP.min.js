var KonnektMP=function(){var D=function(O){return function(){function k(a){this.name=a.tagName.toLowerCase();this.template=d[name]||'<div class="missing_component">Unknown Component</div>';this.node=a;this.fragment=document.createDocumentFragment();this.wrapper=document.createElement("div");this.wrapper.className="Wrapper Wrapper__"+this.name;this.wrapper.innerHTML=this.template;this.fragment.appendChild(this.wrapper);this.maps=this.map(this.wrapper);this.wrapper.kb_maps=this.maps}function z(a,r,
d,F,q,k,b,l){function c(b){var c=P(b),l=this;this.key="for"!==r?H(b):c[0];this.filterNames=K(b);this.component="for"!==r?c[1]:void 0;this.id=0;this.__proto__.bindText=this.__proto__.bindText.map(function(c){return c===b?this:c});Object.defineProperties(this,{value:{get:this.valget,set:this.valset,enumerable:!0,configurable:!1},_value:e("",!0)});this.__proto__.updateData=function(b){l.isConnected&&l._data&&("string"===typeof b&&(b={value:b}),"function"===typeof l._data.stopChange&&l._data.stopChange().set(l.key,
b.value))};this.__proto__.updateDom=function(b){l.isSynced()&&(l.element.stopChange(),"string"===typeof b&&(b={value:b}),l.value=b.value)}}Object.defineProperties(c.prototype,{valget:e(E),valset:e(L),refresh:e(D),connect:e(Q),deleteMap:e(R),unsync:e(S),isSynced:e(M),type:e(r),text:e(d,!0),bindText:e(F,!0),bindNames:e(A(F),!0),bindListener:e(q),bindProperty:e(k),bindTarget:e(b,!0),element:e(l,!0),_data:e({},!0),filters:e({},!0),maps:e(a,!0)});return c}function E(){return this._value}function L(a){this._value=
"string"===typeof a&&this.isSynced()?a:this._value;this.refresh()}function M(){return this.element.parentElement?!!this.element.parentElement:this.unsync()}function D(){var a=this;"for"!==this.type&&(this.bindTarget[this.bindProperty]=this.bindText.reduce(function(r,d){return r+("string"===typeof d?d:0===d.filterNames.length?d._value:d.filterNames.reduce(function(d,r){if(void 0!==a.filters){if(void 0!==a.filters[r])return a.filters[r](d);console.warn("there is no filter by the name %o in the data model filters %o",
r,Object.keys(a.filters));return d}console.error("Somehow filters object was not added to the mapping via .connect() method, please see dev");return d},d._value))},""));return this}function Q(a){this._data=a;this.filters=void 0!==a.filters?a.filters:this.filters;a=0;for(var d=this.bindNames.length;a<d;a++)this._data.addDataUpdateListener&&(this._data.exists(this.bindNames[a])||this._data.add(this.bindNames[a],this._value),this.value=this._data.get(this.bindNames[a]),"component"!==this.type&&(this.isConnected=
!0,this._data.addDataUpdateListener(this.bindNames[a],this.updateDom),"for"===this.type&&console.log("run for type event listeners")));1!==this.bindText.length||"text"!==this.type&&"attribute"!==this.type||this.element.addAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);return this}function R(){this.maps[this.key].splice(this.id,1);return this}function S(){for(var a=0,d=this.bindNames.length;a<d;a++)this._data.removeDataUpdateListener&&this._data.removeDataUpdateListener(this.bindNames[a],
this.updateDom);this.element.removeAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);this.maps=this.bindNames=this.filters=this._data=null;this.__proto__._data=null;this.__proto__.element=null;this.__proto__.filters=null;this.__proto__.bindTarget=null;this.__proto__.bindText=null;this.__proto__.bindNames=null;this.__proto__.element=null;this.__proto__.maps=null;return!1}function x(a){return a.split(new RegExp("("+q.split("").join("\\")+")(.*?)("+u.split("").join("\\")+
")","g")).map(function(a,d,e){return e[d-1]===q?q+a+u:a}).filter(function(a,d,e){return 0!==a.length&&a!==q&&a!==u&&0!==a.length})}function A(a){return a.filter(function(a){return-1!==a.indexOf(q)&&-1!==a.indexOf(u)}).map(function(a){return H(a)})}function H(a){return a.replace(new RegExp("["+q+u+"]","g"),"").replace(new RegExp("\\"+y.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function K(a){return-1!==a.indexOf(y)?a.replace(new RegExp("["+u+"]","g"),"").replace(new RegExp("(.*?)(\\"+y.split("").join("\\")+
")"),"").replace(/\s/g,"").split(","):[]}function P(a){return-1!==a.indexOf("for")?a.replace(new RegExp("["+q+u+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(a){return 0!==a.length}):[]}function e(a,d,t){return{value:a,writable:!!d,enumerable:!1,configurable:!!t}}function N(a,d){for(var t=n[a],e=0,q=t.length;e<q&&(t[e](d),d._stopPropogation);e++);return d._preventDefault}function I(a){var r=a.match(B).map(function(a){return a.replace(/[<\/>]/g,"")});r.filter(function(a,
e){return document.createElement(a)instanceof HTMLUnknownElement&&-1===r.indexOf(a,e+1)&&void 0===d[a]});0!==r.length&&N("unknown",new Event("unknown",r));return r}var d={},B=/(<\/.*?>)/g;O().call();var q="{{",u="}}",y="|",n={unknown:[]};k.prototype.map=function(a){function d(k){for(var n=0,y=k.length;n<y;n++)if(void 0===k[n].kb_maps){k[n].kb_mapper=a;if(3===k[n].nodeType){var b=k[n],l=e,c=b.textContent,w=b.parentElement instanceof HTMLUnknownElement;if(c.match(new RegExp("(\\"+q.split("").join("\\")+
")(.*?)(\\"+u.split("").join("\\")+")","g")))for(var g=w?"component":-1!==c.indexOf("for")&&void 0!==c.indexOf("loop")?"for":"text",b=z(l,g,c,x(c),w?"":"textContent","textContent",b,b.parentElement),c=0,w=b.prototype.bindText.length;c<w;c++)0===b.prototype.bindText[c].indexOf(q)&&(g=new b(b.prototype.bindText[c]),b.prototype.bindText[c]=g,void 0===l[g.key]&&(l[g.key]=[]),g.id=l[g.key].length,l[g.key].push(g))}else for(var l=k[n],b=e,c=l.attributes,w=l instanceof HTMLUnknownElement,g=0,f=c.length;g<
f;g++)if(c[g].value.match(new RegExp("(\\"+q.split("").join("\\")+")(.*?)(\\"+u.split("").join("\\")+")","g")))for(var h=z(b,w?"component":"attribute",c[g].value,x(c[g].value),w?"":c[g].name,"value",c[g],l),p=0,v=h.prototype.bindText.length;p<v;p++)if(0===h.prototype.bindText[p].indexOf(q)){var m=new h(h.prototype.bindText[p]);h.prototype.bindText[p]=m;void 0===b[m.key]&&(b[m.key]=[]);b[m.key].push(m)}k[n].childNodes&&0!==k[n].childNodes.length&&d(k[n].childNodes)}}var e={};d(a.childNodes);return e};
k.prototype.addFilter=function(a,d){void 0!==this.maps[a]&&this.maps[a].forEach(function(a){a.filters.push(d)});return this};k.prototype.removeFilter=function(a,d){void 0!==this.maps[a]&&this.maps[a].forEach(function(e){e.filters.splice(this.maps[a].filters.indexOf(d),1)});return this};k.prototype.swapFilter=function(a,d,e){void 0!==this.maps[a]&&this.maps[a].forEach(function(k){k.filters.splice(this.maps[a].filters.indexOf(d),1,e)});return this};Object.defineProperties(k,{startChars:e(function(a){if(void 0===
a)return q;q="string"===typeof a?a:q;return this}),endChars:e(function(a){if(void 0===a)return u;u="string"===typeof a?a:u;return this}),pipeChars:e(function(a){if(void 0===a)return y;y="string"===typeof a?a:y;return this}),getUnknown:e(I),isRegistered:e(function(a){return void 0!==d[a]}),register:e(function(a,e){void 0===d[a]?(d[a]=e,I(e)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",a);return this}),addEventListener:e(function(a,d){void 0!==n[a]?
n[a].push(d):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",a);return this}),removeEventListener:e(function(a,d){if(void 0!==n[a])for(var e=0,k=n[a].length;e<k;e++)n[a][e].toString()===d.toString()&&n[a].splice(e,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",a);return this})});return k}}(function(){function D(){function k(b,l){var c=b.length,a;for(a=0;a<c&&(b[a](l),void 0===l._stopPropogation);a++);
}function z(b,l){var c=b.length,a;for(a=0;a<c&&(l.child=l.target,l.target=b[a].parent,b[a].func(l),void 0===l._stopPropogation);a++);}function E(b,l){for(var c=b.length;0<c;F++)if(b[F].toString()===l.toString())return!0;return!1}function L(b,l,c,a,d,f,h,p){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=c;this.oldValue=a;this.target=b;this.attr=l;this.arguments=d;this.action=f;this.child=void 0;this.type=h;this.stopChange=
p}function M(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function O(b,l,c,a){var d=b.get,f=b.set,h;return function(b){h=d.call(this);c(this,l,b,h,void 0,this._stopChange)&&f.call(this,b);this._stopChange||a(this,l,b,h);this._stopChange=void 0}}function Q(b,l,c,a){var d;return function(f){d=
b.value;c(this,l,f,d,arguments,this._stopChange)&&(b.value=f);this._stopChange||a(this,l,f,d,arguments);this._stopChange=void 0}}function R(b,l,c,a){var d=b.value,f;return function(){c(this,l,null,null,arguments,this._stopChange)&&(f=d.apply(this,arguments));this._stopChange||a(this,l,null,null,arguments,f);this._stopChange=void 0;return f}}function S(b,l,c,a,d){var f=d.style,h=l.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),p,v;return{get:function(){return v},set:function(b){p=v;c(d,l,b,
p,void 0,this._stopChange)&&(v=b,f.setProperty(h,b));this._stopChange||a(d,l,b,p);this._stopChange=void 0},enumerable:!0,configurable:!0}}function x(b,l,c,a){if("function"!==typeof l)return d;var g=-1!==["value","checked"].indexOf(b),f=-1!==r.indexOf(b),h;if(this.toString()!==d.toString())if(c){var p=this.querySelectorAll("*");c=p.length;for(var v,m=0;m<c;m++){v=p[m].attrListeners();if(g||"*"===b)void 0!==p[m].addInputBinding&&p[m].addInputBinding(),void 0!==p[m].addInputBoxBinding&&p[m].addInputBoxBinding();
if(f)d.injectStyleProperty(p[m],b),h=a?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===b){h=a?"_parentStyleUpdateListeners":"_parentStyleListeners";c=r.length;for(var e=0;e<c;e++)d.injectStyleProperty(p[m],r[e]);void 0===v[h]["*"]&&(v[h]["*"]=[]);v[h]["*"].push({parent:this,func:l})}h=a?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===v[h][b]&&(v[h][b]=[]);v[h][b].push({parent:this,func:l})}}else{v=this.attrListeners();if(f)h=a?"_styleUpdateListeners":"_styleListeners",
d.injectStyleProperty(this,b);else{if(g||"*"===b)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===b){h=a?"_styleUpdateListeners":"_styleListeners";c=r.length;for(m=0;m<c;m++)d.injectStyleProperty(this,r[m]);void 0===v[h][b]&&(v[h][b]=[]);v[h][b].push(l)}h=a?"_attrUpdateListeners":"_attrListeners"}void 0===v[h][b]&&(v[h][b]=[]);v[h][b].push(l)}else{if(g||"*"===b)for(e=document.querySelectorAll("input, textarea"),c=e.length,m=
0;m<c;m++)void 0!==e[m].addInputBinding&&e[m].addInputBinding(),void 0!==e[m].addInputBoxBinding&&e[m].addInputBoxBinding();if(f){f=Array.prototype.slice.call(document.body.querySelectorAll("*"));c=f.length+1;f.unshift(document.body);for(m=0;m<c;m++)d.injectStyleProperty(f[m],b);h=a?y:u}else{if("*"===b){f=Array.prototype.slice.call(document.body.querySelectorAll("*"));c=f.length+1;g=r.length;f.unshift(document.body);for(m=0;m<c;m++)for(e=0;e<g;e++)d.injectStyleProperty(f[m],r[e]);h=a?y:u;void 0===
h[b]&&(h[b]=[]);h[b].push(l)}h=a?q:B}void 0===h[b]&&(h[b]=[]);h[b].push(l)}}function A(b,l,c,a){function g(b,a){var c=a[b],d=c.length;for(h=0;h<d;h++)c[h].toString()===l.toString()&&c.splice(h,1)}if("function"!==typeof l)return d;["value","checked"].indexOf(b);var f=-1!==r.indexOf(b),h;if(this.toString()!==d.toString())if(c){c=this.querySelectorAll("*");var p=c.length;f?(f=a?"_childStyleUpdateListeners":"_childStyleListeners",g(b,this.attrListeners()[f]),f=a?"_parentStyleUpdateListeners":"_parentStyleListeners"):
("*"===b&&(f=a?"_childStyleUpdateListeners":"_childStyleListeners",g(b,this.attrListeners()[f])),f=a?"_childAttrUpdateListeners":"_childAttrListeners",g(b,this.attrListeners()[f]),f=a?"_parentAttrUpdateListeners":"_parentAttrListeners");for(h=0;h<p;h++){for(var e=c[h].attrListeners()[f][b],m=e.length,k=0;k<m;k++)e[k].isEqualNode(this)&&e.slice(k,1);if("*"===b)for(listenersStyle=a?"_parentStyleUpdateListeners":"_parentStyleListeners",e=c[h].attrListeners()[f][b],m=e.length,k=0;k<m;k++)e[k].isEqualNode(this)&&
e.slice(k,1)}}else f?f=a?"_styleUpdateListeners":"_styleListeners":("*"===b&&(f=a?"_styleUpdateListeners":"_styleListeners",g(b,this.attrListeners()[f])),f=a?"_attrUpdateListeners":"_attrListeners"),g(b,this.attrListeners()[f]);else f?f=a?y:u:("*"===b&&(f=a?y:u,g(b,f)),f=a?q:B),g(b,f)}function H(b,a){d.addAttrListener.call(this,b,a,!0);return this}function K(b,a){d.addAttrUpdateListener.call(this,b,a,!0);return this}function P(b,a){d.removeAttrListener.call(this,b,a,!0);return this}function e(b,a){d.removeAttrUpdateListener.call(this,
b,a,!0);return this}function N(b,a,c){var d=this.attrListeners();"html"===a&&(a="innerHTML");"events"===a&&(a="onclick");switch(b){case "attr":if(E(d._attrListeners[a],c))return!0;break;case "attrupdate":if(E(d._attrUpdateListeners[a],c))return!0}return!1}function I(){this._stopChange=!0;return this}function d(){function b(b,a){var c,l=a.length;for(c=0;c<l;c++)-1===b.indexOf(a[c])&&b.push(a[c]);return b}function a(b,c){for(var l=Object.keys(b),d,f,e=0,h=l.length;e<h;e++)if(d=l[e],void 0===c[d])c[d]=
b[d].slice();else for(var g=0,w=b[d].length;g<w;g++)f=b[d][g],c[d].push(f)}function c(c){if(3!==c.target.nodeType&&8!==c.target.nodeType){var f=c.target.attrListeners(),e,h=["value","checked"],g=f._attrListeners,w=f._attrUpdateListeners,k=f._parentAttrListeners;e=f._parentAttrUpdateListeners;var n=!1;if(void 0!==B["*"]||void 0!==q["*"])n=!0;if(!0!==n&&void 0!==g["*"]||void 0!==w["*"]||void 0!==k["*"]||void 0!==e["*"])n=!0;if(!0!==n)for(var t=0;t<h.length;t++)if(void 0!==B[h[t]]||void 0!==q[h[t]]||
void 0!==g[h[t]]||void 0!==w[h[t]]||void 0!==k[h[t]]||void 0!==e[h[t]]){n=!0;break}e=n;h=Object.keys(u);g=Object.keys(y);Object.keys(f._styleListeners);Object.keys(f._styleUpdateListeners);w=Object.keys(f._parentStyleListeners);f=Object.keys(f._parentStyleUpdateListeners);k=[];if(0!==h.length||0!==g.length)k=b(k,h),k=b(k,g);if(0!==k.length&&0!==w.length||0!==f.length)k=b(k,w),k=b(k,f);-1!==k.indexOf("*")&&(k=r);var f=k,h=f.length,z,x,g=[],A,w="outerHTML"===c.attr||"outerText"===c.attr?c.attr:void 0,
k=c.target;void 0!==w&&(c.attr="appendChild",c.arguments=[c.target],c.target=c.target.parentElement);if(e){"appendChild"===c.attr&&3!==c.arguments[0].nodeType&&8!==c.arguments[0].nodeType?(g=Array.prototype.slice.call(c.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==c.arguments[0].tagName&&"TEXTAREA"!==c.arguments[0].tagName||g.unshift(c.arguments[0])):g=Array.prototype.slice.call(c.target.querySelectorAll("input,textarea"));A=g.length;for(var C=0;C<A;C++)void 0!==g[C].addInputBinding&&
g[C].addInputBinding(),void 0!==g[C].addInputBoxBinding&&g[C].addInputBoxBinding()}"appendChild"===c.attr&&"#text"!==c.arguments[0].nodeName&&"#comment"!==c.arguments[0].nodeName?(g=Array.prototype.slice.call(c.arguments[0].querySelectorAll("*")),g.unshift(c.arguments[0])):g=Array.prototype.slice.call(c.target.querySelectorAll("*"));e=c.target.__kb._parentAttrListeners;n=c.target.__kb._parentAttrUpdateListeners;t=c.target.__kb._parentStyleListeners;z=c.target.__kb._parentStyleUpdateListeners;A=g.length;
for(C=0;C<A;C++){if(0!==h)for(x=0;x<h;x++)d.injectStyleProperty(g[C],f[x]);x=g[C].attrListeners();a(e,x._parentAttrListeners);a(n,x._parentAttrUpdateListeners);a(t,x._parentStyleListeners);a(z,x._parentStyleUpdateListeners)}void 0!==w&&(c.attr=w,c.target=k,c.arguments=[])}}function e(b){var c=b.target.attributes[b.arguments[0]],a="setAttribute"===b.attr?b.arguments[1]:"";f(b.target,b.arguments[0],a,void 0!==c?c.value:"",[a])||b.preventDefault()}function g(b){var c=b.target.attributes[b.arguments[0]],
a="setAttribute"===b.attr?b.arguments[1]:"";h(b.target,b.arguments[0],a,void 0!==c?c.value:"",[a])}d.injectPrototypes(Node,"Node");d.injectPrototypes(Element,"Element");d.injectPrototypes(HTMLElement,"HTMLElement");d.injectPrototypes(HTMLInputElement,"HTMLInputElement");d.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");d.injectPrototypes(Document,"Document");var f=J,h=G;d.addAttrUpdateListener("appendChild",c);d.addAttrUpdateListener("removeChild",c);d.addAttrUpdateListener("innerHTML",
c);d.addAttrUpdateListener("outerHTML",c);d.addAttrUpdateListener("innerText",c);d.addAttrUpdateListener("outerText",c);d.addAttrUpdateListener("textContent",c);d.addAttrListener("setAttribute",e);d.addAttrListener("removeAttribute",e);d.addAttrUpdateListener("setAttribute",g);d.addAttrUpdateListener("removeAttribute",g);return d}var B={},q={},u={},y={},n={},a="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),r=Object.getOwnPropertyNames(document.body.style),
t=Object.keys(HTMLElement.prototype).filter(function(b){return 0===b.indexOf("on")}).concat(["addEventListener","removeEventListener"]),F,J=function(b,a,c,d,g,f){c=new L(b,a,c,d,g,void 0,"set",f);void 0!==b.__kb&&(d=b.__kb._attrListeners,g=b.__kb._styleListeners,f=b.__kb._parentAttrListeners,b=b.__kb._parentStyleListeners,void 0!==d[a]&&k(d[a],c),void 0===c._stopPropogation&&void 0!==g[a]&&k(g[a],c),void 0===c._stopPropogation&&void 0!==d["*"]&&(k(d["*"],c),void 0===c._stopPropogation&&k(g["*"],c)),
void 0===c._stopPropogation&&void 0!==f[a]&&z(f[a],c),void 0===c._stopPropogation&&void 0!==b[a]&&z(b[a],c),void 0===c._stopPropogation&&void 0!==f["*"]&&(z(f["*"],c),void 0===c._stopPropogation&&z(b["*"],c)));void 0===c._stopPropogation&&void 0!==B[a]&&k(B[a],c);void 0===c._stopPropogation&&void 0!==u[a]&&k(u[a],c);void 0===c._stopPropogation&&void 0!==B["*"]&&(k(B["*"],c),void 0===c._stopPropogation&&k(u["*"],c));return void 0!==c._preventDefault?!1:!0},G=function(b,a,c,d,g,f){c=new L(b,a,c,d,g,
f,"update");void 0!==b.__kb&&(d=b.__kb._attrUpdateListeners,g=b.__kb._styleUpdateListeners,f=b.__kb._parentAttrUpdateListeners,b=b.__kb._parentStyleUpdateListeners,void 0!==d[a]&&k(d[a],c),void 0===c._stopPropogation&&void 0!==g[a]&&k(g[a],c),void 0===c._stopPropogation&&void 0!==d["*"]&&(k(d["*"],c),void 0===c._stopPropogation&&k(g["*"],c)),void 0===c._stopPropogation&&void 0!==f[a]&&z(f[a],c),void 0===c._stopPropogation&&void 0!==b[a]&&z(b[a],c),void 0===c._stopPropogation&&void 0!==f["*"]&&(z(f["*"],
c),void 0===c._stopPropogation&&z(b["*"],c)));void 0===c._stopPropogation&&void 0!==q[a]&&k(q[a],c);void 0===c._stopPropogation&&void 0!==y[a]&&k(y[a],c);void 0===c._stopPropogation&&void 0!==q["*"]&&(k(q["*"],c),void 0===c._stopPropogation&&k(y["*"],c));return void 0!==c._preventDefault?!1:!0};d.injectPrototypeProperty=function(b,a,c,k,g){var f=b.prototype,h=Object.getOwnPropertyDescriptor(f,a);c=c||b.toString().split(/\s+/)[1].split("{")[0].replace("()","");var p=n[c];k=k||J;g=g||G;void 0===f.attrListeners&&
(f={},f.attrListeners=function(){void 0===this.__kb&&(this.__kb=new M);return this.__kb}.bind(f),f.addAttrListener=d.addAttrListener,f.addAttrUpdateListener=d.addAttrUpdateListener,f.addChildAttrListener=H,f.addChildAttrUpdateListener=K,f.hasListener=N,f.removeAttrListener=d.removeAttrListener,f.removeAttrUpdateListener=d.removeAttrUpdateListener,f.removeChildAttrListener=P,f.removeChildAttrUpdateListener=e,f.stopChange=I);void 0===p&&(n[c]={obj:b,proto:f,descriptors:{},set:void 0,update:void 0},
p=n[c],p.set=k,p.update=g);void 0===p.descriptors[a]&&(p.descriptors[a]=h);h.configurable&&(void 0!==h.set?Object.defineProperty(f,a,{get:h.get,set:O(h,a,k,g),enumerable:!0,configurable:!0}):"function"===typeof h.value?Object.defineProperty(f,a,{value:R(h,a,k,g),writable:!0,enumerable:!0,configurable:!0}):void 0!==h.value&&Object.defineProperty(f,a,{get:function(){return h.value},set:Q(h,a,k,g),enumerable:!0,configurable:!0}));return d};d.injectStyleProperty=function(b,a,c,e){var g=b.style,f=Object.getOwnPropertyDescriptor(g,
a),h=b.attrListeners().injectedStyle;c=c||J;e=e||G;void 0===h&&(b.attrListeners().injectedStyle={obj:b,proto:g,descriptors:{},set:void 0,update:void 0},b.attrListeners().injectedStyle.set=c,b.attrListeners().injectedStyle.update=e,h=b.attrListeners().injectedStyle);void 0===h.descriptors[a]&&(h.descriptors[a]=f);f.configurable&&Object.defineProperty(g,a,S(f,a,c,e,b));return d};d.injectPrototypes=function(a,e,c,k){var g=a.prototype;e=e||a.toString().split(/\s+/)[1].split("{")[0].replace("()","");var f=
n[e],h=Object.getOwnPropertyNames(g);c=c||J;k=k||G;var p;void 0===g.attrListeners&&(g.attrListeners=function(){void 0===this.__kb&&(this.__kb=new M);return this.__kb},g.addAttrListener=d.addAttrListener,g.addAttrUpdateListener=d.addAttrUpdateListener,g.addChildAttrListener=H,g.addChildAttrUpdateListener=K,g.hasListener=N,g.stopChange=I);void 0===f&&(n[e]={obj:a,proto:g,descriptors:{},set:void 0,update:void 0},f=n[e],f.set=c,f.update=k);p=n[e].descriptors;for(k=0;k<h.length;k+=1)void 0===p[h[k]]&&
d.injectPrototypeProperty(a,h[k],e,c,G);if(-1!==h.indexOf("value")){var q=function(a){var b,c,d;if("checkbox"===this.type||"radio"===this.type)b=!0;c=b?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){d=b?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;b&&(f.set(this,"checked",this.checked,c)?f.update(this,"checked",this.checked,c):p.checked.set.call(this,c));this.value=d;f.set(this,"value",this.value,c)?f.update(this,
"value",this.checked,c):p.value.set.call(this,c)}.bind(this),0)};g.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",q)};g.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",q)};g.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=void 0;this.removeEventListener("mouseup",q)};g.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",q)}}return d};
d.addAttrListener=function(b,d,c){if("html"===b){b=0;for(var e=a.length;b<e;b++)x.call(this,a[b],d,c,!1)}else if("events"===b)for(b=0,e=t.length;b<e;b++)x.call(this,t[b],d,c,!1);else x.call(this,b,d,c,!1);return this};d.addAttrUpdateListener=function(b,d,c){if("html"===b){b=0;for(var e=a.length;b<e;b++)x.call(this,a[b],d,c,!0)}else if("events"===b)for(b=0,e=t.length;b<e;b++)x.call(this,t[b],d,c,!0);else x.call(this,b,d,c,!0);return this};d.removeAttrListener=function(b,d,c){if("html"===b){b=0;for(var e=
a.length;b<e;b++)A.call(this,a[b],d,c,!1)}else if("events"===b)for(b=0,e=t.length;b<e;b++)A.call(this,t[b],d,c,!1);else A.call(this,b,d,c,!1);return this};d.removeAttrUpdateListener=function(b,d,c){if("html"===b){b=0;for(var e=a.length;b<e;b++)A.call(this,a[b],d,c,!0)}else if("events"===b)for(b=0,e=t.length;b<e;b++)A.call(this,t[b],d,c,!0);else A.call(this,b,d,c,!0);return this};d.hasListener=function(a,d,c){"html"===d&&(d="innerHTML");"events"===d&&(d="onclick");switch(a){case "attr":if(E(B[d],c))return!0;
break;case "attrupdate":if(E(q[d],c))return!0}return!1};d.injectedPrototypes=function(){return n};return d}"function"===typeof define&&define.amd&&define("KB",D);return D}());"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return D}):"undefined"!==typeof module&&(module.exports=D);return D}();
